"use strict";var gameready=function(){var i=0,n=0,o=0;function a(e){var t;window.requestAnimationFrame(a),e=((t=e)-i)/1e3,i=t,updater(),function(e){.25<n&&(Math.round(o/n),o=n=0),n+=e,o++}(e),renderer(),context.fillStyle="#000000",context.font="12px Verdana"}console.log("assets loaded"),window.addEventListener("keydown",function(e){gameobjects.keyState[e.keyCode||e.which]=!0},!0),window.addEventListener("keyup",function(e){gameobjects.keyState[e.keyCode||e.which]=!1},!0),window.addEventListener("keyup",function(e){switch(e.keyCode){case 37:leftkey(),leftkeyPressedGUI();break;case 38:upkey();break;case 39:rightkey(),rightkeyPressedGUI();break;case 40:downkey();break;case 32:break;case 13:enterkeyPressedGUI(),enterkey()}},!1),uiInit(),a(0)},gameobjects={keyState:[],holdtime:0,canpick:!1,ignoreEvent:!1,defaults:{warnings:{x:600,y:500,width:600,height:100},scorepercell:10,disableInput:!1,duration:5e3,durationmin:0,durationmax:5e3},meter:{x:60,y:150,width:70,height:700,color:"#ff60f3"},player:{score:0,highscore:0,lastscore:0},grid:{x:0,y:0,width:1500,height:800,cells:[],cell:{x:0,y:0,width:120,height:120},pos:0,grid:{col:10,row:6,total:60}},selector:{x:0,y:0,width:120,height:120,dir:0,element:null},background:{x:0,y:0,width:1600,height:1e3},matcheffects:[],gamestate:"",states:{loading:"loading",home:"home",play:"play",pause:"pause",overpass:"overpass",overfail:"overfail",info:"info"},images:["images/j1.png","images/j2.png","images/j3.png","images/j4.png","images/j5.png","images/j6.png","images/j6.png","images/background.jpg","images/selector.png","images/selectorh.png","images/selectorv.png","images/Font.png","images/jfont.png","images/chessmap.png","images/directionh.png","images/directionv.png","images/block.png","images/gamelogo.png","images/meter.png","images/BtnPlayOn.png","images/BtnInfoOn.png","images/BtnPlayOn.png","images/BtnSoundOn.png","images/BtnSoundOff.png","images/BtnRestartOn.png","images/BtnExitOn.png","images/Button.png"],sounds:["media/swap.ogg","media/match.m4a","media/score.m4a","media/button.m4a","media/gamemusic.ogg"]},GUI={canvas:{x:0,y:0,width:1600,height:1e3},homeScreen:{x:0,y:0,width:1600,height:1e3,xdir:1,ydir:1,speed:200},gamelogo:{x:400,y:0,width:850,height:500},playMenu:{x:0,y:500,width:400,height:400},pauseMenu:{x:0,y:500,width:400,height:400},btnPlay:{x:50,y:50,width:150,height:150},btnSound:{x:50,y:50,width:150,height:150},btnInfo:{x:50,y:50,width:150,height:150},btnCommon:{x:50,y:50,width:150,height:150},btnPointer:{x:50,y:50,width:150,height:150},levelup:{x:350,y:50,width:900,height:400},cellPreview:{x:1420,y:400,width:120,height:120},directionPreview:{x:1420,y:550,width:120,height:120},decoration:{bubbles:new Array(40)},btnPadding:200,pointerPadding:40,loading:!0},img=loadImages(gameobjects.images),sound=loadSound(gameobjects.sounds),homeScreenButtonList=[img.BtnPlayOn,img.BtnInfoOn,img.BtnSoundOn],pauseScreenButtonList=[img.BtnPlayOn,img.BtnRestartOn,img.BtnExitOn,img.BtnSoundOn],homeScreenPointerPos=0,pauseScreenPointerPos=0,globalsound=!0,loadcount=0,loadtotal=0,preloaded=!1;function loadImages(e){preloaded=!1;for(var t=[],i={},n=0;n<e.length;n++){var o=new Image;o.onload=function(){(loadcount+=1)==e.length&&(preloaded=!0)},o.src=e[n],i[(t[n]=o).src.split("/")[o.src.split("/").length-1].split(".")[0]]=o}return i}function loadSound(e){for(var t=[],i={},n=0;n<e.length;n++){var o=new Audio(e[n]);i[(t[n]=o).src.split("/")[o.src.split("/").length-1].split(".")[0]]=o}return i}function handleGlobalSound(){(globalsound=!globalsound)?sound.gamemusic.play():(sound.gamemusic.pause(),sound.gamemusic.currentTime=0),Object.keys(sound).forEach(function(e){sound[e].volume=globalsound?1:0})}function cell(e,t){this.type=random(1,6),this.y=e*gameobjects.grid.cell.height+gameobjects.grid.y,this.x=t*gameobjects.grid.cell.width+gameobjects.grid.x,this.height=gameobjects.grid.cell.height,this.width=gameobjects.grid.cell.width,this.image=img["j"+this.type],createjs.Tween.get(this).play(createjs.Tween.get(this,{paused:!0,loop:!0}).to({width:this.width+5},500,createjs.Ease.quadOut).to({width:this.width},500,createjs.Ease.quadOut)),sound.score.play()}function matcheffect(e){this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this.image=e.image,createjs.Tween.get(this).to({alpha:0,x:750,y:0},1e3).call(function(){for(var e=0;e<gameobjects.matcheffects.length;e++)gameobjects.matcheffects[e]==this&&gameobjects.matcheffects.splice(e,1)})}var a=0;function raindrop(){this.x=randomFloat(0,1600),this.y=random(-100,-1e3),this.width=100,this.height=100,this.image=img["j"+random(1,6)]}function updater(){updaterwithpause()}function renderer(){renderUI()}function leftkey(){gameobjects.gamestate==gameobjects.states.play&&moveleft()}function rightkey(){gameobjects.gamestate==gameobjects.states.play&&moveright()}function downkey(){gameobjects.gamestate==gameobjects.states.play&&moveup()}function upkey(){gameobjects.gamestate==gameobjects.states.play&&movedown()}function enterkey(){gameobjects.holdtime=0,gameobjects.gamestate==gameobjects.states.play&&gameobjects.canpick&&pick()}function startgame(){gameobjects.gamestate=gameobjects.states.play,gameobjects.defaults.duration=gameobjects.defaults.durationmax/2,gameobjects.player.score=0,gameobjects.grid.x=(canvas.width-gameobjects.grid.width)/2,gameobjects.grid.y=(canvas.height-gameobjects.grid.height)/2,gameobjects.grid.cells=[];for(var e=0;e<gameobjects.grid.grid.row;e++)for(var t=0;t<gameobjects.grid.grid.col;t++){var i=new cell(e,t);gameobjects.grid.cells.push(i)}setselectorpos(),setTimeout(match,1e3),gameobjects.canpick=!1,setTimeout(function(){gameobjects.canpick=!0},1e3)}function updaterwithpause(){gameobjects.gamestate==gameobjects.states.play&&(gameobjects.keyState[13]&&(gameobjects.holdtime+=1,40<gameobjects.holdtime&&(gameobjects.ignoreEvent=!0,gameobjects.gamestate=gameobjects.states.pause,console.log("paused"),pick(),gameobjects.holdtime=0)),gameobjects.defaults.duration>gameobjects.defaults.durationmin?--gameobjects.defaults.duration:(gameobjects.gamestate=gameobjects.states.overfail,gameobjects.player.lastscore=gameobjects.player.score,gameobjects.player.highscore<gameobjects.player.score&&(gameobjects.player.highscore=gameobjects.player.score),gameobjects.player.score=0))}function moveleft(){moveleftdir(!1)}function moveright(){moverightdir(!1)}function movedown(){moveleftdir(!0)}function moveup(){moverightdir(!0)}function moveleftdir(e){var t=Math.floor(gameobjects.grid.pos/gameobjects.grid.grid.col)*gameobjects.grid.grid.col,i=t+gameobjects.grid.grid.col-1,n=gameobjects.grid.grid.col-1;gameobjects.grid.cells.length,gameobjects.grid.grid.col,e?gameobjects.selector.element?gameobjects.grid.pos>n&&(gameobjects.grid.pos-=gameobjects.grid.grid.col,setselectorpos(),swap(gameobjects.grid.pos+gameobjects.grid.grid.col,gameobjects.grid.pos)):(gameobjects.grid.pos>n?gameobjects.grid.pos-=gameobjects.grid.grid.col:gameobjects.grid.pos+=gameobjects.grid.grid.col*(gameobjects.grid.grid.row-1),setselectorpos()):gameobjects.selector.element?gameobjects.grid.pos>t&&(--gameobjects.grid.pos,setselectorpos(),swap(gameobjects.grid.pos+1,gameobjects.grid.pos)):(--gameobjects.grid.pos,gameobjects.grid.pos<t&&(gameobjects.grid.pos=i),gameobjects.grid.pos>i&&(gameobjects.grid.pos=t),setselectorpos())}function moverightdir(e){var t=Math.floor(gameobjects.grid.pos/gameobjects.grid.grid.col)*gameobjects.grid.grid.col,i=t+gameobjects.grid.grid.col-1;gameobjects.grid.grid.col;var n=gameobjects.grid.cells.length-gameobjects.grid.grid.col;e?gameobjects.selector.element?gameobjects.grid.pos<n&&(gameobjects.grid.pos+=gameobjects.grid.grid.col,setselectorpos(),swap(gameobjects.grid.pos-gameobjects.grid.grid.col,gameobjects.grid.pos)):(gameobjects.grid.pos<n?gameobjects.grid.pos+=gameobjects.grid.grid.col:gameobjects.grid.pos-=gameobjects.grid.grid.col*(gameobjects.grid.grid.row-1),setselectorpos()):gameobjects.selector.element?gameobjects.grid.pos<i&&(gameobjects.grid.pos+=1,setselectorpos(),swap(gameobjects.grid.pos-1,gameobjects.grid.pos)):(gameobjects.grid.pos+=1,gameobjects.grid.pos<t&&(gameobjects.grid.pos=i),gameobjects.grid.pos>i&&(gameobjects.grid.pos=t),setselectorpos())}function rotate(){gameobjects.selector.dir=!gameobjects.selector.dir}function pick(){null==gameobjects.selector.element?gameobjects.selector.element=gameobjects.grid.cells[gameobjects.grid.pos]:gameobjects.selector.element=null}function swap(e,t){var i=gameobjects.grid.cells[e],n=gameobjects.grid.cells[t],o={x:i.x,y:i.y},a={x:n.x,y:n.y};setPosToAnotherObject(gameobjects.grid.cells[e],a),setPosToAnotherObject(gameobjects.grid.cells[t],o),gameobjects.grid.cells[e]=n,gameobjects.grid.cells[t]=i;var s=gameobjects.player.score;match(),s<gameobjects.player.score?(gameobjects.selector.element=null,sound.match.play()):setTimeout(function(){gameobjects.grid.cells[e]=i,gameobjects.grid.cells[t]=n,setPosToAnotherObject(gameobjects.grid.cells[e],o),setPosToAnotherObject(gameobjects.grid.cells[t],a),gameobjects.selector.element=null,sound.swap.play()},100)}function match(){for(var e=0,t=0,i=[],n=0;n<gameobjects.grid.grid.row;n++){for(var o=[],a=0;a<gameobjects.grid.grid.col;a++){var s=n*gameobjects.grid.grid.col+a,t=e;(e=gameobjects.grid.cells[s].type)==t?o.push(s):(2<o.length&&i.push(o),(o=[]).push(s))}2<o.length&&i.push(o)}for(n=0;n<gameobjects.grid.grid.col;n++){for(var o=[],r=0;r<gameobjects.grid.grid.row;r++){s=n+gameobjects.grid.grid.col*r;t=e,(e=gameobjects.grid.cells[s].type)==t?o.push(s):(2<o.length&&i.push(o),(o=[]).push(s))}2<o.length&&i.push(o)}0<i.length&&(i.forEach(function(e){e.forEach(function(e){gameobjects.grid.cells[e]&&destroy(e)})}),setTimeout(match,500))}function destroy(e){gameobjects.matcheffects.push(new matcheffect(gameobjects.grid.cells[e]));for(var t=e;t>gameobjects.grid.grid.col-1;t-=gameobjects.grid.grid.col){var i=t,n=t-gameobjects.grid.grid.col;gameobjects.grid.cells[n].y+=gameobjects.grid.cell.height,gameobjects.grid.cells[i]=gameobjects.grid.cells[n]}e-=Math.floor(e/gameobjects.grid.grid.col)*gameobjects.grid.grid.col;gameobjects.grid.cells[e]=new cell(0,e),gameobjects.player.score+=gameobjects.defaults.scorepercell,gameobjects.defaults.duration<gameobjects.defaults.durationmax?gameobjects.defaults.duration+=100:gameobjects.defaults.duration=gameobjects.defaults.durationmax}function setselectorpos(){setPosToAnotherObject(gameobjects.selector,gameobjects.grid.cells[gameobjects.grid.pos])}function setPosToAnotherObject(e,t){e.x=t.x,e.y=t.y}function renderGame(){context.drawImage(img.background,gameobjects.background.x,gameobjects.background.y,gameobjects.background.width,gameobjects.background.height),context.drawImage(img.chessmap,gameobjects.grid.x,gameobjects.grid.y,gameobjects.grid.width,gameobjects.grid.height),context.drawImage(img.block,gameobjects.selector.x,gameobjects.selector.y,gameobjects.selector.width,gameobjects.selector.height);for(var e=0;e<gameobjects.grid.cells.length;e++){var t=gameobjects.grid.cells[e];context.drawImage(t.image,t.x,t.y,t.width,t.width)}context.drawImage(img.selector,gameobjects.selector.x,gameobjects.selector.y,gameobjects.selector.width,gameobjects.selector.height),spriteWrite("Score:"+gameobjects.player.score,fontMedium,800,50,!0),context.drawImage(img.selector,GUI.cellPreview.x,GUI.cellPreview.y,gameobjects.selector.width,gameobjects.selector.height),gameobjects.selector.element?context.drawImage(gameobjects.grid.cells[gameobjects.grid.pos].image,GUI.cellPreview.x,GUI.cellPreview.y,gameobjects.selector.width,gameobjects.selector.height):context.drawImage(gameobjects.grid.cells[gameobjects.grid.pos].image,GUI.cellPreview.x+20,GUI.cellPreview.y+20,gameobjects.selector.width-40,gameobjects.selector.height-40);for(e=0;e<gameobjects.matcheffects.length;e++){var i=gameobjects.matcheffects[e];context.drawImage(i.image,i.x,i.y,i.width,i.height)}var n=gameobjects.defaults.duration/5*.7;context.fillStyle=gameobjects.meter.color,context.fillRect(gameobjects.meter.x+gameobjects.meter.width/4,gameobjects.meter.y+gameobjects.meter.height-n,gameobjects.meter.width/2,n),context.drawImage(img.meter,gameobjects.meter.x,gameobjects.meter.y-10,gameobjects.meter.width,gameobjects.meter.height+20)}function renderUI(){if(gameobjects.gamestate==gameobjects.states.loading)context.drawImage(img.background,gameobjects.background.x,gameobjects.background.y,gameobjects.background.width,gameobjects.background.height),spriteWrite("loading is complete",fontSmall,780,400,!0),spriteWrite("press ok button",fontBig,780,500,!0);else if(gameobjects.gamestate==gameobjects.states.home){context.drawImage(img.background,gameobjects.background.x,gameobjects.background.y,gameobjects.background.width,gameobjects.background.height);for(var e=GUI.decoration.bubbles,t=0;t<e.length;t++)context.drawImage(e[t].image,e[t].x,e[t].y,e[t].width,e[t].height);context.drawImage(img.gamelogo,GUI.gamelogo.x,GUI.gamelogo.y,GUI.gamelogo.width,GUI.gamelogo.height),context.drawImage(img.Button,GUI.playMenu.x-GUI.pointerPadding/2+GUI.btnCommon.x+200*homeScreenPointerPos,GUI.playMenu.y-GUI.pointerPadding/2+GUI.btnPlay.y,GUI.btnCommon.width+GUI.pointerPadding,GUI.btnCommon.height+GUI.pointerPadding);for(t=0;t<homeScreenButtonList.length;t++)context.drawImage(homeScreenButtonList[t],GUI.playMenu.x+GUI.btnCommon.x+200*t,GUI.playMenu.y+GUI.btnCommon.y,GUI.btnCommon.width,GUI.btnCommon.height)}else if(gameobjects.gamestate==gameobjects.states.pause){context.drawImage(img.background,gameobjects.background.x,gameobjects.background.y,gameobjects.background.width,gameobjects.background.height),spriteWrite2("paused",fontXL,800,50,!0),context.drawImage(img.Button,GUI.pauseMenu.x-GUI.pointerPadding/2+GUI.btnCommon.x+200*pauseScreenPointerPos,GUI.pauseMenu.y-GUI.pointerPadding/2+GUI.btnPlay.y,GUI.btnCommon.width+GUI.pointerPadding,GUI.btnCommon.height+GUI.pointerPadding);for(t=0;t<pauseScreenButtonList.length;t++)context.drawImage(pauseScreenButtonList[t],GUI.pauseMenu.x+GUI.btnCommon.x+200*t,GUI.pauseMenu.y+GUI.btnCommon.y,GUI.btnCommon.width,GUI.btnCommon.height)}else gameobjects.gamestate==gameobjects.states.play?renderGame():gameobjects.gamestate==gameobjects.states.overfail?(context.drawImage(img.background,gameobjects.background.x,gameobjects.background.y,gameobjects.background.width,gameobjects.background.height),spriteWrite2("GAME OVER",fontXL,800,100,!0),spriteWrite("HIGH SCORE:"+gameobjects.player.highscore,fontMedium,800,450,!0),spriteWrite("YOUR SCORE:"+gameobjects.player.lastscore,fontMedium,800,550,!0),spriteWrite("PRESS OK BUTTON TO GO BACK TO MAIN MENU",fontMedium,800,750,!0)):gameobjects.gamestate==gameobjects.states.info&&(context.drawImage(img.background,gameobjects.background.x,gameobjects.background.y,gameobjects.background.width,gameobjects.background.height),spriteWrite2("how to play",fontXL,800,50,!0),spriteWrite("press arrow buttons to move the selector",fontSmall,800,250,!0),spriteWrite("press ok button to pick a jelly for swaping",fontSmall,800,350,!0),spriteWrite("press arrow buttons with a jelly picked to swap",fontSmall,800,450,!0),spriteWrite("while playing hold ok button to pause",fontSmall,800,550,!0),spriteWrite("PRESS OK BUTTON TO GO BACK TO MAIN MENU",fontMedium,800,750,!0))}gameobjects.grid.width=gameobjects.grid.grid.col*gameobjects.grid.cell.width,gameobjects.grid.height=gameobjects.grid.grid.row*gameobjects.grid.cell.height;var canvas,context,lastgamestate="home";function Canvas2D(){canvas=document.getElementById("viewport"),context=canvas.getContext("2d")}window.addEventListener("blur",function(){lastgamestate=gameobjects.gamestate,gameobjects.gamestate=gameobjects.states.pause,sound.gamemusic.pause()}),window.addEventListener("focus",function(){gameobjects.gamestate=lastgamestate,sound.gamemusic.play()}),window.onload=function(){resizeCanvas(),setTimeout(function(){document.getElementById("loader").style.display="none",canvas.style.display="block",gameready()},2e3)},window.onresize=function(){resizeCanvas()},Canvas2D();var level={x:1,y:65,width:canvas.width-2,height:canvas.height-66};function resizeCanvas(){canvas.style.height=window.innerHeight+"px",canvas.style.width=window.innerWidth+"px"}var canvas2d=new Canvas2D;function resizeCanvasKeepAR(){widthToHeight=window.innerWidth/window.innerHeight,widthToHeightIdeal=1.6,state=widthToHeight>widthToHeightIdeal?"wider":"higher",widthToHeight>widthToHeightIdeal?(canvas.style.height=window.innerHeight+"px",canvas.style.width=window.innerHeight*widthToHeightIdeal+"px",canvas.style.marginLeft=(window.innerWidth-window.innerHeight*widthToHeightIdeal)/2+"px",canvas.style.marginTop="0px"):(canvas.style.width=window.innerWidth+"px",canvas.style.height=window.innerWidth/widthToHeightIdeal+"px",canvas.style.marginTop=(window.innerHeight-window.innerWidth/widthToHeightIdeal)/2+"px",canvas.style.marginLeft="0px")}function uiInit(){gameobjects.gamestate=gameobjects.states.loading,createHomeMenu(),raindropeffect()}function createHomeMenu(){createjs.Tween.get(GUI.gamelogo).play(createjs.Tween.get(GUI.gamelogo,{paused:!0,loop:!0}).to({width:GUI.gamelogo.width+20,height:GUI.gamelogo.height+20},500,createjs.Ease.quadOut).to({width:GUI.gamelogo.width,height:GUI.gamelogo.height},500,createjs.Ease.quadOut)),createjs.Tween.get(GUI.gamelogo).play(createjs.Tween.get(GUI.gamelogo,{paused:!0,loop:!0}).to({x:GUI.gamelogo.x-10},500,createjs.Ease.quadOut).to({x:GUI.gamelogo.x},500,createjs.Ease.quadOut)),GUI.playMenu.width=GUI.btnCommon.width*(homeScreenButtonList.length+1),GUI.playMenu.x=(canvas.width-GUI.playMenu.width)/2-8*homeScreenButtonList.length,GUI.pauseMenu.width=GUI.btnCommon.width*(pauseScreenButtonList.length+1),GUI.pauseMenu.x=(canvas.width-GUI.pauseMenu.width)/2-8*pauseScreenButtonList.length,createjs.Tween.get(GUI.btnCommon).play(createjs.Tween.get(GUI.btnCommon,{paused:!0,loop:!0}).to({height:GUI.btnCommon.height+5},500,createjs.Ease.quadOut).to({height:GUI.btnCommon.height},500,createjs.Ease.quadOut)),GUI.levelup.y=-400}function leftkeyPressedGUI(){gameobjects.gamestate==gameobjects.states.home&&(homeScreenPointerPos=movePointer(homeScreenPointerPos,homeScreenButtonList,!1)),gameobjects.gamestate==gameobjects.states.pause&&(pauseScreenPointerPos=movePointer(pauseScreenPointerPos,pauseScreenButtonList,!1))}function rightkeyPressedGUI(){gameobjects.gamestate==gameobjects.states.home&&(homeScreenPointerPos=movePointer(homeScreenPointerPos,homeScreenButtonList,!0)),gameobjects.gamestate==gameobjects.states.pause&&(pauseScreenPointerPos=movePointer(pauseScreenPointerPos,pauseScreenButtonList,!0))}function enterkeyPressedGUI(){gameobjects.gamestate==gameobjects.states.loading&&(setTimeout(function(){gameobjects.gamestate=gameobjects.states.home},10),GUI.loading=!1,sound.gamemusic.loop=!0,sound.gamemusic.play()),gameobjects.gamestate==gameobjects.states.home?(0==homeScreenPointerPos&&(gameobjects.gamestate=gameobjects.states.play,startgame()),1==homeScreenPointerPos&&(gameobjects.gamestate=gameobjects.states.info,console.log("info")),2==homeScreenPointerPos&&(console.log("audio"),handleGlobalSound(),homeScreenButtonList[2]=globalsound?img.BtnSoundOn:img.BtnSoundOff,pauseScreenButtonList[3]=globalsound?img.BtnSoundOn:img.BtnSoundOff)):gameobjects.gamestate==gameobjects.states.info?gameobjects.gamestate=gameobjects.states.home:gameobjects.gamestate==gameobjects.states.play||(gameobjects.gamestate==gameobjects.states.pause?gameobjects.ignoreEvent?gameobjects.ignoreEvent=!1:(0==pauseScreenPointerPos&&(gameobjects.gamestate=gameobjects.states.play),1==pauseScreenPointerPos&&(startgame(),gameobjects.gamestate=gameobjects.states.play),2==pauseScreenPointerPos&&(gameobjects.gamestate=gameobjects.states.home),3==pauseScreenPointerPos&&(console.log("audio"),handleGlobalSound(),homeScreenButtonList[2]=globalsound?img.BtnSoundOn:img.BtnSoundOff,pauseScreenButtonList[3]=globalsound?img.BtnSoundOn:img.BtnSoundOff)):gameobjects.gamestate==gameobjects.states.overpass?gameobjects.gamestate=gameobjects.states.play:gameobjects.gamestate==gameobjects.states.overfail&&(gameobjects.gamestate=gameobjects.states.home))}function downkeyPressedGUI(){}function upkeyPressedGUI(){}function movePointer(e,t,i){return i?e+1>=t.length?0:e+1:e-1<0?t.length-1:e-1}function raindropeffect(){for(var e=0;e<GUI.decoration.bubbles.length;e++){var t=new raindrop;createjs.Tween.get(t).wait(random(0,9e3)).play(createjs.Tween.get(t,{paused:!0,loop:!0}).to({y:1e3},5e3).to({y:0},0)),GUI.decoration.bubbles[e]=t}}function characterIndex(e){for(var t=0;t<spritefont1.xindex;t++)for(var i=0;i<spritefont1.yindex;i++){var n=spritefont1.characterSet[i*spritefont1.xindex+t];if(e.toLowerCase()==n.toLowerCase())return{i:t,j:i}}}function spriteWrite(e,t,i,n,o){o&&(i-=e.length*t.size*t.spacing/2);for(var a,s,r=spritefont1.imgResolution/spritefont1.xindex,c=r-spritefont1.xindex,g=0;g<e.length;g++)" "!=e[g]&&(a=characterIndex(e[g]).i,s=characterIndex(e[g]).j,context.drawImage(img[spritefont1.img],r*a,r*s,c,c,i+t.size*t.spacing*g,n,t.size,t.size))}function spriteWrite2(e,t,i,n,o){o&&(i-=e.length*t.size*t.spacing/2);for(var a,s,r=spritefont2.imgResolution/spritefont2.xindex,c=r-spritefont2.xindex,g=0;g<e.length;g++)" "!=e[g]&&(a=characterIndex(e[g]).i,s=characterIndex(e[g]).j,context.drawImage(img[spritefont2.img],r*a,r*s,c,c,i+t.size*t.spacing*g,n,t.size,t.size))}this.createjs=this.createjs||{},createjs.extend=function(e,t){function i(){this.constructor=e}return i.prototype=t.prototype,e.prototype=new i},this.createjs=this.createjs||{},createjs.promote=function(e,t){var i=e.prototype,n=Object.getPrototypeOf&&Object.getPrototypeOf(i)||i.__proto__;if(n)for(var o in i[(t+="_")+"constructor"]=n.constructor,n)i.hasOwnProperty(o)&&"function"==typeof n[o]&&(i[t+o]=n[o]);return e},this.createjs=this.createjs||{},createjs.deprecate=function(t,i){return function(){var e="Deprecated property or method '"+i+"'. See docs for info.";return console&&(console.warn?console.warn(e):console.log(e)),t&&t.apply(this,arguments)}},this.createjs=this.createjs||{},function(){function e(e,t,i){this.type=e,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!t,this.cancelable=!!i,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var t=e.prototype;t.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},t.stopPropagation=function(){this.propagationStopped=!0},t.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},t.remove=function(){this.removed=!0},t.clone=function(){return new e(this.type,this.bubbles,this.cancelable)},t.set=function(e){for(var t in e)this[t]=e[t];return this},t.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=e}(),this.createjs=this.createjs||{},function(){function e(){this._listeners=null,this._captureListeners=null}var t=e.prototype;e.initialize=function(e){e.addEventListener=t.addEventListener,e.on=t.on,e.removeEventListener=e.off=t.removeEventListener,e.removeAllEventListeners=t.removeAllEventListeners,e.hasEventListener=t.hasEventListener,e.dispatchEvent=t.dispatchEvent,e._dispatchEvent=t._dispatchEvent,e.willTrigger=t.willTrigger},t.addEventListener=function(e,t,i){var n=i?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{},o=n[e];return o&&this.removeEventListener(e,t,i),(o=n[e])?o.push(t):n[e]=[t],t},t.on=function(e,t,i,n,o,a){return t.handleEvent&&(i=i||t,t=t.handleEvent),i=i||this,this.addEventListener(e,function(e){t.call(i,e,o),n&&e.remove()},a)},t.removeEventListener=function(e,t,i){var n=i?this._captureListeners:this._listeners;if(n){var o=n[e];if(o)for(var a=0,s=o.length;a<s;a++)if(o[a]==t){1==s?delete n[e]:o.splice(a,1);break}}},t.off=t.removeEventListener,t.removeAllEventListeners=function(e){e?(this._listeners&&delete this._listeners[e],this._captureListeners&&delete this._captureListeners[e]):this._listeners=this._captureListeners=null},t.dispatchEvent=function(e,t,i){if("string"==typeof e){var n=this._listeners;if(!(t||n&&n[e]))return!0;e=new createjs.Event(e,t,i)}else e.target&&e.clone&&(e=e.clone());try{e.target=this}catch(e){}if(e.bubbles&&this.parent){for(var o=this,a=[o];o.parent;)a.push(o=o.parent);for(var s=a.length,r=s-1;0<=r&&!e.propagationStopped;r--)a[r]._dispatchEvent(e,1+(0==r));for(r=1;r<s&&!e.propagationStopped;r++)a[r]._dispatchEvent(e,3)}else this._dispatchEvent(e,2);return!e.defaultPrevented},t.hasEventListener=function(e){var t=this._listeners,i=this._captureListeners;return!!(t&&t[e]||i&&i[e])},t.willTrigger=function(e){for(var t=this;t;){if(t.hasEventListener(e))return!0;t=t.parent}return!1},t.toString=function(){return"[EventDispatcher]"},t._dispatchEvent=function(e,t){var i,n,o=t<=2?this._captureListeners:this._listeners;if(e&&o&&(n=o[e.type])&&(i=n.length)){try{e.currentTarget=this}catch(e){}try{e.eventPhase=0|t}catch(e){}e.removed=!1,n=n.slice();for(var a=0;a<i&&!e.immediatePropagationStopped;a++){var s=n[a];s.handleEvent?s.handleEvent(e):s(e),e.removed&&(this.off(e.type,s,1==t),e.removed=!1)}}2===t&&this._dispatchEvent(e,2.1)},createjs.EventDispatcher=e}(),this.createjs=this.createjs||{},function(){function a(){throw"Ticker cannot be instantiated."}a.RAF_SYNCHED="synched",a.RAF="raf",a.TIMEOUT="timeout",a.timingMode=null,a.maxDelta=0,a.paused=!1,a.removeEventListener=null,a.removeAllEventListeners=null,a.dispatchEvent=null,a.hasEventListener=null,a._listeners=null,createjs.EventDispatcher.initialize(a),a._addEventListener=a.addEventListener,a.addEventListener=function(){return a._inited||a.init(),a._addEventListener.apply(a,arguments)},a._inited=!1,a._startTime=0,a._pausedTime=0,a._ticks=0,a._pausedTicks=0,a._interval=50,a._lastTime=0,a._times=null,a._tickTimes=null,a._timerId=null,a._raf=!0,a._setInterval=function(e){a._interval=e,a._inited&&a._setupTick()},a.setInterval=createjs.deprecate(a._setInterval,"Ticker.setInterval"),a._getInterval=function(){return a._interval},a.getInterval=createjs.deprecate(a._getInterval,"Ticker.getInterval"),a._setFPS=function(e){a._setInterval(1e3/e)},a.setFPS=createjs.deprecate(a._setFPS,"Ticker.setFPS"),a._getFPS=function(){return 1e3/a._interval},a.getFPS=createjs.deprecate(a._getFPS,"Ticker.getFPS");try{Object.defineProperties(a,{interval:{get:a._getInterval,set:a._setInterval},framerate:{get:a._getFPS,set:a._setFPS}})}catch(e){console.log(e)}a.init=function(){a._inited||(a._inited=!0,a._times=[],a._tickTimes=[],a._startTime=a._getTime(),a._times.push(a._lastTime=0),a.interval=a._interval)},a.reset=function(){var e;a._raf?(e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame)&&e(a._timerId):clearTimeout(a._timerId),a.removeAllEventListeners("tick"),a._timerId=a._times=a._tickTimes=null,a._startTime=a._lastTime=a._ticks=a._pausedTime=0,a._inited=!1},a.getMeasuredTickTime=function(e){var t=0,i=a._tickTimes;if(!i||i.length<1)return-1;e=Math.min(i.length,e||0|a._getFPS());for(var n=0;n<e;n++)t+=i[n];return t/e},a.getMeasuredFPS=function(e){var t=a._times;return!t||t.length<2?-1:(e=Math.min(t.length-1,e||0|a._getFPS()),1e3/((t[0]-t[e])/e))},a.getTime=function(e){return a._startTime?a._getTime()-(e?a._pausedTime:0):-1},a.getEventTime=function(e){return a._startTime?(a._lastTime||a._startTime)-(e?a._pausedTime:0):-1},a.getTicks=function(e){return a._ticks-(e?a._pausedTicks:0)},a._handleSynch=function(){a._timerId=null,a._setupTick(),a._getTime()-a._lastTime>=.97*(a._interval-1)&&a._tick()},a._handleRAF=function(){a._timerId=null,a._setupTick(),a._tick()},a._handleTimeout=function(){a._timerId=null,a._setupTick(),a._tick()},a._setupTick=function(){if(null==a._timerId){var e=a.timingMode;if(e==a.RAF_SYNCHED||e==a.RAF){var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(t)return a._timerId=t(e==a.RAF?a._handleRAF:a._handleSynch),void(a._raf=!0)}a._raf=!1,a._timerId=setTimeout(a._handleTimeout,a._interval)}},a._tick=function(){var e,t,i=a.paused,n=a._getTime(),o=n-a._lastTime;for(a._lastTime=n,a._ticks++,i&&(a._pausedTicks++,a._pausedTime+=o),a.hasEventListener("tick")&&(e=new createjs.Event("tick"),t=a.maxDelta,e.delta=t&&t<o?t:o,e.paused=i,e.time=n,e.runTime=n-a._pausedTime,a.dispatchEvent(e)),a._tickTimes.unshift(a._getTime()-n);100<a._tickTimes.length;)a._tickTimes.pop();for(a._times.unshift(n);100<a._times.length;)a._times.pop()};var e=window,t=e.performance.now||e.performance.mozNow||e.performance.msNow||e.performance.oNow||e.performance.webkitNow;a._getTime=function(){return(t&&t.call(e.performance)||(new Date).getTime())-a._startTime},createjs.Ticker=a}(),this.createjs=this.createjs||{},function(){function e(e){this.EventDispatcher_constructor(),this.ignoreGlobalPause=!1,this.loop=0,this.useTicks=!1,this.reversed=!1,this.bounce=!1,this.timeScale=1,this.duration=0,this.position=0,this.rawPosition=-1,this._paused=!0,this._next=null,this._prev=null,this._parent=null,this._labels=null,this._labelList=null,e&&(this.useTicks=!!e.useTicks,this.ignoreGlobalPause=!!e.ignoreGlobalPause,this.loop=!0===e.loop?-1:e.loop||0,this.reversed=!!e.reversed,this.bounce=!!e.bounce,this.timeScale=e.timeScale||1,e.onChange&&this.addEventListener("change",e.onChange),e.onComplete&&this.addEventListener("complete",e.onComplete))}var t=createjs.extend(e,createjs.EventDispatcher);t._setPaused=function(e){return createjs.Tween._register(this,e),this},t.setPaused=createjs.deprecate(t._setPaused,"AbstractTween.setPaused"),t._getPaused=function(){return this._paused},t.getPaused=createjs.deprecate(t._getPaused,"AbstactTween.getPaused"),t._getCurrentLabel=function(e){var t=this.getLabels();null==e&&(e=this.position);for(var i=0,n=t.length;i<n&&!(e<t[i].position);i++);return 0===i?null:t[i-1].label},t.getCurrentLabel=createjs.deprecate(t._getCurrentLabel,"AbstractTween.getCurrentLabel");try{Object.defineProperties(t,{paused:{set:t._setPaused,get:t._getPaused},currentLabel:{get:t._getCurrentLabel}})}catch(e){}t.advance=function(e,t){this.setPosition(this.rawPosition+e*this.timeScale,t)},t.setPosition=function(e,t,i,n){var o=this.duration,a=this.loop,s=this.rawPosition,r=0,c=0,g=!1;if(e<0&&(e=0),0===o){if(g=!0,-1!==s)return g}else{if(c=e-(r=e/o|0)*o,(g=-1!==a&&a*o+o<=e)&&(e=(c=o)*(r=a)+o),e===s)return g;!this.reversed!=!(this.bounce&&r%2)&&(c=o-c)}this.position=c,this.rawPosition=e,this._updatePosition(i,g),g&&(this.paused=!0),n&&n(this),t||this._runActions(s,e,i,!i&&-1===s),this.dispatchEvent("change"),g&&this.dispatchEvent("complete")},t.calculatePosition=function(e){var t=this.duration,i=this.loop,n=0,o=0;return 0===t?0:(-1!==i&&i*t+t<=e?(o=t,n=i):o=e<0?0:e-(n=e/t|0)*t,!this.reversed!=!(this.bounce&&n%2)?t-o:o)},t.getLabels=function(){var e=this._labelList;if(!e){e=this._labelList=[];var t,i=this._labels;for(t in i)e.push({label:t,position:i[t]});e.sort(function(e,t){return e.position-t.position})}return e},t.setLabels=function(e){this._labels=e,this._labelList=null},t.addLabel=function(e,t){this._labels||(this._labels={}),this._labels[e]=t;var i=this._labelList;if(i){for(var n=0,o=i.length;n<o&&!(t<i[n].position);n++);i.splice(n,0,{label:e,position:t})}},t.gotoAndPlay=function(e){this.paused=!1,this._goto(e)},t.gotoAndStop=function(e){this.paused=!0,this._goto(e)},t.resolve=function(e){var t=Number(e);return isNaN(t)&&(t=this._labels&&this._labels[e]),t},t.toString=function(){return"[AbstractTween]"},t.clone=function(){throw"AbstractTween can not be cloned."},t._init=function(e){e&&e.paused||(this.paused=!1),e&&null!=e.position&&this.setPosition(e.position)},t._updatePosition=function(){},t._goto=function(e){e=this.resolve(e);null!=e&&this.setPosition(e,!1,!0)},t._runActions=function(e,t,i,n){if(this._actionHead||this.tweens){var o,a,s,r,c=this.duration,g=this.reversed,d=this.bounce,u=this.loop;if(0===c?(o=a=s=r=0,g=d=!1):(s=e-(o=e/c|0)*c,r=t-(a=t/c|0)*c),-1!==u&&(u<a&&(r=c,a=u),u<o&&(s=c,o=u)),i)return this._runActionsRange(r,r,i,n);if(o!==a||s!==r||i||n){-1===o&&(o=s=0);var l=e<=t,h=o;do{var m=!g!=!(d&&h%2),p=h===o?s:l?0:c,b=h===a?r:l?c:0;if(m&&(p=c-p,b=c-b),(!d||h===o||p!==b)&&this._runActionsRange(p,b,i,n||h!==o&&!d))return!0}while(n=!1,l&&++h<=a||!l&&--h>=a)}}},t._runActionsRange=function(){},createjs.AbstractTween=createjs.promote(e,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){function b(e,t){this.AbstractTween_constructor(t),this.pluginData=null,this.target=e,this.passive=!1,this._stepHead=new o(null,0,0,{},null,!0),this._stepTail=this._stepHead,this._stepPosition=0,this._actionHead=null,this._actionTail=null,this._plugins=null,this._pluginIds=null,this._injected=null,t&&(this.pluginData=t.pluginData,t.override&&b.removeTweens(e)),this.pluginData||(this.pluginData={}),this._init(t)}function o(e,t,i,n,o,a){this.next=null,this.prev=e,this.t=t,this.d=i,this.props=n,this.ease=o,this.passive=a,this.index=e?e.index+1:0}function n(e,t,i,n,o){this.next=null,this.prev=e,this.t=t,this.d=0,this.scope=i,this.funct=n,this.params=o}var e=createjs.extend(b,createjs.AbstractTween);b.IGNORE={},b._tweens=[],b._plugins=null,b._tweenHead=null,b._tweenTail=null,b.get=function(e,t){return new b(e,t)},b.tick=function(e,t){for(var i=b._tweenHead;i;){var n=i._next;t&&!i.ignoreGlobalPause||i._paused||i.advance(i.useTicks?1:e),i=n}},b.handleEvent=function(e){"tick"===e.type&&this.tick(e.delta,e.paused)},b.removeTweens=function(e){if(e.tweenjs_count){for(var t=b._tweenHead;t;){var i=t._next;t.target===e&&b._register(t,!0),t=i}e.tweenjs_count=0}},b.removeAllTweens=function(){for(var e=b._tweenHead;e;){var t=e._next;e._paused=!0,e.target&&(e.target.tweenjs_count=0),e._next=e._prev=null,e=t}b._tweenHead=b._tweenTail=null},b.hasActiveTweens=function(e){return e?!!e.tweenjs_count:!!b._tweenHead},b._installPlugin=function(e){for(var t=e.priority=e.priority||0,i=b._plugins=b._plugins||[],n=0,o=i.length;n<o&&!(t<i[n].priority);n++);i.splice(n,0,e)},b._register=function(e,t){var i,n=e.target;!t&&e._paused?(n&&(n.tweenjs_count=n.tweenjs_count?n.tweenjs_count+1:1),(i=b._tweenTail)?(b._tweenTail=i._next=e)._prev=i:b._tweenHead=b._tweenTail=e,!b._inited&&createjs.Ticker&&(createjs.Ticker.addEventListener("tick",b),b._inited=!0)):t&&!e._paused&&(n&&n.tweenjs_count--,i=e._next,n=e._prev,i?i._prev=n:b._tweenTail=n,n?n._next=i:b._tweenHead=i,e._next=e._prev=null),e._paused=t},e.wait=function(e,t){return 0<e&&this._addStep(+e,this._stepTail.props,null,t),this},e.to=function(e,t,i){(null==t||t<0)&&(t=0);i=this._addStep(+t,null,i);return this._appendProps(e,i),this},e.label=function(e){return this.addLabel(e,this.duration),this},e.call=function(e,t,i){return this._addAction(i||this.target,e,t||[this])},e.set=function(e,t){return this._addAction(t||this.target,this._set,[e])},e.play=function(e){return this._addAction(e||this,this._set,[{paused:!1}])},e.pause=function(e){return this._addAction(e||this,this._set,[{paused:!0}])},e.w=e.wait,e.t=e.to,e.c=e.call,e.s=e.set,e.toString=function(){return"[Tween]"},e.clone=function(){throw"Tween can not be cloned."},e._addPlugin=function(e){var t=this._pluginIds||(this._pluginIds={}),i=e.ID;if(i&&!t[i]){t[i]=!0;for(var n=this._plugins||(this._plugins=[]),o=e.priority||0,a=0,s=n.length;a<s;a++)if(o<n[a].priority)return void n.splice(a,0,e);n.push(e)}},e._updatePosition=function(e,t){var i=this._stepHead.next,n=this.position,o=this.duration;if(this.target&&i){for(var a=i.next;a&&a.t<=n;)a=(i=i.next).next;o=t?0===o?1:n/o:(n-i.t)/i.d;this._updateTargetProps(i,o,t)}this._stepPosition=i?n-i.t:0},e._updateTargetProps=function(e,t,i){if(!(this.passive=!!e.passive)){var n,o,a,s,r=e.prev.props,c=e.props;(s=e.ease)&&(t=s(t,0,1,1));var g=this._plugins;e:for(var d in r){if(n=(o=r[d])!==(a=c[d])&&"number"==typeof o?o+(a-o)*t:1<=t?a:o,g)for(var u=0,l=g.length;u<l;u++){var h=g[u].change(this,e,d,n,t,i);if(h===b.IGNORE)continue e;void 0!==h&&(n=h)}this.target[d]=n}}},e._runActionsRange=function(e,t,i,n){var o=t<e,a=o?this._actionTail:this._actionHead,s=t,r=e;o&&(s=e,r=t);for(var c=this.position;a;){var g=a.t;if((g===t||r<g&&g<s||n&&g===e)&&(a.funct.apply(a.scope,a.params),c!==this.position))return!0;a=o?a.prev:a.next}},e._appendProps=function(e,t,i){var n,o,a,s,r=this._stepHead.props,c=this.target,g=b._plugins,d=t.prev,u=d.props,l=t.props||(t.props=this._cloneProps(u)),h={};for(n in e)if(e.hasOwnProperty(n)&&(h[n]=l[n]=e[n],void 0===r[n])){if(s=void 0,g)for(o=g.length-1;0<=o;o--)if(void 0!==(a=g[o].init(this,n,s))&&(s=a),s===b.IGNORE){delete l[n],delete h[n];break}s!==b.IGNORE&&(void 0===s&&(s=c[n]),u[n]=void 0===s?null:s)}for(n in h){a=e[n];for(var m,p=d;(m=p)&&(p=m.prev);)if(p.props!==m.props){if(void 0!==p.props[n])break;p.props[n]=u[n]}}if(!1!==i&&(g=this._plugins))for(o=g.length-1;0<=o;o--)g[o].step(this,t,h);(i=this._injected)&&(this._injected=null,this._appendProps(i,t,!1))},e._injectProp=function(e,t){(this._injected||(this._injected={}))[e]=t},e._addStep=function(e,t,i,n){n=new o(this._stepTail,this.duration,e,t,i,n||!1);return this.duration+=e,this._stepTail=this._stepTail.next=n},e._addAction=function(e,t,i){i=new n(this._actionTail,this.duration,e,t,i);return this._actionTail?this._actionTail.next=i:this._actionHead=i,this._actionTail=i,this},e._set=function(e){for(var t in e)this[t]=e[t]},e._cloneProps=function(e){var t,i={};for(t in e)i[t]=e[t];return i},createjs.Tween=createjs.promote(b,"AbstractTween")}(),this.createjs=this.createjs||{},function(){function e(e){var t,i;e instanceof Array||null==e&&1<arguments.length?(t=e,i=arguments[1],e=arguments[2]):e&&(t=e.tweens,i=e.labels),this.AbstractTween_constructor(e),this.tweens=[],t&&this.addTween.apply(this,t),this.setLabels(i),this._init(e)}var t=createjs.extend(e,createjs.AbstractTween);t.addTween=function(e){e._parent&&e._parent.removeTween(e);var t=arguments.length;if(1<t){for(var i=0;i<t;i++)this.addTween(arguments[i]);return arguments[t-1]}if(0===t)return null;this.tweens.push(e),e._parent=this,e.paused=!0;var n=e.duration;return 0<e.loop&&(n*=e.loop+1),n>this.duration&&(this.duration=n),0<=this.rawPosition&&e.setPosition(this.rawPosition),e},t.removeTween=function(e){var t=arguments.length;if(1<t){for(var i=!0,n=0;n<t;n++)i=i&&this.removeTween(arguments[n]);return i}if(0===t)return!0;for(var o=this.tweens,n=o.length;n--;)if(o[n]===e)return o.splice(n,1),e._parent=null,e.duration>=this.duration&&this.updateDuration(),!0;return!1},t.updateDuration=function(){for(var e=this.duration=0,t=this.tweens.length;e<t;e++){var i=this.tweens[e],n=i.duration;0<i.loop&&(n*=i.loop+1),n>this.duration&&(this.duration=n)}},t.toString=function(){return"[Timeline]"},t.clone=function(){throw"Timeline can not be cloned."},t._updatePosition=function(e){for(var t=this.position,i=0,n=this.tweens.length;i<n;i++)this.tweens[i].setPosition(t,!0,e)},t._runActionsRange=function(e,t,i,n){for(var o=this.position,a=0,s=this.tweens.length;a<s;a++)if(this.tweens[a]._runActions(e,t,i,n),o!==this.position)return!0},createjs.Timeline=createjs.promote(e,"AbstractTween")}(),this.createjs=this.createjs||{},function(){function t(){throw"Ease cannot be instantiated."}t.none=t.linear=function(e){return e},t.get=function(t){return t<-1?t=-1:1<t&&(t=1),function(e){return 0==t?e:t<0?e*(e*-t+1+t):e*((2-e)*t+(1-t))}},t.getPowIn=function(t){return function(e){return Math.pow(e,t)}},t.getPowOut=function(t){return function(e){return 1-Math.pow(1-e,t)}},t.getPowInOut=function(t){return function(e){return(e*=2)<1?.5*Math.pow(e,t):1-.5*Math.abs(Math.pow(2-e,t))}},t.quadIn=t.getPowIn(2),t.quadOut=t.getPowOut(2),t.quadInOut=t.getPowInOut(2),t.cubicIn=t.getPowIn(3),t.cubicOut=t.getPowOut(3),t.cubicInOut=t.getPowInOut(3),t.quartIn=t.getPowIn(4),t.quartOut=t.getPowOut(4),t.quartInOut=t.getPowInOut(4),t.quintIn=t.getPowIn(5),t.quintOut=t.getPowOut(5),t.quintInOut=t.getPowInOut(5),t.sineIn=function(e){return 1-Math.cos(e*Math.PI/2)},t.sineOut=function(e){return Math.sin(e*Math.PI/2)},t.sineInOut=function(e){return-.5*(Math.cos(Math.PI*e)-1)},t.backIn=(t.getBackIn=function(t){return function(e){return e*e*((t+1)*e-t)}})(1.7),t.backOut=(t.getBackOut=function(t){return function(e){return--e*e*((t+1)*e+t)+1}})(1.7),t.backInOut=(t.getBackInOut=function(t){return t*=1.525,function(e){return(e*=2)<1?.5*e*e*((t+1)*e-t):.5*((e-=2)*e*((t+1)*e+t)+2)}})(1.7),t.circIn=function(e){return-(Math.sqrt(1-e*e)-1)},t.circOut=function(e){return Math.sqrt(1- --e*e)},t.circInOut=function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},t.bounceIn=function(e){return 1-t.bounceOut(1-e)},t.bounceOut=function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},t.bounceInOut=function(e){return e<.5?.5*t.bounceIn(2*e):.5*t.bounceOut(2*e-1)+.5},t.elasticIn=(t.getElasticIn=function(i,n){var o=2*Math.PI;return function(e){if(0==e||1==e)return e;var t=n/o*Math.asin(1/i);return-(i*Math.pow(2,10*--e)*Math.sin((e-t)*o/n))}})(1,.3),t.elasticOut=(t.getElasticOut=function(i,n){var o=2*Math.PI;return function(e){if(0==e||1==e)return e;var t=n/o*Math.asin(1/i);return i*Math.pow(2,-10*e)*Math.sin((e-t)*o/n)+1}})(1,.3),t.elasticInOut=(t.getElasticInOut=function(i,n){var o=2*Math.PI;return function(e){var t=n/o*Math.asin(1/i);return(e*=2)<1?-.5*i*Math.pow(2,10*--e)*Math.sin((e-t)*o/n):i*Math.pow(2,-10*--e)*Math.sin((e-t)*o/n)*.5+1}})(1,.3*1.5),createjs.Ease=t}(),this.createjs=this.createjs||{},function(){function e(){throw"MotionGuidePlugin cannot be instantiated."}var _=e;_.priority=0,_.ID="MotionGuide",_.install=function(){return createjs.Tween._installPlugin(e),createjs.Tween.IGNORE},_.init=function(e,t){"guide"==t&&e._addPlugin(_)},_.step=function(e,t,i){for(var n in i)if("guide"===n){var o=t.props.guide,a=_._solveGuideData(i.guide,o);o.valid=!a;var s=o.endData;if(e._injectProp("x",s.x),e._injectProp("y",s.y),a||!o.orient)break;a=void 0===t.prev.props.rotation?e.target.rotation||0:t.prev.props.rotation;if(o.startOffsetRot=a-o.startData.rotation,"fixed"==o.orient)o.endAbsRot=s.rotation+o.startOffsetRot,o.deltaRotation=0;else{var s=void 0===i.rotation?e.target.rotation||0:i.rotation,r=s-o.endData.rotation-o.startOffsetRot,c=r%360;switch(o.endAbsRot=s,o.orient){case"auto":o.deltaRotation=r;break;case"cw":o.deltaRotation=(360+c)%360+360*Math.abs(r/360|0);break;case"ccw":o.deltaRotation=(c-360)%360+-360*Math.abs(r/360|0)}}e._injectProp("rotation",o.endAbsRot)}},_.change=function(e,t,i,n,o){var a=t.props.guide;if(a&&t.props!==t.prev.props&&a!==t.prev.props.guide)return"guide"===i&&!a.valid||"x"==i||"y"==i||"rotation"===i&&a.orient?createjs.Tween.IGNORE:void _._ratioToPositionData(o,a,e.target)},_.debug=function(e,t,i){e=e.guide||e;var n=_._findPathProblems(e);if(n&&console.error("MotionGuidePlugin Error found: \n"+n),!t)return n;var o=e.path,a=o.length;for(t.save(),t.lineCap="round",t.lineJoin="miter",t.beginPath(),t.moveTo(o[0],o[1]),g=2;g<a;g+=4)t.quadraticCurveTo(o[g],o[g+1],o[g+2],o[g+3]);t.strokeStyle="black",t.lineWidth=4.5,t.stroke(),t.strokeStyle="white",t.lineWidth=3,t.stroke(),t.closePath();var s=i.length;if(i&&s){var r={},c={};_._solveGuideData(e,r);for(var g=0;g<s;g++)r.orient="fixed",_._ratioToPositionData(i[g],r,c),t.beginPath(),t.moveTo(c.x,c.y),t.lineTo(c.x+9*Math.cos(.0174533*c.rotation),c.y+9*Math.sin(.0174533*c.rotation)),t.strokeStyle="black",t.lineWidth=4.5,t.stroke(),t.strokeStyle="red",t.lineWidth=3,t.stroke(),t.closePath()}return t.restore(),n},_._solveGuideData=function(e,t){if(w=_.debug(e))return w;var i=t.path=e.path;t.orient=e.orient,t.subLines=[],t.totalLength=0,t.startOffsetRot=0,t.deltaRotation=0,t.startData={ratio:0},t.endData={ratio:1},t.animSpan=1;for(var n,o,a,s,r=i.length,c={},g=i[0],d=i[1],u=2;u<r;u+=4){n=i[u],o=i[u+1],a=i[u+2],s=i[u+3];for(var l={weightings:[],estLength:0,portion:0},h=g,m=d,p=1;p<=10;p++){_._getParamsForCurve(g,d,n,o,a,s,p/10,!1,c);var b=c.x-h,f=c.y-m,j=Math.sqrt(b*b+f*f);l.weightings.push(j),l.estLength+=j,h=c.x,m=c.y}for(t.totalLength+=l.estLength,p=0;p<10;p++)j=l.estLength,l.weightings[p]=l.weightings[p]/j;t.subLines.push(l),g=a,d=s}j=t.totalLength;var v=t.subLines.length;for(u=0;u<v;u++)t.subLines[u].portion=t.subLines[u].estLength/j;var w=isNaN(e.start)?0:e.start,e=isNaN(e.end)?1:e.end;_._ratioToPositionData(w,t,t.startData),_._ratioToPositionData(e,t,t.endData),t.startData.ratio=w,t.endData.ratio=e,t.animSpan=t.endData.ratio-t.startData.ratio},_._ratioToPositionData=function(e,t,i){for(var n,o,a,s=t.subLines,r=0,c=e*t.animSpan+t.startData.ratio,g=s.length,d=0;d<g;d++){if(c<=r+(o=s[d].portion)){a=d;break}r+=o}void 0===a&&(a=g-1,r-=o);var u=s[a].weightings,l=o;for(g=u.length,d=0;d<g&&!(c<=r+(o=u[d]*l));d++)r+=o;a=4*a+2,n=d/10+(c-r)/o*.1;var h=t.path;return _._getParamsForCurve(h[a-2],h[a-1],h[a],h[a+1],h[a+2],h[a+3],n,t.orient,i),t.orient&&(.99999<=e&&e<=1.00001&&void 0!==t.endAbsRot?i.rotation=t.endAbsRot:i.rotation+=t.startOffsetRot+e*t.deltaRotation),i},_._getParamsForCurve=function(e,t,i,n,o,a,s,r,c){var g=1-s;c.x=g*g*e+2*g*s*i+s*s*o,c.y=g*g*t+2*g*s*n+s*s*a,r&&(c.rotation=57.2957795*Math.atan2((n-t)*g+(a-n)*s,(i-e)*g+(o-i)*s))},_._findPathProblems=function(e){var t=e.path,i=t&&t.length||0;if(i<6||(i-2)%4){var n="\tCannot parse 'path' array due to invalid number of entries in path. ";return n+="There should be an odd number of points, at least 3 points, and 2 entries per point (x & y). ",(n+="See 'CanvasRenderingContext2D.quadraticCurveTo' for details as 'path' models a quadratic bezier.\n\n")+("Only [ "+i+" ] values found. Expected: "+Math.max(4*Math.ceil((i-2)/4)+2,6))}for(var o=0;o<i;o++)if(isNaN(t[o]))return"All data in path array must be numeric";n=e.start;if(isNaN(n)&&void 0!==n)return"'start' out of bounds. Expected 0 to 1, got: "+n;n=e.end;if(isNaN(n)&&void 0!==n)return"'end' out of bounds. Expected 0 to 1, got: "+n;e=e.orient;return e&&"fixed"!=e&&"auto"!=e&&"cw"!=e&&"ccw"!=e?'Invalid orientation value. Expected ["fixed", "auto", "cw", "ccw", undefined], got: '+e:void 0},createjs.MotionGuidePlugin=e}(),this.createjs=this.createjs||{},function(){var e=createjs.TweenJS=createjs.TweenJS||{};e.version="1.0.0",e.buildDate="Thu, 14 Sep 2017 19:47:47 GMT"}(),String.prototype.toHHMMSS=function(){var e=parseInt(this,10),t=Math.floor(e/3600),i=Math.floor((e-3600*t)/60),e=e-3600*t-60*i;return t<10&&(t="0"+t),i<10&&(i="0"+i),e<10&&(e="0"+e),t+":"+i+":"+e};var spritefont1={characterSet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789.,:;?!-+=~&$%()/{}[]<>^*▲▼@",xindex:8,yindex:8,imgResolution:512,img:"jfont"},spritefont2={characterSet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789.,:;?!-+=~&$%()/{}[]<>^*▲▼@",xindex:8,yindex:8,imgResolution:1024,img:"Font"},fontSmall={x:0,y:0,width:0,height:0,size:30,spacing:.6},fontMedium={x:0,y:0,width:100,height:100,size:50,spacing:.6},fontBig={x:0,y:0,width:0,height:0,size:60,spacing:.6},fontXL={x:0,y:0,width:0,height:0,size:200,spacing:.6};function randomBool(e,t){return 1==random(1,2)?e:t}function random(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function randomFloat(e,t){return parseFloat(Math.random()*(t-e)+e).toFixed(3)}