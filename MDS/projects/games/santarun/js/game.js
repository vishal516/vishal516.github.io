"use strict";var gameready=function(){var n=0,a=0,o=0,t=[];function i(e){var t;window.requestAnimationFrame(i),e=((t=e)-n)/1e3,n=t,updater(),function(e){.25<a&&(Math.round(o/a),o=a=0),a+=e,o++}(e),renderer()}console.log("assets loaded"),window.addEventListener("keydown",function(e){t[e.keyCode||e.which]=!0},!0),window.addEventListener("keyup",function(e){t[e.keyCode||e.which]=!1},!0),window.addEventListener("keyup",function(e){switch(e.keyCode){case 37:leftkey(),leftkeyPressedGUI();break;case 38:upkey();break;case 39:rightkey(),rightkeyPressedGUI();break;case 40:downkey();break;case 4:window.open(location.href,"_self").close();break;case 13:enterkeyPressedGUI(),enterkey()}},!1),uiInit(),i(0)},gameobjects={level:{speed:1,speedmax:10,speedmin:1,groundcontainer:[],housecontainer:[],enemycontainer:[],bulletcontainer:[],enemybulletcontainer:[],bombdropcontainer:[],blastcontainer:[],collectablecontainer:[],tile:{ground:{x:0,y:900,yshow:800,width:1e3,height:200,count:3},house:{x:0,y:800,width:500,height:500,count:3}}},enemy:{x:100,y:50,width:50,height:50,count:4},paralax:{x:0,y:150,width:2400,height:750,dir:-1,speed:2},defaults:{warnings:{x:600,y:500,width:600,height:100},scoreunit:20,disableInput:!1,duration:5e3,durationmin:0,durationmax:5e3,time:5,stopwatch:null,playerHealth:5,healthpickup:2,ammo:40,ammopickup:5},player:{x:300,y:750,width:200,height:350,level:1,score:0,highscore:0,lastscore:0,time:0,health:10,ammo:10,speed:2,gravity:.5,jump:{state:!1,height:9,speedfactor:10},shoot:{state:!1,time:9},animationframe:0,framelength:19,tilex:5e3/19,tiley:271,imgpos:{x:40,y:30,width:100,height:60}},background:{x:0,y:0,width:1600,height:1e3,layer2:{x:0,y:200,width:1600,height:500},layer3:{x:0,y:200,width:1600,height:900}},gamestate:"",states:{loading:"loading",home:"home",play:"play",pause:"pause",overpass:"overpass",overfail:"overfail",info:"info"},images:["images/background.jpg","images/cloud.png","images/Font.png","images/jfont.png","images/gamelogo.png","images/BtnInfoOn.png","images/BtnPlayOn.png","images/BtnSoundOn.png","images/BtnSoundOff.png","images/BtnRestartOn.png","images/BtnExitOn.png","images/Button.png","images/road.png","images/fog.png","images/bg3.png","images/bg2.png","images/house/house10.png","images/house/house20.png","images/house/house30.png","images/house/house40.png","images/house/house50.png","images/house/house11.png","images/house/house21.png","images/house/house31.png","images/house/house41.png","images/house/house51.png","images/Player/santaspritesheet.png","images/Player/santashootss.png","images/Player/santajump.png","images/enemies/deerss.png","images/enemies/snowmanss.png","images/enemies/cookiess.png","images/enemies/elfss.png","images/enemies/bomb.png","images/enemies/smoke.png","images/enemies/cart.png","images/enemies/cart2.png","images/snowball.png","images/ammopickup.png","images/healthpickup.png"],sounds:["media/Button.m4a","media/gamemusic.ogg","media/gameover.ogg","media/ammo.ogg","media/life.ogg","media/jump.ogg","media/shot.ogg","media/hit.ogg","media/hit2.ogg"]},GUI={canvas:{x:0,y:0,width:1600,height:1e3},gamelogo:{x:400,y:150,width:950,height:300},playMenu:{x:0,y:500,width:400,height:400},pauseMenu:{x:0,y:500,width:400,height:400},btnPlay:{x:50,y:50,width:150,height:150},btnSound:{x:50,y:50,width:150,height:150},btnInfo:{x:50,y:50,width:150,height:150},btnCommon:{x:50,y:50,width:150,height:150},levelup:{x:350,y:1100,width:900,height:400},decoration:{bubbles:[],bubblesLength:10},pointerPadding:40},img=loadImages(gameobjects.images),sound=loadSound(gameobjects.sounds),homeScreenButtonList=[img.BtnPlayOn,img.BtnInfoOn,img.BtnSoundOn],pauseScreenButtonList=[img.BtnPlayOn,img.BtnRestartOn,img.BtnExitOn,img.BtnSoundOn],homeScreenPointerPos=0,pauseScreenPointerPos=0,globalsound=!0,loadcount=0,loadtotal=0,preloaded=!1;function loadImages(t){preloaded=!1;for(var e=[],n={},a=0;a<t.length;a++){var o=new Image;o.src=t[a],o.onload=function(e){(loadcount+=1)==t.length&&(preloaded=!0)},n[(e[a]=o).src.split("/")[o.src.split("/").length-1].split(".")[0]]=o}return n}function loadSound(e){for(var t=[],n={},a=0;a<e.length;a++){var o=new Audio(e[a]);n[(t[a]=o).src.split("/")[o.src.split("/").length-1].split(".")[0]]=o}return n}function handleGlobalSound(){(globalsound=!globalsound)?sound.gamemusic.play():(sound.gamemusic.pause(),sound.gamemusic.currentTime=0),Object.keys(sound).forEach(function(e){sound[e].volume=globalsound?1:0})}function raindrop(){this.x=random(GUI.canvas.width+100,GUI.canvas.width+1100),this.y=randomFloat(0,GUI.canvas.height/4),this.size=random(100,200),this.width=this.size,this.height=2*this.size/3,this.image=img.cloud;createjs.Tween.get(this).wait(random(0,9e3)).play(createjs.Tween.get(this,{paused:!0,loop:!0}).to({x:-300},5e3).to({x:GUI.canvas.width+100},0))}function raindropeffect(){for(var e=0;e<GUI.decoration.bubblesLength;e++)GUI.decoration.bubbles.push(new raindrop)}function houseConstructor(){this.x=500,this.type=random(1,5);var e=this;this.width=1==e.type?400:2==e.type?800:3==e.type?920:4==e.type?600:5==e.type?480:void 0,this.height=1==e.type?400:2==e.type?800:3==e.type?920:4==e.type?600:5==e.type?640:void 0,this.img=img["house"+this.type+random(0,1)],this.y=gameobjects.level.tile.ground.yshow-this.height}function enemyConstructor(){this.type=random(2,6),this.damageplayer=!0,this.damageble=!0;var e=this;this.width=1==e.type?250:2==e.type?120:3==e.type||4==e.type||5==e.type?200:6==e.type?250:void 0,this.height=1==e.type?140:2==e.type?200:3==e.type||4==e.type||5==e.type?300:6==e.type?350:void 0,this.img=1==e.type?["death"]:2==e.type?(e.damageble=!1,{img:["cart","cart2"][random(0,1)],animationframe:0,totalframes:1,tilex:496,tiley:420,x:0,y:30,width:100,height:50}):3==e.type?{img:"snowmanss",animationframe:0,totalframes:22,tilex:4999/22,tiley:253,x:50,y:30,width:70,height:50}:4==e.type?{img:"cookiess",animationframe:0,totalframes:22,tilex:4999/22,tiley:269,x:50,y:30,width:70,height:50}:5==e.type?{img:"elfss",animationframe:0,totalframes:22,tilex:4999/22,tiley:272,x:50,y:30,width:70,height:50}:6==e.type?{img:"deerss",animationframe:0,totalframes:22,tilex:4999/22,tiley:212,x:250,y:80,width:350,height:100}:void 0,this.x=function(){for(var e=0,t=0;t<gameobjects.level.enemycontainer.length;t++){var n=gameobjects.level.enemycontainer[t].x+gameobjects.level.enemycontainer[t].width;e<n&&(e=n)}return e}()+random(GUI.canvas.width/2,GUI.canvas.width),this.y=1==e.type||2==e.type||3==e.type||4==e.type||5==e.type||6==e.type?gameobjects.level.tile.ground.y-e.height:void 0,gameobjects.level.tile.ground.y,this.height,this.speed=1==e.type||2==e.type||3==e.type?0:4==e.type||5==e.type||6==e.type?2:void 0,this.health=1==e.type||2==e.type||3==e.type||4==e.type||5==e.type||6==e.type?0:void 0,this.attacktime=1==e.type||2==e.type?1e3:3==e.type?220:4==e.type||5==e.type||6==e.type?1e3:void 0,this.attacktimeinitial=1==e.type||2==e.type?1e3:3==e.type?440:4==e.type||5==e.type||6==e.type?1e3:void 0,this.fly=-1==e.type}function bulletConstructor(e,t){this.y=e.y+.4*e.height,this.width=70,this.height=70,this.dir=t*(gameobjects.player.speed+gameobjects.player.level),sound.shot.play(),t<0&&(this.x=e.x+t*e.width/2),0<t&&(this.x=e.x+t*e.width)}function bombdropConstructor(e){this.x=e.x+e.width/2,this.y=e.y+e.height,this.width=50,this.height=50,sound.crow.play()}function blastConstructor(e){var t=1.5*e.height;this.x=e.x,this.y=gameobjects.level.tile.ground.y-t,this.width=t,this.height=t,this.frame=1,this.framemax=10,this.tilex=421,this.tiley=410,sound.hit.play()}function collectableConstructor(e,t){this.x=e.x,this.y=gameobjects.level.tile.ground.y-130,this.height=130,this.width=130,this.type=t,this.img=null;var n=this;1==this.type&&(this.img=img.ammopickup),2==this.type&&(this.img=img.healthpickup),this.collect=function(){1==n.type&&(gameobjects.player.ammo+=10,sound.ammo.play()),2==n.type&&(gameobjects.player.health+=gameobjects.defaults.healthpickup,sound.life.play())}}function updater(){gameobjects.gamestate==gameobjects.states.play&&updatelogic()}function renderer(){renderUI()}function leftkey(){}function rightkey(){gameobjects.gamestate==gameobjects.states.play&&firebullet()}function downkey(){gameobjects.gamestate,gameobjects.states.play}function upkey(){gameobjects.gamestate==gameobjects.states.play&&jump()}function enterkey(){}function spacekeyDebug(){gameobjects.player.level+=1}function reset(){gameobjects.player.score=0,gameobjects.player.level=10,gameobjects.player.ammo=gameobjects.defaults.ammo,gameobjects.level.blastcontainer=[],gameobjects.level.bombdropcontainer=[],gameobjects.level.bulletcontainer=[],gameobjects.level.enemycontainer=[],gameobjects.level.collectablecontainer=[],gameobjects.level.enemycontainer=[],gameobjects.player.health=gameobjects.defaults.playerHealth}function playerdamage(){1<gameobjects.player.health?(--gameobjects.player.health,sound.hit2.play()):gameover()}function startgame(){gameobjects.gamestate=gameobjects.states.play}function gameover(){gameobjects.gamestate=gameobjects.states.overfail,sound.gameover.play(),scoremanager()}function startnewgame(){reset(),startgame()}function scoremanager(){gameobjects.player.lastscore=gameobjects.player.score,gameobjects.player.highscore<gameobjects.player.score&&(gameobjects.player.highscore=gameobjects.player.score)}function addscore(){gameobjects.player.score+=gameobjects.defaults.scoreunit,gameobjects.player.level<20&&(gameobjects.player.level+=.1)}function startlogic(){!function(){for(var e=0;e<gameobjects.level.tile.ground.count;e++){var t=Object.create(gameobjects.level.tile.ground);t.x=gameobjects.level.tile.ground.width*e,gameobjects.level.groundcontainer.push(t)}}(),function(){for(var e=0;e<gameobjects.level.tile.house.count;e++){var t=new houseConstructor;t.x=0<e?900*e:0,gameobjects.level.housecontainer.push(t)}}()}function updatelogic(){var e,c=gameobjects.player.speed+gameobjects.player.level;gameobjects.background.layer3.x>-1600+c?gameobjects.background.layer3.x-=c:gameobjects.background.layer3.x=0,e=gameobjects.level.tile.ground.y-gameobjects.player.height,gameobjects.player.jump.state&&(gameobjects.player.y-=gameobjects.player.jump.speedfactor*Math.abs(gameobjects.player.jump.speedfactor),gameobjects.player.jump.speedfactor-=gameobjects.player.gravity,gameobjects.player.y+gameobjects.player.height>=gameobjects.level.tile.ground.y&&(gameobjects.player.jump.state=!1)),gameobjects.player.y>e&&(gameobjects.player.y=e),function(){for(var e,t=gameobjects.level.groundcontainer.length,n=0;n<t;n++)gameobjects.level.groundcontainer[n].x<-gameobjects.level.tile.ground.width&&(e=gameobjects.level.groundcontainer[n],gameobjects.level.groundcontainer.splice(n,1),gameobjects.level.groundcontainer.push(e),gameobjects.level.groundcontainer[t-1].x=gameobjects.level.groundcontainer[t-2].x+gameobjects.level.tile.ground.width);for(var a=0;a<gameobjects.level.tile.ground.count;a++)gameobjects.level.groundcontainer[a].x-=c}(),function(){for(var e,t=gameobjects.level.housecontainer.length,n=0;n<t;n++)gameobjects.level.housecontainer[n].x<-900&&(e=new houseConstructor,gameobjects.level.housecontainer.splice(n,1),gameobjects.level.housecontainer.push(e),e.x=gameobjects.level.housecontainer[gameobjects.level.housecontainer.length-2].x+1e3,collectale(e));for(var a=0;a<t;a++)gameobjects.level.housecontainer[a].x-=c}(),function(){enemeyGenerator();for(var e=0;e<gameobjects.level.enemycontainer.length;e++)gameobjects.level.enemycontainer[e].x<-300?gameobjects.level.enemycontainer.splice(e,1):checkIntersection(gameobjects.player,gameobjects.level.enemycontainer[e])&&(gameobjects.level.enemycontainer[e].fly||gameobjects.level.blastcontainer.push(new blastConstructor(gameobjects.level.enemycontainer[e])),gameobjects.level.enemycontainer.splice(e,1),playerdamage());for(var t=0;t<gameobjects.level.enemycontainer.length;t++){gameobjects.level.enemycontainer[t].x-=gameobjects.level.enemycontainer[t].speed+c;var n=gameobjects.level.enemycontainer[t];3==n.type&&19==n.img.animationframe&&n.x<GUI.canvas.width&&gameobjects.level.enemybulletcontainer.push(new bulletConstructor(n,-2))}}(),function(){for(var e=0;e<gameobjects.level.bulletcontainer.length;e++){if(gameobjects.level.bulletcontainer[e].x+=gameobjects.level.bulletcontainer[e].dir,gameobjects.level.bulletcontainer[e].x>GUI.canvas.width+100)return gameobjects.level.bulletcontainer.splice(e,1);for(var t=0;t<gameobjects.level.enemycontainer.length;t++)if(gameobjects.level.enemycontainer[t].damageble&&checkIntersection(gameobjects.level.bulletcontainer[e],gameobjects.level.enemycontainer[t])){addscore(),gameobjects.level.enemycontainer[e].fly||gameobjects.level.blastcontainer.push(new blastConstructor(gameobjects.level.enemycontainer[t])),gameobjects.level.bulletcontainer.splice(e,1),gameobjects.level.enemycontainer[t].health<1?(1==random(1,5)&&collectale(gameobjects.level.enemycontainer[t]),gameobjects.level.enemycontainer.splice(t,1)):--gameobjects.level.enemycontainer[t].health;break}}for(var n=0;n<gameobjects.level.enemybulletcontainer.length;n++)gameobjects.level.enemybulletcontainer[n].x+=gameobjects.level.enemybulletcontainer[n].dir,checkIntersection(gameobjects.level.enemybulletcontainer[n],gameobjects.player)&&(gameobjects.level.enemybulletcontainer.splice(n,1),playerdamage(),gameobjects.level.blastcontainer.push(new blastConstructor(gameobjects.player)));for(var a,o=0;o<gameobjects.level.bombdropcontainer.length;o++)(s=gameobjects.level.bombdropcontainer[o]).y>gameobjects.level.tile.ground.y-s.height?(a={x:s.x-150,y:s.y,width:300,height:300},gameobjects.level.blastcontainer.push(new blastConstructor(a)),gameobjects.level.bombdropcontainer.splice(o,1)):checkIntersection(s,gameobjects.player)?(a={x:s.x-150,y:s.y,width:200,height:200},gameobjects.level.blastcontainer.push(new blastConstructor(a)),gameobjects.level.bombdropcontainer.splice(o,1),playerdamage()):(gameobjects.level.bombdropcontainer[o].x-=c,gameobjects.level.bombdropcontainer[o].y+=.8*c);for(var i=0;i<gameobjects.level.blastcontainer.length;i++)gameobjects.level.blastcontainer[i].x-=c;for(var s,r=0;r<gameobjects.level.collectablecontainer.length;r++)(s=gameobjects.level.collectablecontainer[r]).x>-s.width&&(s.x-=c),checkIntersection(s,gameobjects.player)&&(s.collect(),gameobjects.level.collectablecontainer.splice(r,1))}()}function enemeyGenerator(){for(var e=0;e<gameobjects.enemy.count;e++)gameobjects.level.enemycontainer[e]||(gameobjects.level.enemycontainer[e]=new enemyConstructor)}function firebullet(){0<gameobjects.player.ammo&&(gameobjects.player.shoot.state=!0,gameobjects.player.animationframe=10,setTimeout(function(){gameobjects.level.bulletcontainer.push(new bulletConstructor(gameobjects.player,1))},200),--gameobjects.player.ammo)}function jump(){gameobjects.player.jump.state||(gameobjects.player.jump.state=!0,gameobjects.player.jump.speedfactor=gameobjects.player.jump.height,sound.jump.play())}function enemyattack(e){e.attacktime=e.attacktimeinitial,e.x<GUI.canvas.width&&(3==e.type&&gameobjects.level.enemybulletcontainer.push(new bulletConstructor(e,-2)),-2==e.type&&gameobjects.level.bombdropcontainer.push(new bombdropConstructor(e,1)))}function collectale(e){var t=random(1,10);2==t&&gameobjects.player.health<2*gameobjects.defaults.playerHealth-gameobjects.defaults.healthpickup&&gameobjects.level.collectablecontainer.push(new collectableConstructor(e,2)),1==t&&gameobjects.player.ammo<2*gameobjects.defaults.ammo-gameobjects.defaults.ammopickup&&gameobjects.level.collectablecontainer.push(new collectableConstructor(e,1))}function renderGame(){for(var e=0;e<gameobjects.level.groundcontainer.length;e++){var t=gameobjects.level.groundcontainer[e];context.drawImage(img.road,t.x,t.yshow,t.width,t.height)}for(var n=0;n<gameobjects.level.housecontainer.length;n++){t=gameobjects.level.housecontainer[n];context.drawImage(t.img,t.x,t.y,t.width,t.height)}context.drawImage(img.fog,gameobjects.background.layer3.x,gameobjects.background.y,gameobjects.background.layer3.width,gameobjects.background.height),context.drawImage(img.fog,gameobjects.background.layer3.x+gameobjects.background.layer3.width,gameobjects.background.y,gameobjects.background.layer3.width,gameobjects.background.height),function(){gameobjects.player.animationframe+=.5,gameobjects.player.animationframe>gameobjects.player.framelength-1&&(gameobjects.player.animationframe=0);var e=Math.floor(gameobjects.player.animationframe);1==gameobjects.player.shoot.state?(context.drawImage(img.santashootss,gameobjects.player.tilex*e,0,gameobjects.player.tilex,gameobjects.player.tiley,gameobjects.player.x-gameobjects.player.imgpos.x,gameobjects.player.y-gameobjects.player.imgpos.y,gameobjects.player.width+gameobjects.player.imgpos.width,gameobjects.player.height+gameobjects.player.imgpos.height),16<gameobjects.player.animationframe&&(gameobjects.player.shoot.state=!1)):gameobjects.player.jump.state?context.drawImage(img.santajump,gameobjects.player.x-gameobjects.player.imgpos.x,gameobjects.player.y,gameobjects.player.width+gameobjects.player.imgpos.width,gameobjects.player.height+gameobjects.player.imgpos.height):context.drawImage(img.santaspritesheet,gameobjects.player.tilex*e,0,gameobjects.player.tilex,gameobjects.player.tiley,gameobjects.player.x-gameobjects.player.imgpos.x,gameobjects.player.y-gameobjects.player.imgpos.y,gameobjects.player.width+gameobjects.player.imgpos.width,gameobjects.player.height+gameobjects.player.imgpos.height)}();for(var a=0;a<gameobjects.level.enemycontainer.length;a++){(t=gameobjects.level.enemycontainer[a]).img.animationframe+=.5,t.img.animationframe>=t.img.totalframes-1&&(t.img.animationframe=0);var o=Math.floor(t.img.animationframe),i=img[t.img.img];context.drawImage(i,t.img.tilex*o,0,t.img.tilex,t.img.tiley,t.x-t.img.x,t.y-t.img.y,t.width+t.img.width,t.height+t.img.height)}for(var s=0;s<gameobjects.level.bulletcontainer.length;s++){t=gameobjects.level.bulletcontainer[s];context.drawImage(img.snowball,t.x,t.y,t.width,t.height)}for(var r=0;r<gameobjects.level.enemybulletcontainer.length;r++){t=gameobjects.level.enemybulletcontainer[r];context.drawImage(img.snowball,t.x,t.y,t.width,t.height)}for(var c=0;c<gameobjects.level.bombdropcontainer.length;c++){t=gameobjects.level.bombdropcontainer[c];context.drawImage(img.bomb,t.x,t.y,t.width,t.height)}for(var l=0;l<gameobjects.level.blastcontainer.length;l++){t=gameobjects.level.blastcontainer[l];context.drawImage(img.smoke,t.tilex*Math.floor(t.frame),0,t.tilex,t.tiley,t.x,t.y,t.width,t.height),t.frame<=t.framemax?gameobjects.level.blastcontainer[l].frame+=.5:gameobjects.level.blastcontainer.splice(l,1)}for(var g=0;g<gameobjects.level.collectablecontainer.length;g++){t=gameobjects.level.collectablecontainer[g];context.drawImage(t.img,t.x,t.y,t.width,t.height)}}var spacing=.5;function renderUI(){gameobjects.background.x>-gameobjects.background.width?gameobjects.background.x-=gameobjects.paralax.speed:gameobjects.background.x+=gameobjects.background.width,gameobjects.background.layer2.x>-gameobjects.background.layer2.width?gameobjects.background.layer2.x-=gameobjects.paralax.speed:gameobjects.background.layer2.x+=gameobjects.background.layer2.width,context.drawImage(img.background,gameobjects.background.x,gameobjects.background.y,gameobjects.background.width,gameobjects.background.height),context.drawImage(img.background,gameobjects.background.x+gameobjects.background.width,gameobjects.background.y,gameobjects.background.width,gameobjects.background.height),context.drawImage(img.bg2,gameobjects.background.layer2.x,gameobjects.background.layer2.y,gameobjects.background.layer2.width,gameobjects.background.layer2.height),context.drawImage(img.bg2,gameobjects.background.layer2.x+gameobjects.background.layer2.width,gameobjects.background.layer2.y,gameobjects.background.layer2.width,gameobjects.background.layer2.height),context.drawImage(img.bg3,gameobjects.background.layer3.x,gameobjects.background.layer3.y,gameobjects.background.layer3.width,gameobjects.background.layer3.height),context.drawImage(img.bg3,gameobjects.background.layer3.x+gameobjects.background.layer3.width,gameobjects.background.layer3.y,gameobjects.background.layer3.width,gameobjects.background.layer3.height);for(var e=GUI.decoration.bubbles,t=0;t<e.length;t++)context.drawImage(e[t].image,e[t].x,e[t].y,e[t].width,e[t].height);if(gameobjects.gamestate==gameobjects.states.loading)spritefont(spritefont2,"LOADING IS COMPLETE",60,spacing,780,400,!0),spritefont(spritefont2,"PRESS OK BUTTON",80,spacing,780,500,!0);else if(gameobjects.gamestate==gameobjects.states.home){spritefont(spritefont2,"SANTA",GUI.gamelogo.height,spacing,800,GUI.gamelogo.y-100,!0),spritefont(spritefont2,"RUN",GUI.gamelogo.height-50,spacing,800,GUI.gamelogo.y+100,!0),context.drawImage(img.Button,GUI.playMenu.x-GUI.pointerPadding/2+GUI.btnCommon.x+200*homeScreenPointerPos,GUI.playMenu.y-GUI.pointerPadding/2+GUI.btnPlay.y,GUI.btnCommon.width+GUI.pointerPadding,GUI.btnCommon.height+GUI.pointerPadding);for(t=0;t<homeScreenButtonList.length;t++)context.drawImage(homeScreenButtonList[t],GUI.playMenu.x+GUI.btnCommon.x+200*t,GUI.playMenu.y+GUI.btnCommon.y,GUI.btnCommon.width,GUI.btnCommon.height)}else if(gameobjects.gamestate==gameobjects.states.pause){renderGame(),spritefont(spritefont2,"PAUSED",200,spacing,800,100,!0),context.drawImage(img.Button,GUI.pauseMenu.x-GUI.pointerPadding/2+GUI.btnCommon.x+200*pauseScreenPointerPos,GUI.pauseMenu.y-GUI.pointerPadding/2+GUI.btnPlay.y,GUI.btnCommon.width+GUI.pointerPadding,GUI.btnCommon.height+GUI.pointerPadding);for(t=0;t<pauseScreenButtonList.length;t++)context.drawImage(pauseScreenButtonList[t],GUI.pauseMenu.x+GUI.btnCommon.x+200*t,GUI.pauseMenu.y+GUI.btnCommon.y,GUI.btnCommon.width,GUI.btnCommon.height)}else gameobjects.gamestate==gameobjects.states.play?(renderGame(),spritefont(spritefont2,"SCORE:"+gameobjects.player.score+"  ICE:"+gameobjects.player.ammo+"  HEALTH:"+gameobjects.player.health,60,spacing,800,100,!0)):gameobjects.gamestate==gameobjects.states.overfail?(spritefont(spritefont2,"GAME OVER",200,spacing,800,100,!0),spritefont(spritefont2,"HIGH SCORE:"+gameobjects.player.highscore,60,spacing,800,300,!0),spritefont(spritefont2,"YOUR SCORE:"+gameobjects.player.lastscore,60,spacing,800,400,!0),spritefont(spritefont2,"PRESS OK BUTTON TO GO BACK TO MAIN MENU",40,spacing,800,800,!0)):gameobjects.gamestate==gameobjects.states.info&&(spritefont(spritefont2,"CONTROLS",100,spacing,800,50,!0),spritefont(spritefont2,"PRESS UP BUTTON TO JUMP",60,spacing,800,150,!0),spritefont(spritefont2,"PRESS RIGHT BUTTON TO SHOOT",60,spacing,800,200,!0),spritefont(spritefont2,"PRESS OK BUTTON TO PAUSE/RESUME THE GAME",60,spacing,800,250,!0),spritefont(spritefont2,"HOW TO PLAY",100,spacing,800,350,!0),spritefont(spritefont2,"JUMP OVER TO AVOID OBSTACLES         ",60,spacing,800,450,!0),context.drawImage(img.cart,1100,430,100,100),context.drawImage(img.cart2,1250,430,100,100),spritefont(spritefont2,"SHOOT ICE OR DODGE ENEMIES                       ",60,spacing,800,560,!0),context.drawImage(img.snowmanss,0,0,200,150,820,530,100,100),context.drawImage(img.elfss,0,0,200,120,930,530,100,100),context.drawImage(img.deerss,0,0,200,120,990,530,150,100),context.drawImage(img.cookiess,0,0,200,120,1100,530,150,100),spritefont(spritefont2,"PICK COLLECTABLES       TO GAIN ICE AND HEALTH",60,spacing,800,670,!0),context.drawImage(img.ammopickup,660,660,70,70),context.drawImage(img.healthpickup,740,660,70,70),spritefont(spritefont2,"PRESS OK BUTTON TO GO BACK TO MAIN MENU",40,spacing,800,800,!0))}var canvas,context,lastgamestate="home";function Canvas2D(){canvas=document.getElementById("viewport"),context=canvas.getContext("2d")}window.addEventListener("blur",function(){lastgamestate=gameobjects.gamestate,gameobjects.gamestate=gameobjects.states.pause,sound.gamemusic.pause()}),window.addEventListener("focus",function(){gameobjects.gamestate=lastgamestate,sound.gamemusic.play()}),window.onload=function(){resizeCanvas(),setTimeout(function(){canvas.style.display="block",document.getElementById("loader").style.display="none",gameready()},2e3)},window.onresize=function(){resizeCanvas()},Canvas2D();var level={x:1,y:65,width:canvas.width-2,height:canvas.height-66};function resizeCanvas(){canvas.style.height=window.innerHeight+"px",canvas.style.width=window.innerWidth+"px"}var canvas2d=new Canvas2D;function resizeCanvasKeepAR(){widthToHeight=window.innerWidth/window.innerHeight,widthToHeightIdeal=1.6,state=widthToHeight>widthToHeightIdeal?"wider":"higher",widthToHeight>widthToHeightIdeal?(canvas.style.height=window.innerHeight+"px",canvas.style.width=window.innerHeight*widthToHeightIdeal+"px",canvas.style.marginLeft=(window.innerWidth-window.innerHeight*widthToHeightIdeal)/2+"px",canvas.style.marginTop="0px"):(canvas.style.width=window.innerWidth+"px",canvas.style.height=window.innerWidth/widthToHeightIdeal+"px",canvas.style.marginTop=(window.innerHeight-window.innerWidth/widthToHeightIdeal)/2+"px",canvas.style.marginLeft="0px")}function uiInit(){gameobjects.gamestate=gameobjects.states.loading,createHomeMenu(),raindropeffect(),startlogic()}function createHomeMenu(){createjs.Tween.get(GUI.gamelogo).play(createjs.Tween.get(GUI.gamelogo,{paused:!0,loop:!0}).to({width:GUI.gamelogo.width+20,height:GUI.gamelogo.height+20},500,createjs.Ease.quadOut).to({width:GUI.gamelogo.width,height:GUI.gamelogo.height},500,createjs.Ease.quadOut)),createjs.Tween.get(GUI.gamelogo).play(createjs.Tween.get(GUI.gamelogo,{paused:!0,loop:!0}).to({x:GUI.gamelogo.x-10},500,createjs.Ease.quadOut).to({x:GUI.gamelogo.x},500,createjs.Ease.quadOut)),GUI.playMenu.width=GUI.btnCommon.width*(homeScreenButtonList.length+1),GUI.playMenu.x=(canvas.width-GUI.playMenu.width)/2-8*homeScreenButtonList.length,GUI.pauseMenu.width=GUI.btnCommon.width*(pauseScreenButtonList.length+1),GUI.pauseMenu.x=(canvas.width-GUI.pauseMenu.width)/2-8*pauseScreenButtonList.length,createjs.Tween.get(GUI.btnCommon).play(createjs.Tween.get(GUI.btnCommon,{paused:!0,loop:!0}).to({height:GUI.btnCommon.height+5},500,createjs.Ease.quadOut).to({height:GUI.btnCommon.height},500,createjs.Ease.quadOut)),GUI.levelup.y=-400}function leftkeyPressedGUI(){gameobjects.gamestate==gameobjects.states.home&&(homeScreenPointerPos=movePointer(homeScreenPointerPos,homeScreenButtonList,!1)),gameobjects.gamestate==gameobjects.states.pause&&(pauseScreenPointerPos=movePointer(pauseScreenPointerPos,pauseScreenButtonList,!1))}function rightkeyPressedGUI(){gameobjects.gamestate==gameobjects.states.home&&(homeScreenPointerPos=movePointer(homeScreenPointerPos,homeScreenButtonList,!0)),gameobjects.gamestate==gameobjects.states.pause&&(pauseScreenPointerPos=movePointer(pauseScreenPointerPos,pauseScreenButtonList,!0))}function enterkeyPressedGUI(){sound.Button.play(),gameobjects.gamestate==gameobjects.states.loading&&(setTimeout(function(){gameobjects.gamestate=gameobjects.states.home},10),GUI.loading=!1,sound.gamemusic.loop=!0,sound.gamemusic.play()),gameobjects.gamestate==gameobjects.states.home?(0==homeScreenPointerPos&&(gameobjects.gamestate=gameobjects.states.play,startnewgame()),1==homeScreenPointerPos&&(gameobjects.gamestate=gameobjects.states.info,console.log("info")),2==homeScreenPointerPos&&(console.log("audio"),handleGlobalSound(),homeScreenButtonList[2]=globalsound?img.BtnSoundOn:img.BtnSoundOff,pauseScreenButtonList[3]=globalsound?img.BtnSoundOn:img.BtnSoundOff)):gameobjects.gamestate==gameobjects.states.info?gameobjects.gamestate=gameobjects.states.home:gameobjects.gamestate==gameobjects.states.play?(gameobjects.gamestate=gameobjects.states.pause,console.log("paused")):gameobjects.gamestate==gameobjects.states.pause?(0==pauseScreenPointerPos&&(gameobjects.gamestate=gameobjects.states.play),1==pauseScreenPointerPos&&(startnewgame(),gameobjects.gamestate=gameobjects.states.play),2==pauseScreenPointerPos&&(gameobjects.gamestate=gameobjects.states.home),3==pauseScreenPointerPos&&(console.log("audio"),handleGlobalSound(),homeScreenButtonList[2]=globalsound?img.BtnSoundOn:img.BtnSoundOff,pauseScreenButtonList[3]=globalsound?img.BtnSoundOn:img.BtnSoundOff)):gameobjects.gamestate==gameobjects.states.overpass?gameobjects.gamestate=gameobjects.states.play:gameobjects.gamestate==gameobjects.states.overfail&&(gameobjects.gamestate=gameobjects.states.home)}function downkeyPressedGUI(){}function upkeyPressedGUI(){}function movePointer(e,t,n){return n?e+1>=t.length?0:e+1:e-1<0?t.length-1:e-1}function characterIndex(e,t){for(var n=0;n<t.xindex;n++)for(var a=0;a<t.yindex;a++){var o=t.characterSet[a*t.xindex+n];if(t.lowercase){if(e==o)return{i:n,j:a}}else if(e.toLowerCase()==o.toLowerCase())return{i:n,j:a}}}function spritefont(e,t,n,a,o,i,s){s&&(o-=(t.length+1)*n*a/2);for(var r,c,l=e.imgResolutionx/e.xindex,g=e.imgResolutiony/e.yindex,u=0;u<t.length;u++)" "!=t[u]&&(r=characterIndex(t[u],e).i,c=characterIndex(t[u],e).j,context.drawImage(img[e.img],l*r,g*c,l,g,o+n*a*u,i,n,n))}this.createjs=this.createjs||{},createjs.extend=function(e,t){function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n},this.createjs=this.createjs||{},createjs.promote=function(e,t){var n=e.prototype,a=Object.getPrototypeOf&&Object.getPrototypeOf(n)||n.__proto__;if(a)for(var o in n[(t+="_")+"constructor"]=a.constructor,a)n.hasOwnProperty(o)&&"function"==typeof a[o]&&(n[t+o]=a[o]);return e},this.createjs=this.createjs||{},createjs.deprecate=function(t,n){return function(){var e="Deprecated property or method '"+n+"'. See docs for info.";return console&&(console.warn?console.warn(e):console.log(e)),t&&t.apply(this,arguments)}},this.createjs=this.createjs||{},function(){function e(e,t,n){this.type=e,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!t,this.cancelable=!!n,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var t=e.prototype;t.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},t.stopPropagation=function(){this.propagationStopped=!0},t.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},t.remove=function(){this.removed=!0},t.clone=function(){return new e(this.type,this.bubbles,this.cancelable)},t.set=function(e){for(var t in e)this[t]=e[t];return this},t.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=e}(),this.createjs=this.createjs||{},function(){function e(){this._listeners=null,this._captureListeners=null}var t=e.prototype;e.initialize=function(e){e.addEventListener=t.addEventListener,e.on=t.on,e.removeEventListener=e.off=t.removeEventListener,e.removeAllEventListeners=t.removeAllEventListeners,e.hasEventListener=t.hasEventListener,e.dispatchEvent=t.dispatchEvent,e._dispatchEvent=t._dispatchEvent,e.willTrigger=t.willTrigger},t.addEventListener=function(e,t,n){var a=n?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{},o=a[e];return o&&this.removeEventListener(e,t,n),(o=a[e])?o.push(t):a[e]=[t],t},t.on=function(e,t,n,a,o,i){return t.handleEvent&&(n=n||t,t=t.handleEvent),n=n||this,this.addEventListener(e,function(e){t.call(n,e,o),a&&e.remove()},i)},t.removeEventListener=function(e,t,n){var a=n?this._captureListeners:this._listeners;if(a){var o=a[e];if(o)for(var i=0,s=o.length;i<s;i++)if(o[i]==t){1==s?delete a[e]:o.splice(i,1);break}}},t.off=t.removeEventListener,t.removeAllEventListeners=function(e){e?(this._listeners&&delete this._listeners[e],this._captureListeners&&delete this._captureListeners[e]):this._listeners=this._captureListeners=null},t.dispatchEvent=function(e,t,n){if("string"==typeof e){var a=this._listeners;if(!(t||a&&a[e]))return!0;e=new createjs.Event(e,t,n)}else e.target&&e.clone&&(e=e.clone());try{e.target=this}catch(e){}if(e.bubbles&&this.parent){for(var o=this,i=[o];o.parent;)i.push(o=o.parent);for(var s=i.length,r=s-1;0<=r&&!e.propagationStopped;r--)i[r]._dispatchEvent(e,1+(0==r));for(r=1;r<s&&!e.propagationStopped;r++)i[r]._dispatchEvent(e,3)}else this._dispatchEvent(e,2);return!e.defaultPrevented},t.hasEventListener=function(e){var t=this._listeners,n=this._captureListeners;return!!(t&&t[e]||n&&n[e])},t.willTrigger=function(e){for(var t=this;t;){if(t.hasEventListener(e))return!0;t=t.parent}return!1},t.toString=function(){return"[EventDispatcher]"},t._dispatchEvent=function(e,t){var n,a,o=t<=2?this._captureListeners:this._listeners;if(e&&o&&(a=o[e.type])&&(n=a.length)){try{e.currentTarget=this}catch(e){}try{e.eventPhase=0|t}catch(e){}e.removed=!1,a=a.slice();for(var i=0;i<n&&!e.immediatePropagationStopped;i++){var s=a[i];s.handleEvent?s.handleEvent(e):s(e),e.removed&&(this.off(e.type,s,1==t),e.removed=!1)}}2===t&&this._dispatchEvent(e,2.1)},createjs.EventDispatcher=e}(),this.createjs=this.createjs||{},function(){function i(){throw"Ticker cannot be instantiated."}i.RAF_SYNCHED="synched",i.RAF="raf",i.TIMEOUT="timeout",i.timingMode=null,i.maxDelta=0,i.paused=!1,i.removeEventListener=null,i.removeAllEventListeners=null,i.dispatchEvent=null,i.hasEventListener=null,i._listeners=null,createjs.EventDispatcher.initialize(i),i._addEventListener=i.addEventListener,i.addEventListener=function(){return i._inited||i.init(),i._addEventListener.apply(i,arguments)},i._inited=!1,i._startTime=0,i._pausedTime=0,i._ticks=0,i._pausedTicks=0,i._interval=50,i._lastTime=0,i._times=null,i._tickTimes=null,i._timerId=null,i._raf=!0,i._setInterval=function(e){i._interval=e,i._inited&&i._setupTick()},i.setInterval=createjs.deprecate(i._setInterval,"Ticker.setInterval"),i._getInterval=function(){return i._interval},i.getInterval=createjs.deprecate(i._getInterval,"Ticker.getInterval"),i._setFPS=function(e){i._setInterval(1e3/e)},i.setFPS=createjs.deprecate(i._setFPS,"Ticker.setFPS"),i._getFPS=function(){return 1e3/i._interval},i.getFPS=createjs.deprecate(i._getFPS,"Ticker.getFPS");try{Object.defineProperties(i,{interval:{get:i._getInterval,set:i._setInterval},framerate:{get:i._getFPS,set:i._setFPS}})}catch(e){console.log(e)}i.init=function(){i._inited||(i._inited=!0,i._times=[],i._tickTimes=[],i._startTime=i._getTime(),i._times.push(i._lastTime=0),i.interval=i._interval)},i.reset=function(){var e;i._raf?(e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame)&&e(i._timerId):clearTimeout(i._timerId),i.removeAllEventListeners("tick"),i._timerId=i._times=i._tickTimes=null,i._startTime=i._lastTime=i._ticks=i._pausedTime=0,i._inited=!1},i.getMeasuredTickTime=function(e){var t=0,n=i._tickTimes;if(!n||n.length<1)return-1;e=Math.min(n.length,e||0|i._getFPS());for(var a=0;a<e;a++)t+=n[a];return t/e},i.getMeasuredFPS=function(e){var t=i._times;return!t||t.length<2?-1:(e=Math.min(t.length-1,e||0|i._getFPS()),1e3/((t[0]-t[e])/e))},i.getTime=function(e){return i._startTime?i._getTime()-(e?i._pausedTime:0):-1},i.getEventTime=function(e){return i._startTime?(i._lastTime||i._startTime)-(e?i._pausedTime:0):-1},i.getTicks=function(e){return i._ticks-(e?i._pausedTicks:0)},i._handleSynch=function(){i._timerId=null,i._setupTick(),i._getTime()-i._lastTime>=.97*(i._interval-1)&&i._tick()},i._handleRAF=function(){i._timerId=null,i._setupTick(),i._tick()},i._handleTimeout=function(){i._timerId=null,i._setupTick(),i._tick()},i._setupTick=function(){if(null==i._timerId){var e=i.timingMode;if(e==i.RAF_SYNCHED||e==i.RAF){var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(t)return i._timerId=t(e==i.RAF?i._handleRAF:i._handleSynch),void(i._raf=!0)}i._raf=!1,i._timerId=setTimeout(i._handleTimeout,i._interval)}},i._tick=function(){var e,t,n=i.paused,a=i._getTime(),o=a-i._lastTime;for(i._lastTime=a,i._ticks++,n&&(i._pausedTicks++,i._pausedTime+=o),i.hasEventListener("tick")&&(e=new createjs.Event("tick"),t=i.maxDelta,e.delta=t&&t<o?t:o,e.paused=n,e.time=a,e.runTime=a-i._pausedTime,i.dispatchEvent(e)),i._tickTimes.unshift(i._getTime()-a);100<i._tickTimes.length;)i._tickTimes.pop();for(i._times.unshift(a);100<i._times.length;)i._times.pop()};var e=window,t=e.performance.now||e.performance.mozNow||e.performance.msNow||e.performance.oNow||e.performance.webkitNow;i._getTime=function(){return(t&&t.call(e.performance)||(new Date).getTime())-i._startTime},createjs.Ticker=i}(),this.createjs=this.createjs||{},function(){function e(e){this.EventDispatcher_constructor(),this.ignoreGlobalPause=!1,this.loop=0,this.useTicks=!1,this.reversed=!1,this.bounce=!1,this.timeScale=1,this.duration=0,this.position=0,this.rawPosition=-1,this._paused=!0,this._next=null,this._prev=null,this._parent=null,this._labels=null,this._labelList=null,e&&(this.useTicks=!!e.useTicks,this.ignoreGlobalPause=!!e.ignoreGlobalPause,this.loop=!0===e.loop?-1:e.loop||0,this.reversed=!!e.reversed,this.bounce=!!e.bounce,this.timeScale=e.timeScale||1,e.onChange&&this.addEventListener("change",e.onChange),e.onComplete&&this.addEventListener("complete",e.onComplete))}var t=createjs.extend(e,createjs.EventDispatcher);t._setPaused=function(e){return createjs.Tween._register(this,e),this},t.setPaused=createjs.deprecate(t._setPaused,"AbstractTween.setPaused"),t._getPaused=function(){return this._paused},t.getPaused=createjs.deprecate(t._getPaused,"AbstactTween.getPaused"),t._getCurrentLabel=function(e){var t=this.getLabels();null==e&&(e=this.position);for(var n=0,a=t.length;n<a&&!(e<t[n].position);n++);return 0===n?null:t[n-1].label},t.getCurrentLabel=createjs.deprecate(t._getCurrentLabel,"AbstractTween.getCurrentLabel");try{Object.defineProperties(t,{paused:{set:t._setPaused,get:t._getPaused},currentLabel:{get:t._getCurrentLabel}})}catch(e){}t.advance=function(e,t){this.setPosition(this.rawPosition+e*this.timeScale,t)},t.setPosition=function(e,t,n,a){var o=this.duration,i=this.loop,s=this.rawPosition,r=0,c=0,l=!1;if(e<0&&(e=0),0===o){if(l=!0,-1!==s)return l}else{if(c=e-(r=e/o|0)*o,(l=-1!==i&&i*o+o<=e)&&(e=(c=o)*(r=i)+o),e===s)return l;!this.reversed!=!(this.bounce&&r%2)&&(c=o-c)}this.position=c,this.rawPosition=e,this._updatePosition(n,l),l&&(this.paused=!0),a&&a(this),t||this._runActions(s,e,n,!n&&-1===s),this.dispatchEvent("change"),l&&this.dispatchEvent("complete")},t.calculatePosition=function(e){var t=this.duration,n=this.loop,a=0,o=0;return 0===t?0:(-1!==n&&n*t+t<=e?(o=t,a=n):o=e<0?0:e-(a=e/t|0)*t,!this.reversed!=!(this.bounce&&a%2)?t-o:o)},t.getLabels=function(){var e=this._labelList;if(!e){e=this._labelList=[];var t,n=this._labels;for(t in n)e.push({label:t,position:n[t]});e.sort(function(e,t){return e.position-t.position})}return e},t.setLabels=function(e){this._labels=e,this._labelList=null},t.addLabel=function(e,t){this._labels||(this._labels={}),this._labels[e]=t;var n=this._labelList;if(n){for(var a=0,o=n.length;a<o&&!(t<n[a].position);a++);n.splice(a,0,{label:e,position:t})}},t.gotoAndPlay=function(e){this.paused=!1,this._goto(e)},t.gotoAndStop=function(e){this.paused=!0,this._goto(e)},t.resolve=function(e){var t=Number(e);return isNaN(t)&&(t=this._labels&&this._labels[e]),t},t.toString=function(){return"[AbstractTween]"},t.clone=function(){throw"AbstractTween can not be cloned."},t._init=function(e){e&&e.paused||(this.paused=!1),e&&null!=e.position&&this.setPosition(e.position)},t._updatePosition=function(){},t._goto=function(e){e=this.resolve(e);null!=e&&this.setPosition(e,!1,!0)},t._runActions=function(e,t,n,a){if(this._actionHead||this.tweens){var o,i,s,r,c=this.duration,l=this.reversed,g=this.bounce,u=this.loop;if(0===c?(o=i=s=r=0,l=g=!1):(s=e-(o=e/c|0)*c,r=t-(i=t/c|0)*c),-1!==u&&(u<i&&(r=c,i=u),u<o&&(s=c,o=u)),n)return this._runActionsRange(r,r,n,a);if(o!==i||s!==r||n||a){-1===o&&(o=s=0);var m=e<=t,h=o;do{var d=!l!=!(g&&h%2),p=h===o?s:m?0:c,b=h===i?r:m?c:0;if(d&&(p=c-p,b=c-b),(!g||h===o||p!==b)&&this._runActionsRange(p,b,n,a||h!==o&&!g))return!0}while(a=!1,m&&++h<=i||!m&&--h>=i)}}},t._runActionsRange=function(){},createjs.AbstractTween=createjs.promote(e,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){function b(e,t){this.AbstractTween_constructor(t),this.pluginData=null,this.target=e,this.passive=!1,this._stepHead=new o(null,0,0,{},null,!0),this._stepTail=this._stepHead,this._stepPosition=0,this._actionHead=null,this._actionTail=null,this._plugins=null,this._pluginIds=null,this._injected=null,t&&(this.pluginData=t.pluginData,t.override&&b.removeTweens(e)),this.pluginData||(this.pluginData={}),this._init(t)}function o(e,t,n,a,o,i){this.next=null,this.prev=e,this.t=t,this.d=n,this.props=a,this.ease=o,this.passive=i,this.index=e?e.index+1:0}function a(e,t,n,a,o){this.next=null,this.prev=e,this.t=t,this.d=0,this.scope=n,this.funct=a,this.params=o}var e=createjs.extend(b,createjs.AbstractTween);b.IGNORE={},b._tweens=[],b._plugins=null,b._tweenHead=null,b._tweenTail=null,b.get=function(e,t){return new b(e,t)},b.tick=function(e,t){for(var n=b._tweenHead;n;){var a=n._next;t&&!n.ignoreGlobalPause||n._paused||n.advance(n.useTicks?1:e),n=a}},b.handleEvent=function(e){"tick"===e.type&&this.tick(e.delta,e.paused)},b.removeTweens=function(e){if(e.tweenjs_count){for(var t=b._tweenHead;t;){var n=t._next;t.target===e&&b._register(t,!0),t=n}e.tweenjs_count=0}},b.removeAllTweens=function(){for(var e=b._tweenHead;e;){var t=e._next;e._paused=!0,e.target&&(e.target.tweenjs_count=0),e._next=e._prev=null,e=t}b._tweenHead=b._tweenTail=null},b.hasActiveTweens=function(e){return e?!!e.tweenjs_count:!!b._tweenHead},b._installPlugin=function(e){for(var t=e.priority=e.priority||0,n=b._plugins=b._plugins||[],a=0,o=n.length;a<o&&!(t<n[a].priority);a++);n.splice(a,0,e)},b._register=function(e,t){var n,a=e.target;!t&&e._paused?(a&&(a.tweenjs_count=a.tweenjs_count?a.tweenjs_count+1:1),(n=b._tweenTail)?(b._tweenTail=n._next=e)._prev=n:b._tweenHead=b._tweenTail=e,!b._inited&&createjs.Ticker&&(createjs.Ticker.addEventListener("tick",b),b._inited=!0)):t&&!e._paused&&(a&&a.tweenjs_count--,n=e._next,a=e._prev,n?n._prev=a:b._tweenTail=a,a?a._next=n:b._tweenHead=n,e._next=e._prev=null),e._paused=t},e.wait=function(e,t){return 0<e&&this._addStep(+e,this._stepTail.props,null,t),this},e.to=function(e,t,n){(null==t||t<0)&&(t=0);n=this._addStep(+t,null,n);return this._appendProps(e,n),this},e.label=function(e){return this.addLabel(e,this.duration),this},e.call=function(e,t,n){return this._addAction(n||this.target,e,t||[this])},e.set=function(e,t){return this._addAction(t||this.target,this._set,[e])},e.play=function(e){return this._addAction(e||this,this._set,[{paused:!1}])},e.pause=function(e){return this._addAction(e||this,this._set,[{paused:!0}])},e.w=e.wait,e.t=e.to,e.c=e.call,e.s=e.set,e.toString=function(){return"[Tween]"},e.clone=function(){throw"Tween can not be cloned."},e._addPlugin=function(e){var t=this._pluginIds||(this._pluginIds={}),n=e.ID;if(n&&!t[n]){t[n]=!0;for(var a=this._plugins||(this._plugins=[]),o=e.priority||0,i=0,s=a.length;i<s;i++)if(o<a[i].priority)return void a.splice(i,0,e);a.push(e)}},e._updatePosition=function(e,t){var n=this._stepHead.next,a=this.position,o=this.duration;if(this.target&&n){for(var i=n.next;i&&i.t<=a;)i=(n=n.next).next;o=t?0===o?1:a/o:(a-n.t)/n.d;this._updateTargetProps(n,o,t)}this._stepPosition=n?a-n.t:0},e._updateTargetProps=function(e,t,n){if(!(this.passive=!!e.passive)){var a,o,i,s,r=e.prev.props,c=e.props;(s=e.ease)&&(t=s(t,0,1,1));var l=this._plugins;e:for(var g in r){if(a=(o=r[g])!==(i=c[g])&&"number"==typeof o?o+(i-o)*t:1<=t?i:o,l)for(var u=0,m=l.length;u<m;u++){var h=l[u].change(this,e,g,a,t,n);if(h===b.IGNORE)continue e;void 0!==h&&(a=h)}this.target[g]=a}}},e._runActionsRange=function(e,t,n,a){var o=t<e,i=o?this._actionTail:this._actionHead,s=t,r=e;o&&(s=e,r=t);for(var c=this.position;i;){var l=i.t;if((l===t||r<l&&l<s||a&&l===e)&&(i.funct.apply(i.scope,i.params),c!==this.position))return!0;i=o?i.prev:i.next}},e._appendProps=function(e,t,n){var a,o,i,s,r=this._stepHead.props,c=this.target,l=b._plugins,g=t.prev,u=g.props,m=t.props||(t.props=this._cloneProps(u)),h={};for(a in e)if(e.hasOwnProperty(a)&&(h[a]=m[a]=e[a],void 0===r[a])){if(s=void 0,l)for(o=l.length-1;0<=o;o--)if(void 0!==(i=l[o].init(this,a,s))&&(s=i),s===b.IGNORE){delete m[a],delete h[a];break}s!==b.IGNORE&&(void 0===s&&(s=c[a]),u[a]=void 0===s?null:s)}for(a in h){i=e[a];for(var d,p=g;(d=p)&&(p=d.prev);)if(p.props!==d.props){if(void 0!==p.props[a])break;p.props[a]=u[a]}}if(!1!==n&&(l=this._plugins))for(o=l.length-1;0<=o;o--)l[o].step(this,t,h);(n=this._injected)&&(this._injected=null,this._appendProps(n,t,!1))},e._injectProp=function(e,t){(this._injected||(this._injected={}))[e]=t},e._addStep=function(e,t,n,a){a=new o(this._stepTail,this.duration,e,t,n,a||!1);return this.duration+=e,this._stepTail=this._stepTail.next=a},e._addAction=function(e,t,n){n=new a(this._actionTail,this.duration,e,t,n);return this._actionTail?this._actionTail.next=n:this._actionHead=n,this._actionTail=n,this},e._set=function(e){for(var t in e)this[t]=e[t]},e._cloneProps=function(e){var t,n={};for(t in e)n[t]=e[t];return n},createjs.Tween=createjs.promote(b,"AbstractTween")}(),this.createjs=this.createjs||{},function(){function e(e){var t,n;e instanceof Array||null==e&&1<arguments.length?(t=e,n=arguments[1],e=arguments[2]):e&&(t=e.tweens,n=e.labels),this.AbstractTween_constructor(e),this.tweens=[],t&&this.addTween.apply(this,t),this.setLabels(n),this._init(e)}var t=createjs.extend(e,createjs.AbstractTween);t.addTween=function(e){e._parent&&e._parent.removeTween(e);var t=arguments.length;if(1<t){for(var n=0;n<t;n++)this.addTween(arguments[n]);return arguments[t-1]}if(0===t)return null;this.tweens.push(e),e._parent=this,e.paused=!0;var a=e.duration;return 0<e.loop&&(a*=e.loop+1),a>this.duration&&(this.duration=a),0<=this.rawPosition&&e.setPosition(this.rawPosition),e},t.removeTween=function(e){var t=arguments.length;if(1<t){for(var n=!0,a=0;a<t;a++)n=n&&this.removeTween(arguments[a]);return n}if(0===t)return!0;for(var o=this.tweens,a=o.length;a--;)if(o[a]===e)return o.splice(a,1),e._parent=null,e.duration>=this.duration&&this.updateDuration(),!0;return!1},t.updateDuration=function(){for(var e=this.duration=0,t=this.tweens.length;e<t;e++){var n=this.tweens[e],a=n.duration;0<n.loop&&(a*=n.loop+1),a>this.duration&&(this.duration=a)}},t.toString=function(){return"[Timeline]"},t.clone=function(){throw"Timeline can not be cloned."},t._updatePosition=function(e){for(var t=this.position,n=0,a=this.tweens.length;n<a;n++)this.tweens[n].setPosition(t,!0,e)},t._runActionsRange=function(e,t,n,a){for(var o=this.position,i=0,s=this.tweens.length;i<s;i++)if(this.tweens[i]._runActions(e,t,n,a),o!==this.position)return!0},createjs.Timeline=createjs.promote(e,"AbstractTween")}(),this.createjs=this.createjs||{},function(){function t(){throw"Ease cannot be instantiated."}t.none=t.linear=function(e){return e},t.get=function(t){return t<-1?t=-1:1<t&&(t=1),function(e){return 0==t?e:t<0?e*(e*-t+1+t):e*((2-e)*t+(1-t))}},t.getPowIn=function(t){return function(e){return Math.pow(e,t)}},t.getPowOut=function(t){return function(e){return 1-Math.pow(1-e,t)}},t.getPowInOut=function(t){return function(e){return(e*=2)<1?.5*Math.pow(e,t):1-.5*Math.abs(Math.pow(2-e,t))}},t.quadIn=t.getPowIn(2),t.quadOut=t.getPowOut(2),t.quadInOut=t.getPowInOut(2),t.cubicIn=t.getPowIn(3),t.cubicOut=t.getPowOut(3),t.cubicInOut=t.getPowInOut(3),t.quartIn=t.getPowIn(4),t.quartOut=t.getPowOut(4),t.quartInOut=t.getPowInOut(4),t.quintIn=t.getPowIn(5),t.quintOut=t.getPowOut(5),t.quintInOut=t.getPowInOut(5),t.sineIn=function(e){return 1-Math.cos(e*Math.PI/2)},t.sineOut=function(e){return Math.sin(e*Math.PI/2)},t.sineInOut=function(e){return-.5*(Math.cos(Math.PI*e)-1)},t.backIn=(t.getBackIn=function(t){return function(e){return e*e*((t+1)*e-t)}})(1.7),t.backOut=(t.getBackOut=function(t){return function(e){return--e*e*((t+1)*e+t)+1}})(1.7),t.backInOut=(t.getBackInOut=function(t){return t*=1.525,function(e){return(e*=2)<1?.5*e*e*((t+1)*e-t):.5*((e-=2)*e*((t+1)*e+t)+2)}})(1.7),t.circIn=function(e){return-(Math.sqrt(1-e*e)-1)},t.circOut=function(e){return Math.sqrt(1- --e*e)},t.circInOut=function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},t.bounceIn=function(e){return 1-t.bounceOut(1-e)},t.bounceOut=function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},t.bounceInOut=function(e){return e<.5?.5*t.bounceIn(2*e):.5*t.bounceOut(2*e-1)+.5},t.elasticIn=(t.getElasticIn=function(n,a){var o=2*Math.PI;return function(e){if(0==e||1==e)return e;var t=a/o*Math.asin(1/n);return-(n*Math.pow(2,10*--e)*Math.sin((e-t)*o/a))}})(1,.3),t.elasticOut=(t.getElasticOut=function(n,a){var o=2*Math.PI;return function(e){if(0==e||1==e)return e;var t=a/o*Math.asin(1/n);return n*Math.pow(2,-10*e)*Math.sin((e-t)*o/a)+1}})(1,.3),t.elasticInOut=(t.getElasticInOut=function(n,a){var o=2*Math.PI;return function(e){var t=a/o*Math.asin(1/n);return(e*=2)<1?-.5*n*Math.pow(2,10*--e)*Math.sin((e-t)*o/a):n*Math.pow(2,-10*--e)*Math.sin((e-t)*o/a)*.5+1}})(1,.3*1.5),createjs.Ease=t}(),this.createjs=this.createjs||{},function(){function e(){throw"MotionGuidePlugin cannot be instantiated."}var w=e;w.priority=0,w.ID="MotionGuide",w.install=function(){return createjs.Tween._installPlugin(e),createjs.Tween.IGNORE},w.init=function(e,t){"guide"==t&&e._addPlugin(w)},w.step=function(e,t,n){for(var a in n)if("guide"===a){var o=t.props.guide,i=w._solveGuideData(n.guide,o);o.valid=!i;var s=o.endData;if(e._injectProp("x",s.x),e._injectProp("y",s.y),i||!o.orient)break;i=void 0===t.prev.props.rotation?e.target.rotation||0:t.prev.props.rotation;if(o.startOffsetRot=i-o.startData.rotation,"fixed"==o.orient)o.endAbsRot=s.rotation+o.startOffsetRot,o.deltaRotation=0;else{var s=void 0===n.rotation?e.target.rotation||0:n.rotation,r=s-o.endData.rotation-o.startOffsetRot,c=r%360;switch(o.endAbsRot=s,o.orient){case"auto":o.deltaRotation=r;break;case"cw":o.deltaRotation=(360+c)%360+360*Math.abs(r/360|0);break;case"ccw":o.deltaRotation=(c-360)%360+-360*Math.abs(r/360|0)}}e._injectProp("rotation",o.endAbsRot)}},w.change=function(e,t,n,a,o){var i=t.props.guide;if(i&&t.props!==t.prev.props&&i!==t.prev.props.guide)return"guide"===n&&!i.valid||"x"==n||"y"==n||"rotation"===n&&i.orient?createjs.Tween.IGNORE:void w._ratioToPositionData(o,i,e.target)},w.debug=function(e,t,n){e=e.guide||e;var a=w._findPathProblems(e);if(a&&console.error("MotionGuidePlugin Error found: \n"+a),!t)return a;var o=e.path,i=o.length;for(t.save(),t.lineCap="round",t.lineJoin="miter",t.beginPath(),t.moveTo(o[0],o[1]),l=2;l<i;l+=4)t.quadraticCurveTo(o[l],o[l+1],o[l+2],o[l+3]);t.strokeStyle="black",t.lineWidth=4.5,t.stroke(),t.strokeStyle="white",t.lineWidth=3,t.stroke(),t.closePath();var s=n.length;if(n&&s){var r={},c={};w._solveGuideData(e,r);for(var l=0;l<s;l++)r.orient="fixed",w._ratioToPositionData(n[l],r,c),t.beginPath(),t.moveTo(c.x,c.y),t.lineTo(c.x+9*Math.cos(.0174533*c.rotation),c.y+9*Math.sin(.0174533*c.rotation)),t.strokeStyle="black",t.lineWidth=4.5,t.stroke(),t.strokeStyle="red",t.lineWidth=3,t.stroke(),t.closePath()}return t.restore(),a},w._solveGuideData=function(e,t){if(j=w.debug(e))return j;var n=t.path=e.path;t.orient=e.orient,t.subLines=[],t.totalLength=0,t.startOffsetRot=0,t.deltaRotation=0,t.startData={ratio:0},t.endData={ratio:1},t.animSpan=1;for(var a,o,i,s,r=n.length,c={},l=n[0],g=n[1],u=2;u<r;u+=4){a=n[u],o=n[u+1],i=n[u+2],s=n[u+3];for(var m={weightings:[],estLength:0,portion:0},h=l,d=g,p=1;p<=10;p++){w._getParamsForCurve(l,g,a,o,i,s,p/10,!1,c);var b=c.x-h,f=c.y-d,v=Math.sqrt(b*b+f*f);m.weightings.push(v),m.estLength+=v,h=c.x,d=c.y}for(t.totalLength+=m.estLength,p=0;p<10;p++)v=m.estLength,m.weightings[p]=m.weightings[p]/v;t.subLines.push(m),l=i,g=s}v=t.totalLength;var y=t.subLines.length;for(u=0;u<y;u++)t.subLines[u].portion=t.subLines[u].estLength/v;var j=isNaN(e.start)?0:e.start,e=isNaN(e.end)?1:e.end;w._ratioToPositionData(j,t,t.startData),w._ratioToPositionData(e,t,t.endData),t.startData.ratio=j,t.endData.ratio=e,t.animSpan=t.endData.ratio-t.startData.ratio},w._ratioToPositionData=function(e,t,n){for(var a,o,i,s=t.subLines,r=0,c=e*t.animSpan+t.startData.ratio,l=s.length,g=0;g<l;g++){if(c<=r+(o=s[g].portion)){i=g;break}r+=o}void 0===i&&(i=l-1,r-=o);var u=s[i].weightings,m=o;for(l=u.length,g=0;g<l&&!(c<=r+(o=u[g]*m));g++)r+=o;i=4*i+2,a=g/10+(c-r)/o*.1;var h=t.path;return w._getParamsForCurve(h[i-2],h[i-1],h[i],h[i+1],h[i+2],h[i+3],a,t.orient,n),t.orient&&(.99999<=e&&e<=1.00001&&void 0!==t.endAbsRot?n.rotation=t.endAbsRot:n.rotation+=t.startOffsetRot+e*t.deltaRotation),n},w._getParamsForCurve=function(e,t,n,a,o,i,s,r,c){var l=1-s;c.x=l*l*e+2*l*s*n+s*s*o,c.y=l*l*t+2*l*s*a+s*s*i,r&&(c.rotation=57.2957795*Math.atan2((a-t)*l+(i-a)*s,(n-e)*l+(o-n)*s))},w._findPathProblems=function(e){var t=e.path,n=t&&t.length||0;if(n<6||(n-2)%4){var a="\tCannot parse 'path' array due to invalid number of entries in path. ";return a+="There should be an odd number of points, at least 3 points, and 2 entries per point (x & y). ",(a+="See 'CanvasRenderingContext2D.quadraticCurveTo' for details as 'path' models a quadratic bezier.\n\n")+("Only [ "+n+" ] values found. Expected: "+Math.max(4*Math.ceil((n-2)/4)+2,6))}for(var o=0;o<n;o++)if(isNaN(t[o]))return"All data in path array must be numeric";a=e.start;if(isNaN(a)&&void 0!==a)return"'start' out of bounds. Expected 0 to 1, got: "+a;a=e.end;if(isNaN(a)&&void 0!==a)return"'end' out of bounds. Expected 0 to 1, got: "+a;e=e.orient;return e&&"fixed"!=e&&"auto"!=e&&"cw"!=e&&"ccw"!=e?'Invalid orientation value. Expected ["fixed", "auto", "cw", "ccw", undefined], got: '+e:void 0},createjs.MotionGuidePlugin=e}(),this.createjs=this.createjs||{},function(){var e=createjs.TweenJS=createjs.TweenJS||{};e.version="1.0.0",e.buildDate="Thu, 14 Sep 2017 19:47:47 GMT"}(),String.prototype.toHHMMSS=function(){var e=parseInt(this,10),t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60),e=e-3600*t-60*n;return t<10&&(t="0"+t),n<10&&(n="0"+n),e<10&&(e="0"+e),t+":"+n+":"+e};var spritefont2={characterSet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789:/",lowercase:!0,xindex:16,yindex:4,imgResolutionx:3780,imgResolutiony:1415,img:"Font"};function randomBool(e,t){return 1==random(1,2)?e:t}function random(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function randomFloat(e,t){return parseFloat(Math.random()*(t-e)+e).toFixed(3)}function randomizeArray(e){for(var t=0;t<e.length;t++){var n=random(0,e.length-1),a=e[n],o=e[t];e[t]=a,e[n]=o}return e}function checkIntersection(e,t){return!(e.x>=t.x+t.width||e.x+e.width<=t.x||e.y>=t.y+t.height||e.y+e.height<=t.y)}function checkCircleIntersection(e,t){var n=e.x+e.width/2,a=e.y+e.height/2,o=t.x+t.width/2,i=t.y+t.height/2;return(e.width+t.width)/2>Math.sqrt((o-n)*(o-n)+(i-a)*(i-a))}