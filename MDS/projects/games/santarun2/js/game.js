"use strict";var gameready=function(){var n=0,a=0,i=0,t=[];function o(e){var t;window.requestAnimationFrame(o),e=((t=e)-n)/1e3,n=t,updater(),function(e){.25<a&&(Math.round(i/a),i=a=0),a+=e,i++}(e),renderer(),context.fillStyle="#000000",context.font="12px Verdana"}console.log("assets loaded"),window.addEventListener("keydown",function(e){t[e.keyCode||e.which]=!0},!0),window.addEventListener("keyup",function(e){t[e.keyCode||e.which]=!1},!0),window.addEventListener("keyup",function(e){switch(e.keyCode){case 37:leftkey(),leftkeyPressedGUI();break;case 38:upkey();break;case 39:rightkey(),rightkeyPressedGUI();break;case 40:downkey();break;case 32:spacekeyDebug();break;case 13:enterkeyPressedGUI(),enterkey()}},!1),uiInit(),o(0)},gameobjects={level:{speed:1,speedmax:10,speedmin:1,groundcontainer:[],housecontainer:[],enemycontainer:[],bulletcontainer:[],enemybulletcontainer:[],bombdropcontainer:[],blastcontainer:[],collectablecontainer:[],tile:{ground:{x:0,y:900,width:100,height:100,count:17},house:{x:0,y:900,width:500,height:500,count:3}}},enemy:{x:100,y:50,width:50,height:50,count:4},paralax:{x:0,y:150,width:2400,height:750,dir:-1,speed:2},defaults:{warnings:{x:600,y:500,width:600,height:100},scoreunit:20,disableInput:!1,duration:5e3,durationmin:0,durationmax:5e3,time:5,stopwatch:null,playerHealth:5,ammo:40},player:{x:300,y:750,width:50,height:200,level:1,score:0,highscore:0,lastscore:0,time:0,health:10,ammo:10,speed:2,jump:{state:!1,height:6,speedfactor:1},animationframe:0,framelength:11,tilex:98,tiley:111,imgpos:{x:60,y:10,width:100,height:20}},background:{x:0,y:0,width:1600,height:1e3},gamestate:"",states:{loading:"loading",home:"home",play:"play",pause:"pause",overpass:"overpass",overfail:"overfail",info:"info"},images:["images/background.jpg","images/bg.png","images/Player/playerrun.png","images/cloud.png","images/Font.png","images/jfont.png","images/gamelogo.png","images/BtnPlayOn.png","images/BtnInfoOn.png","images/BtnPlayOn.png","images/BtnSoundOn.png","images/BtnSoundOff.png","images/BtnRestartOn.png","images/BtnExitOn.png","images/button.png","images/road.png","images/house/house1.png","images/house/house2.png","images/house/house3.png","images/house/house4.png","images/house/house5.png","images/enemies/seel.png","images/enemies/panguslide.png","images/enemies/Walk/enemy50.png","images/enemies/Walk/enemy51.png","images/enemies/Walk/enemy52.png","images/enemies/Walk/enemy53.png","images/enemies/Walk/enemy54.png","images/enemies/Walk/enemy55.png","images/Player/Run/player0.png","images/Player/Run/player1.png","images/Player/Run/player2.png","images/Player/Run/player3.png","images/Player/Run/player4.png","images/enemies/shooter.png","images/enemies/crow/crow0.png","images/enemies/crow/crow1.png","images/enemies/crow/crow2.png","images/enemies/crow/crow3.png","images/enemies/crow/crow4.png","images/enemies/crow/crow5.png","images/enemies/bomb.png","images/enemies/smoke.png","images/enemies/cart.png","images/bullet.png","images/bullet1.png","images/ammopickup.png","images/healthpickup.png","images/pixel.png"],sounds:["media/Button.m4a","media/gamemusic.ogg","media/gameover.ogg","media/ammo.ogg","media/life.ogg","media/crow.ogg","media/jump.ogg","media/hit.ogg","media/noammo.ogg","media/shot.ogg","media/blast.ogg"]},GUI={canvas:{x:0,y:0,width:1600,height:1e3},gamelogo:{x:400,y:150,width:950,height:300},playMenu:{x:0,y:500,width:400,height:400},pauseMenu:{x:0,y:500,width:400,height:400},btnPlay:{x:50,y:50,width:150,height:150},btnSound:{x:50,y:50,width:150,height:150},btnInfo:{x:50,y:50,width:150,height:150},btnCommon:{x:50,y:50,width:150,height:150},levelup:{x:350,y:1100,width:900,height:400},decoration:{bubbles:[],bubblesLength:10},pointerPadding:40},img=loadImages(gameobjects.images),sound=loadSound(gameobjects.sounds),homeScreenButtonList=[img.BtnPlayOn,img.BtnInfoOn,img.BtnSoundOn],pauseScreenButtonList=[img.BtnPlayOn,img.BtnRestartOn,img.BtnExitOn,img.BtnSoundOn],homeScreenPointerPos=0,pauseScreenPointerPos=0,globalsound=!0,loadcount=0,loadtotal=0,preloaded=!1;function loadImages(e){preloaded=!1;for(var t=[],n={},a=0;a<e.length;a++){var i=new Image;i.onload=function(){(loadcount+=1)==e.length&&(preloaded=!0)},i.src=e[a],n[(t[a]=i).src.split("/")[i.src.split("/").length-1].split(".")[0]]=i}return n}function loadSound(e){for(var t=[],n={},a=0;a<e.length;a++){var i=new Audio(e[a]);n[(t[a]=i).src.split("/")[i.src.split("/").length-1].split(".")[0]]=i}return n}function handleGlobalSound(){(globalsound=!globalsound)?sound.gamemusic.play():(sound.gamemusic.pause(),sound.gamemusic.currentTime=0),Object.keys(sound).forEach(function(e){sound[e].volume=globalsound?1:0})}function raindrop(){this.x=random(GUI.canvas.width+100,GUI.canvas.width+1100),this.y=randomFloat(0,GUI.canvas.height/4),this.size=random(100,200),this.width=this.size,this.height=2*this.size/3,this.image=img.cloud;createjs.Tween.get(this).wait(random(0,9e3)).play(createjs.Tween.get(this,{paused:!0,loop:!0}).to({x:-300},5e3).to({x:GUI.canvas.width+100},0))}function raindropeffect(){for(var e=0;e<GUI.decoration.bubblesLength;e++)GUI.decoration.bubbles.push(new raindrop)}function houseConstructor(){this.x=500,this.type=random(1,5);var e=this;this.width=1==e.type?300:2==e.type?350:3==e.type?400:4==e.type||5==e.type?320:void 0,this.height=1==e.type?100:2==e.type?150:3==e.type||4==e.type||5==e.type?350:void 0,this.img=img["house"+this.type],this.y=900-this.height}function enemyConstructor(){this.type=random(2,7),this.damageplayer=!0;var e,t=this;this.width=1==t.type?250:2==t.type?120:3==t.type?100:4==t.type||5==t.type?70:6==t.type?150:7==t.type?50:void 0,this.height=1==t.type?140:2==t.type?150:3==t.type?100:4==t.type||5==t.type?150:6==t.type?70:7==t.type?50:void 0,this.img=1==t.type?["pixel"]:2==t.type?["cart"]:3==t.type?["crow0","crow1","crow2","crow3"]:4==t.type?["seel"]:5==t.type?["enemy50","enemy51","enemy52","enemy53","enemy54","enemy55"]:6==t.type?["panguslide"]:7==t.type?["button"]:void 0,this.imgpos=1==t.type?{x:10,y:10,width:20,height:20}:2==t.type?{x:40,y:0,width:80,height:0}:3==t.type?{x:10,y:10,width:20,height:20}:4==t.type?{x:60,y:10,width:80,height:20}:5==t.type?{x:20,y:0,width:40,height:0}:6==t.type||7==t.type?{x:0,y:0,width:0,height:0}:void 0,this.animationframe=0,this.x=function(){for(var e=0,t=0;t<gameobjects.level.enemycontainer.length;t++){var n=gameobjects.level.enemycontainer[t].x+gameobjects.level.enemycontainer[t].width;e<n&&(e=n)}return e}()+random(GUI.canvas.width/2,GUI.canvas.width),this.y=(e=GUI.canvas.height/2,1==t.type||2==t.type?gameobjects.level.tile.ground.y-t.height:3==t.type?e:4==t.type||5==t.type||6==t.type?gameobjects.level.tile.ground.y-t.height:7==t.type?random(e,200+e):void 0),gameobjects.level.tile.ground.y,this.height,this.speed=1==t.type||2==t.type?0:3==t.type?2:4==t.type?0:5==t.type?2:6==t.type||7==t.type?7:void 0,this.health=1==t.type||2==t.type||3==t.type||4==t.type||5==t.type||6==t.type||7==t.type?0:void 0,this.attacktime=1==t.type||2==t.type?1e3:3==t.type||4==t.type?30:5==t.type||6==t.type||7==t.type?1e3:void 0,this.attacktimeinitial=1==t.type||2==t.type?1e3:3==t.type?200:4==t.type?100:5==t.type||6==t.type||7==t.type?1e3:void 0,this.damageble=2!=t.type,this.fly=3==t.type||7==t.type,this.damage=!0}function bulletConstructor(e,t){this.x=e.x+e.width*t,this.y=e.y+.6*e.height,this.width=40,this.height=20,this.dir=t*(gameobjects.player.speed+gameobjects.player.level),sound.shot.play()}function bombdropConstructor(e){this.x=e.x+e.width/2,this.y=e.y+e.height,this.width=50,this.height=50,sound.crow.play()}function blastConstructor(e){var t=1.5*e.height;this.x=e.x,this.y=gameobjects.level.tile.ground.y-t,this.width=t,this.height=t,this.frame=1,this.framemax=16,this.tilex=178.625,this.tiley=137}function collectableConstructor(e){this.x=e.x,this.y=gameobjects.level.tile.ground.y-80,this.height=80,this.width=80,this.type=2,this.img=null;var t=this;1==this.type&&(this.img=img.ammopickup),2==this.type&&(this.img=img.healthpickup),this.collect=function(){1==t.type&&(gameobjects.player.ammo+=10,sound.ammo.play()),2==t.type&&(gameobjects.player.health+=2,sound.life.play())}}function updater(){gameobjects.gamestate==gameobjects.states.play&&updatelogic()}function renderer(){renderUI()}function leftkey(){}function rightkey(){gameobjects.gamestate,gameobjects.states.play}function downkey(){gameobjects.gamestate,gameobjects.states.play}function upkey(){gameobjects.gamestate==gameobjects.states.play&&jump()}function enterkey(){}function spacekeyDebug(){gameobjects.player.level+=1}function reset(){gameobjects.player.score=0,gameobjects.player.level=6,gameobjects.player.ammo=gameobjects.defaults.ammo,gameobjects.level.blastcontainer=[],gameobjects.level.bombdropcontainer=[],gameobjects.level.bulletcontainer=[],gameobjects.level.enemycontainer=[],gameobjects.level.collectablecontainer=[],gameobjects.level.enemycontainer=[],gameobjects.player.health=gameobjects.defaults.playerHealth}function playerdamage(){1<gameobjects.player.health?--gameobjects.player.health:gameover()}function startgame(){gameobjects.gamestate=gameobjects.states.play}function gameover(){gameobjects.gamestate=gameobjects.states.overfail,sound.gameover.play(),scoremanager()}function startnewgame(){reset(),startgame()}function scoremanager(){gameobjects.player.lastscore=gameobjects.player.score,gameobjects.player.highscore<gameobjects.player.score&&(gameobjects.player.highscore=gameobjects.player.score)}function addscore(){gameobjects.player.score+=gameobjects.defaults.scoreunit,gameobjects.player.level<4&&(gameobjects.player.level+=.01)}function startlogic(){!function(){for(var e=0;e<gameobjects.level.tile.ground.count;e++){var t=Object.create(gameobjects.level.tile.ground);t.x=gameobjects.level.tile.ground.width*e,gameobjects.level.groundcontainer.push(t)}}(),function(){for(var e=0;e<gameobjects.level.tile.house.count;e++){var t=new houseConstructor;t.x=0<e?900*e:0,gameobjects.level.housecontainer.push(t)}}()}var delayedupdate=100;function updatelogic(){var e;delayedupdate<1?(gameobjects.player.score+=1,delayedupdate=100):--delayedupdate,e=gameobjects.level.tile.ground.y-gameobjects.player.height,gameobjects.player.jump.state&&(gameobjects.player.y-=3*gameobjects.player.jump.speedfactor,gameobjects.player.jump.speedfactor-=.2,gameobjects.player.y+gameobjects.player.height>=gameobjects.level.tile.ground.y&&(gameobjects.player.jump.state=!1)),gameobjects.player.y>e&&(gameobjects.player.y=e),function(){for(var e,t=gameobjects.level.groundcontainer.length,n=0;n<t;n++)gameobjects.level.groundcontainer[n].x<-gameobjects.level.tile.ground.width&&(e=gameobjects.level.groundcontainer[n],gameobjects.level.groundcontainer.splice(n,1),gameobjects.level.groundcontainer.push(e),gameobjects.level.groundcontainer[t-1].x=gameobjects.level.groundcontainer[t-2].x+gameobjects.level.tile.ground.width);for(var a=0;a<gameobjects.level.tile.ground.count;a++)gameobjects.level.groundcontainer[a].x-=gameobjects.player.speed+gameobjects.player.level}(),function(){for(var e,t=gameobjects.level.housecontainer.length,n=0;n<t;n++)gameobjects.level.housecontainer[n].x<-900&&(e=new houseConstructor,gameobjects.level.housecontainer.splice(n,1),gameobjects.level.housecontainer.push(e),e.x=gameobjects.level.housecontainer[gameobjects.level.housecontainer.length-2].x+900,1==random(1,10)&&gameobjects.level.collectablecontainer.push(new collectableConstructor(e)));for(var a=0;a<t;a++)gameobjects.level.housecontainer[a].x-=gameobjects.player.speed+gameobjects.player.level}(),function(){enemeyGenerator();for(var e=0;e<gameobjects.level.enemycontainer.length;e++)gameobjects.level.enemycontainer[e].x<-300?gameobjects.level.enemycontainer.splice(e,1):gameobjects.level.enemycontainer[e].damage&&checkIntersection(gameobjects.player,gameobjects.level.enemycontainer[e])&&(gameobjects.level.enemycontainer[e].damage=!1,sound.hit.play(),playerdamage());for(var t=0;t<gameobjects.level.enemycontainer.length;t++)gameobjects.level.enemycontainer[t].x-=gameobjects.level.enemycontainer[t].speed+gameobjects.player.speed+gameobjects.player.level,0<gameobjects.level.enemycontainer[t].attacktime&&--gameobjects.level.enemycontainer[t].attacktime}(),function(){for(var e=0;e<gameobjects.level.bulletcontainer.length;e++){if(gameobjects.level.bulletcontainer[e].x+=gameobjects.level.bulletcontainer[e].dir,gameobjects.level.bulletcontainer[e].x>GUI.canvas.width+100)return gameobjects.level.bulletcontainer.splice(e,1);for(var t=0;t<gameobjects.level.enemycontainer.length;t++)if(gameobjects.level.enemycontainer[t].damageble&&checkIntersection(gameobjects.level.bulletcontainer[e],gameobjects.level.enemycontainer[t])){addscore(),gameobjects.level.enemycontainer[e].fly||gameobjects.level.blastcontainer.push(new blastConstructor(gameobjects.level.enemycontainer[t])),gameobjects.level.bulletcontainer.splice(e,1),gameobjects.level.enemycontainer[t].health<1?(1==random(1,5)&&gameobjects.level.collectablecontainer.push(new collectableConstructor(gameobjects.level.enemycontainer[t])),gameobjects.level.enemycontainer.splice(t,1)):--gameobjects.level.enemycontainer[t].health;break}}for(var n=0;n<gameobjects.level.enemybulletcontainer.length;n++)gameobjects.level.enemybulletcontainer[n].x+=gameobjects.level.enemybulletcontainer[n].dir,checkIntersection(gameobjects.level.enemybulletcontainer[n],gameobjects.player)&&(gameobjects.level.enemybulletcontainer.splice(n,1),playerdamage(),gameobjects.level.blastcontainer.push(new blastConstructor(gameobjects.player)));for(var a,i=0;i<gameobjects.level.bombdropcontainer.length;i++)(s=gameobjects.level.bombdropcontainer[i]).y>gameobjects.level.tile.ground.y-s.height?(a={x:s.x-150,y:s.y,width:300,height:300},gameobjects.level.blastcontainer.push(new blastConstructor(a)),gameobjects.level.bombdropcontainer.splice(i,1),sound.blast.play()):checkIntersection(s,gameobjects.player)?(a={x:s.x-150,y:s.y,width:200,height:200},gameobjects.level.blastcontainer.push(new blastConstructor(a)),gameobjects.level.bombdropcontainer.splice(i,1),playerdamage()):(gameobjects.level.bombdropcontainer[i].x-=gameobjects.player.speed+gameobjects.player.level,gameobjects.level.bombdropcontainer[i].y+=.8*(gameobjects.player.speed+gameobjects.player.level));for(var o=0;o<gameobjects.level.blastcontainer.length;o++)gameobjects.level.blastcontainer[o].x-=gameobjects.player.speed+gameobjects.player.level;for(var s,r=0;r<gameobjects.level.collectablecontainer.length;r++)(s=gameobjects.level.collectablecontainer[r]).x>-s.width&&(s.x-=gameobjects.player.speed+gameobjects.player.level),checkIntersection(s,gameobjects.player)&&(s.collect(),gameobjects.level.collectablecontainer.splice(r,1))}()}function enemeyGenerator(){for(var e=0;e<gameobjects.enemy.count;e++)gameobjects.level.enemycontainer[e]||(gameobjects.level.enemycontainer[e]=new enemyConstructor)}function firebullet(){0<gameobjects.player.ammo?(gameobjects.level.bulletcontainer.push(new bulletConstructor(gameobjects.player,1)),--gameobjects.player.ammo):sound.noammo.play()}function jump(){gameobjects.player.jump.state||(gameobjects.player.jump.state=!0,gameobjects.player.jump.speedfactor=gameobjects.player.jump.height,sound.jump.play())}function enemyattack(e){e.attacktime=e.attacktimeinitial,e.x<GUI.canvas.width&&(4==e.type&&gameobjects.level.enemybulletcontainer.push(new bulletConstructor(e,-2)),3==e.type&&gameobjects.level.bombdropcontainer.push(new bombdropConstructor(e,1)))}function renderGame(){for(var e=0;e<gameobjects.level.housecontainer.length;e++){var t=gameobjects.level.housecontainer[e];context.drawImage(t.img,t.x,t.y,t.width,t.height)}for(var n=0;n<gameobjects.level.groundcontainer.length;n++){t=gameobjects.level.groundcontainer[n];context.drawImage(img.road,t.x,t.y-20,t.width,t.height+20)}!function(){gameobjects.player.animationframe+=.2,gameobjects.player.animationframe>gameobjects.player.framelength&&(gameobjects.player.animationframe=0);var e=[Math.floor(gameobjects.player.animationframe)];context.drawImage(img.pixel,gameobjects.player.x,gameobjects.player.y,gameobjects.player.width,gameobjects.player.height),context.drawImage(img.playerrun,gameobjects.player.tilex*e,0,gameobjects.player.tilex,gameobjects.player.tiley,gameobjects.player.x-gameobjects.player.imgpos.x,gameobjects.player.y-gameobjects.player.imgpos.y,gameobjects.player.width+gameobjects.player.imgpos.width,gameobjects.player.height+gameobjects.player.imgpos.height)}();for(var a=0;a<gameobjects.level.enemycontainer.length;a++){(t=gameobjects.level.enemycontainer[a]).animationframe+=.2,t.animationframe>t.img.length-1&&(t.animationframe=0);var i=t.img[Math.floor(t.animationframe)];context.drawImage(img[i],t.x-t.imgpos.x,t.y-t.imgpos.y,t.width+t.imgpos.width,t.height+t.imgpos.height)}for(var o=0;o<gameobjects.level.bulletcontainer.length;o++){t=gameobjects.level.bulletcontainer[o];context.drawImage(img.bullet,t.x,t.y,t.width,t.height)}for(var s=0;s<gameobjects.level.enemybulletcontainer.length;s++){t=gameobjects.level.enemybulletcontainer[s];context.drawImage(img.bullet1,t.x,t.y,t.width,t.height)}for(var r=0;r<gameobjects.level.bombdropcontainer.length;r++){t=gameobjects.level.bombdropcontainer[r];context.drawImage(img.bomb,t.x,t.y,t.width,t.height)}for(var c=0;c<gameobjects.level.blastcontainer.length;c++){t=gameobjects.level.blastcontainer[c];context.drawImage(img.smoke,t.tilex*Math.floor(t.frame),0,t.tilex,t.tiley,t.x,t.y,t.width,t.height),t.frame<=t.framemax?gameobjects.level.blastcontainer[c].frame+=.4:gameobjects.level.blastcontainer.splice(c,1)}for(var l=0;l<gameobjects.level.collectablecontainer.length;l++){t=gameobjects.level.collectablecontainer[l];context.drawImage(t.img,t.x,t.y,t.width,t.height)}}var spacing=.4;function renderUI(){context.drawImage(img.background,0,0,GUI.canvas.width,GUI.canvas.height),gameobjects.background.x>-gameobjects.background.width?gameobjects.background.x-=gameobjects.paralax.speed:gameobjects.background.x+=gameobjects.background.width,context.drawImage(img.bg,gameobjects.background.x,gameobjects.background.y,gameobjects.background.width,gameobjects.background.height),context.drawImage(img.bg,gameobjects.background.x+gameobjects.background.width,gameobjects.background.y,gameobjects.background.width,gameobjects.background.height);for(var e=GUI.decoration.bubbles,t=0;t<e.length;t++)context.drawImage(e[t].image,e[t].x,e[t].y,e[t].width,e[t].height);if(gameobjects.gamestate==gameobjects.states.loading)spritefont(spritefont1,"LOADING IS COMPLETE",60,spacing,780,400,!0),spritefont(spritefont1,"PRESS OK BUTTON",80,spacing,780,500,!0);else if(gameobjects.gamestate==gameobjects.states.home){context.drawImage(img.gamelogo,(GUI.canvas.width-GUI.gamelogo.width)/2,GUI.gamelogo.y,GUI.gamelogo.width,GUI.gamelogo.height),context.drawImage(img.button,GUI.playMenu.x-GUI.pointerPadding/2+GUI.btnCommon.x+200*homeScreenPointerPos,GUI.playMenu.y-GUI.pointerPadding/2+GUI.btnPlay.y,GUI.btnCommon.width+GUI.pointerPadding,GUI.btnCommon.height+GUI.pointerPadding);for(t=0;t<homeScreenButtonList.length;t++)context.drawImage(homeScreenButtonList[t],GUI.playMenu.x+GUI.btnCommon.x+200*t,GUI.playMenu.y+GUI.btnCommon.y,GUI.btnCommon.width,GUI.btnCommon.height)}else if(gameobjects.gamestate==gameobjects.states.pause){renderGame(),spritefont(spritefont1,"PAUSED",200,spacing,800,100,!0),context.drawImage(img.button,GUI.pauseMenu.x-GUI.pointerPadding/2+GUI.btnCommon.x+200*pauseScreenPointerPos,GUI.pauseMenu.y-GUI.pointerPadding/2+GUI.btnPlay.y,GUI.btnCommon.width+GUI.pointerPadding,GUI.btnCommon.height+GUI.pointerPadding);for(t=0;t<pauseScreenButtonList.length;t++)context.drawImage(pauseScreenButtonList[t],GUI.pauseMenu.x+GUI.btnCommon.x+200*t,GUI.pauseMenu.y+GUI.btnCommon.y,GUI.btnCommon.width,GUI.btnCommon.height)}else gameobjects.gamestate==gameobjects.states.play?(renderGame(),spritefont(spritefont1,"SCORE:"+gameobjects.player.score+"  HEALTH:"+gameobjects.player.health,60,spacing,800,100,!0)):gameobjects.gamestate==gameobjects.states.overfail?(spritefont(spritefont1,"GAME OVER",200,spacing,800,100,!0),spritefont(spritefont1,"HIGH SCORE:"+gameobjects.player.highscore,60,spacing,800,300,!0),spritefont(spritefont1,"YOUR SCORE:"+gameobjects.player.lastscore,60,spacing,800,400,!0),spritefont(spritefont1,"PRESS OK BUTTON TO GO BACK TO MAIN MENU",80,spacing,800,800,!0)):gameobjects.gamestate==gameobjects.states.info&&(spritefont(spritefont1,"CONTROLS",100,spacing,800,50,!0),spritefont(spritefont1,"PRESS UP BUTTON TO JUMP",60,spacing,800,150,!0),spritefont(spritefont1,"PRESS OK BUTTON TO PAUSE;RESUME THE GAME",60,spacing,800,250,!0),spritefont(spritefont1,"HOW TO PLAY",100,spacing,800,350,!0),spritefont(spritefont1,"JUMP OVER TO AVOID OBSTACLES         ",60,spacing,800,450,!0),context.drawImage(img.cart,1050,430,150,100),spritefont(spritefont1,"DODGE ENEMIES                    ",60,spacing,800,560,!0),context.drawImage(img.button,750,560,50,50),context.drawImage(img.enemy50,820,550,100,100),context.drawImage(img.seel,930,550,100,100),context.drawImage(img.crow4,1050,550,150,100),spritefont(spritefont1,"PICK COLLECTABLES       TO GAIN HEALTH",60,spacing,800,670,!0),context.drawImage(img.healthpickup,800,660,70,70),spritefont(spritefont1,"PRESS OK BUTTON TO GO BACK TO MAIN MENU",80,spacing,800,800,!0))}var canvas,context,lastgamestate="home";function Canvas2D(){canvas=document.getElementById("viewport"),context=canvas.getContext("2d")}window.addEventListener("blur",function(){lastgamestate=gameobjects.gamestate,gameobjects.gamestate=gameobjects.states.pause,sound.gamemusic.pause()}),window.addEventListener("focus",function(){gameobjects.gamestate=lastgamestate,sound.gamemusic.play()}),window.onload=function(){resizeCanvas(),setTimeout(function(){canvas.style.display="block",document.getElementById("loader").style.display="none",gameready()},2e3)},window.onresize=function(){resizeCanvas()},Canvas2D();var level={x:1,y:65,width:canvas.width-2,height:canvas.height-66};function resizeCanvas(){canvas.style.height=window.innerHeight+"px",canvas.style.width=window.innerWidth+"px"}var canvas2d=new Canvas2D;function resizeCanvasKeepAR(){widthToHeight=window.innerWidth/window.innerHeight,widthToHeightIdeal=1.6,state=widthToHeight>widthToHeightIdeal?"wider":"higher",widthToHeight>widthToHeightIdeal?(canvas.style.height=window.innerHeight+"px",canvas.style.width=window.innerHeight*widthToHeightIdeal+"px",canvas.style.marginLeft=(window.innerWidth-window.innerHeight*widthToHeightIdeal)/2+"px",canvas.style.marginTop="0px"):(canvas.style.width=window.innerWidth+"px",canvas.style.height=window.innerWidth/widthToHeightIdeal+"px",canvas.style.marginTop=(window.innerHeight-window.innerWidth/widthToHeightIdeal)/2+"px",canvas.style.marginLeft="0px")}function uiInit(){gameobjects.gamestate=gameobjects.states.loading,createHomeMenu(),raindropeffect(),startlogic()}function createHomeMenu(){createjs.Tween.get(GUI.gamelogo).play(createjs.Tween.get(GUI.gamelogo,{paused:!0,loop:!0}).to({width:GUI.gamelogo.width+20,height:GUI.gamelogo.height+20},500,createjs.Ease.quadOut).to({width:GUI.gamelogo.width,height:GUI.gamelogo.height},500,createjs.Ease.quadOut)),createjs.Tween.get(GUI.gamelogo).play(createjs.Tween.get(GUI.gamelogo,{paused:!0,loop:!0}).to({x:GUI.gamelogo.x-10},500,createjs.Ease.quadOut).to({x:GUI.gamelogo.x},500,createjs.Ease.quadOut)),GUI.playMenu.width=GUI.btnCommon.width*(homeScreenButtonList.length+1),GUI.playMenu.x=(canvas.width-GUI.playMenu.width)/2-8*homeScreenButtonList.length,GUI.pauseMenu.width=GUI.btnCommon.width*(pauseScreenButtonList.length+1),GUI.pauseMenu.x=(canvas.width-GUI.pauseMenu.width)/2-8*pauseScreenButtonList.length,createjs.Tween.get(GUI.btnCommon).play(createjs.Tween.get(GUI.btnCommon,{paused:!0,loop:!0}).to({height:GUI.btnCommon.height+5},500,createjs.Ease.quadOut).to({height:GUI.btnCommon.height},500,createjs.Ease.quadOut)),GUI.levelup.y=-400}function leftkeyPressedGUI(){gameobjects.gamestate==gameobjects.states.home&&(homeScreenPointerPos=movePointer(homeScreenPointerPos,homeScreenButtonList,!1)),gameobjects.gamestate==gameobjects.states.pause&&(pauseScreenPointerPos=movePointer(pauseScreenPointerPos,pauseScreenButtonList,!1))}function rightkeyPressedGUI(){gameobjects.gamestate==gameobjects.states.home&&(homeScreenPointerPos=movePointer(homeScreenPointerPos,homeScreenButtonList,!0)),gameobjects.gamestate==gameobjects.states.pause&&(pauseScreenPointerPos=movePointer(pauseScreenPointerPos,pauseScreenButtonList,!0))}function enterkeyPressedGUI(){sound.Button.play(),gameobjects.gamestate==gameobjects.states.loading&&(setTimeout(function(){gameobjects.gamestate=gameobjects.states.home},10),GUI.loading=!1,sound.gamemusic.loop=!0,sound.gamemusic.play()),gameobjects.gamestate==gameobjects.states.home?(0==homeScreenPointerPos&&(gameobjects.gamestate=gameobjects.states.play,startnewgame()),1==homeScreenPointerPos&&(gameobjects.gamestate=gameobjects.states.info,console.log("info")),2==homeScreenPointerPos&&(console.log("audio"),handleGlobalSound(),homeScreenButtonList[2]=globalsound?img.BtnSoundOn:img.BtnSoundOff,pauseScreenButtonList[3]=globalsound?img.BtnSoundOn:img.BtnSoundOff)):gameobjects.gamestate==gameobjects.states.info?gameobjects.gamestate=gameobjects.states.home:gameobjects.gamestate==gameobjects.states.play?(gameobjects.gamestate=gameobjects.states.pause,console.log("paused")):gameobjects.gamestate==gameobjects.states.pause?(0==pauseScreenPointerPos&&(gameobjects.gamestate=gameobjects.states.play),1==pauseScreenPointerPos&&(startnewgame(),gameobjects.gamestate=gameobjects.states.play),2==pauseScreenPointerPos&&(gameobjects.gamestate=gameobjects.states.home),3==pauseScreenPointerPos&&(console.log("audio"),handleGlobalSound(),homeScreenButtonList[2]=globalsound?img.BtnSoundOn:img.BtnSoundOff,pauseScreenButtonList[3]=globalsound?img.BtnSoundOn:img.BtnSoundOff)):gameobjects.gamestate==gameobjects.states.overpass?gameobjects.gamestate=gameobjects.states.play:gameobjects.gamestate==gameobjects.states.overfail&&(gameobjects.gamestate=gameobjects.states.home)}function downkeyPressedGUI(){}function upkeyPressedGUI(){}function movePointer(e,t,n){return n?e+1>=t.length?0:e+1:e-1<0?t.length-1:e-1}function characterIndex(e,t){for(var n=0;n<t.xindex;n++)for(var a=0;a<t.yindex;a++){var i=t.characterSet[a*t.xindex+n];if(t.lowercase){if(e==i)return{i:n,j:a}}else if(e.toLowerCase()==i.toLowerCase())return{i:n,j:a}}}function spritefont(e,t,n,a,i,o,s){s&&(i-=(t.length+1)*n*a/2);for(var r,c,l=e.imgResolution/e.xindex,g=l,u=0;u<t.length;u++)" "!=t[u]&&(r=characterIndex(t[u],e).i,c=characterIndex(t[u],e).j,context.drawImage(img[e.img],l*r,l*c,g,g,i+n*a*u,o,n,n))}this.createjs=this.createjs||{},createjs.extend=function(e,t){function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n},this.createjs=this.createjs||{},createjs.promote=function(e,t){var n=e.prototype,a=Object.getPrototypeOf&&Object.getPrototypeOf(n)||n.__proto__;if(a)for(var i in n[(t+="_")+"constructor"]=a.constructor,a)n.hasOwnProperty(i)&&"function"==typeof a[i]&&(n[t+i]=a[i]);return e},this.createjs=this.createjs||{},createjs.deprecate=function(t,n){return function(){var e="Deprecated property or method '"+n+"'. See docs for info.";return console&&(console.warn?console.warn(e):console.log(e)),t&&t.apply(this,arguments)}},this.createjs=this.createjs||{},function(){function e(e,t,n){this.type=e,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!t,this.cancelable=!!n,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var t=e.prototype;t.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},t.stopPropagation=function(){this.propagationStopped=!0},t.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},t.remove=function(){this.removed=!0},t.clone=function(){return new e(this.type,this.bubbles,this.cancelable)},t.set=function(e){for(var t in e)this[t]=e[t];return this},t.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=e}(),this.createjs=this.createjs||{},function(){function e(){this._listeners=null,this._captureListeners=null}var t=e.prototype;e.initialize=function(e){e.addEventListener=t.addEventListener,e.on=t.on,e.removeEventListener=e.off=t.removeEventListener,e.removeAllEventListeners=t.removeAllEventListeners,e.hasEventListener=t.hasEventListener,e.dispatchEvent=t.dispatchEvent,e._dispatchEvent=t._dispatchEvent,e.willTrigger=t.willTrigger},t.addEventListener=function(e,t,n){var a=n?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{},i=a[e];return i&&this.removeEventListener(e,t,n),(i=a[e])?i.push(t):a[e]=[t],t},t.on=function(e,t,n,a,i,o){return t.handleEvent&&(n=n||t,t=t.handleEvent),n=n||this,this.addEventListener(e,function(e){t.call(n,e,i),a&&e.remove()},o)},t.removeEventListener=function(e,t,n){var a=n?this._captureListeners:this._listeners;if(a){var i=a[e];if(i)for(var o=0,s=i.length;o<s;o++)if(i[o]==t){1==s?delete a[e]:i.splice(o,1);break}}},t.off=t.removeEventListener,t.removeAllEventListeners=function(e){e?(this._listeners&&delete this._listeners[e],this._captureListeners&&delete this._captureListeners[e]):this._listeners=this._captureListeners=null},t.dispatchEvent=function(e,t,n){if("string"==typeof e){var a=this._listeners;if(!(t||a&&a[e]))return!0;e=new createjs.Event(e,t,n)}else e.target&&e.clone&&(e=e.clone());try{e.target=this}catch(e){}if(e.bubbles&&this.parent){for(var i=this,o=[i];i.parent;)o.push(i=i.parent);for(var s=o.length,r=s-1;0<=r&&!e.propagationStopped;r--)o[r]._dispatchEvent(e,1+(0==r));for(r=1;r<s&&!e.propagationStopped;r++)o[r]._dispatchEvent(e,3)}else this._dispatchEvent(e,2);return!e.defaultPrevented},t.hasEventListener=function(e){var t=this._listeners,n=this._captureListeners;return!!(t&&t[e]||n&&n[e])},t.willTrigger=function(e){for(var t=this;t;){if(t.hasEventListener(e))return!0;t=t.parent}return!1},t.toString=function(){return"[EventDispatcher]"},t._dispatchEvent=function(e,t){var n,a,i=t<=2?this._captureListeners:this._listeners;if(e&&i&&(a=i[e.type])&&(n=a.length)){try{e.currentTarget=this}catch(e){}try{e.eventPhase=0|t}catch(e){}e.removed=!1,a=a.slice();for(var o=0;o<n&&!e.immediatePropagationStopped;o++){var s=a[o];s.handleEvent?s.handleEvent(e):s(e),e.removed&&(this.off(e.type,s,1==t),e.removed=!1)}}2===t&&this._dispatchEvent(e,2.1)},createjs.EventDispatcher=e}(),this.createjs=this.createjs||{},function(){function o(){throw"Ticker cannot be instantiated."}o.RAF_SYNCHED="synched",o.RAF="raf",o.TIMEOUT="timeout",o.timingMode=null,o.maxDelta=0,o.paused=!1,o.removeEventListener=null,o.removeAllEventListeners=null,o.dispatchEvent=null,o.hasEventListener=null,o._listeners=null,createjs.EventDispatcher.initialize(o),o._addEventListener=o.addEventListener,o.addEventListener=function(){return o._inited||o.init(),o._addEventListener.apply(o,arguments)},o._inited=!1,o._startTime=0,o._pausedTime=0,o._ticks=0,o._pausedTicks=0,o._interval=50,o._lastTime=0,o._times=null,o._tickTimes=null,o._timerId=null,o._raf=!0,o._setInterval=function(e){o._interval=e,o._inited&&o._setupTick()},o.setInterval=createjs.deprecate(o._setInterval,"Ticker.setInterval"),o._getInterval=function(){return o._interval},o.getInterval=createjs.deprecate(o._getInterval,"Ticker.getInterval"),o._setFPS=function(e){o._setInterval(1e3/e)},o.setFPS=createjs.deprecate(o._setFPS,"Ticker.setFPS"),o._getFPS=function(){return 1e3/o._interval},o.getFPS=createjs.deprecate(o._getFPS,"Ticker.getFPS");try{Object.defineProperties(o,{interval:{get:o._getInterval,set:o._setInterval},framerate:{get:o._getFPS,set:o._setFPS}})}catch(e){console.log(e)}o.init=function(){o._inited||(o._inited=!0,o._times=[],o._tickTimes=[],o._startTime=o._getTime(),o._times.push(o._lastTime=0),o.interval=o._interval)},o.reset=function(){var e;o._raf?(e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame)&&e(o._timerId):clearTimeout(o._timerId),o.removeAllEventListeners("tick"),o._timerId=o._times=o._tickTimes=null,o._startTime=o._lastTime=o._ticks=o._pausedTime=0,o._inited=!1},o.getMeasuredTickTime=function(e){var t=0,n=o._tickTimes;if(!n||n.length<1)return-1;e=Math.min(n.length,e||0|o._getFPS());for(var a=0;a<e;a++)t+=n[a];return t/e},o.getMeasuredFPS=function(e){var t=o._times;return!t||t.length<2?-1:(e=Math.min(t.length-1,e||0|o._getFPS()),1e3/((t[0]-t[e])/e))},o.getTime=function(e){return o._startTime?o._getTime()-(e?o._pausedTime:0):-1},o.getEventTime=function(e){return o._startTime?(o._lastTime||o._startTime)-(e?o._pausedTime:0):-1},o.getTicks=function(e){return o._ticks-(e?o._pausedTicks:0)},o._handleSynch=function(){o._timerId=null,o._setupTick(),o._getTime()-o._lastTime>=.97*(o._interval-1)&&o._tick()},o._handleRAF=function(){o._timerId=null,o._setupTick(),o._tick()},o._handleTimeout=function(){o._timerId=null,o._setupTick(),o._tick()},o._setupTick=function(){if(null==o._timerId){var e=o.timingMode;if(e==o.RAF_SYNCHED||e==o.RAF){var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(t)return o._timerId=t(e==o.RAF?o._handleRAF:o._handleSynch),void(o._raf=!0)}o._raf=!1,o._timerId=setTimeout(o._handleTimeout,o._interval)}},o._tick=function(){var e,t,n=o.paused,a=o._getTime(),i=a-o._lastTime;for(o._lastTime=a,o._ticks++,n&&(o._pausedTicks++,o._pausedTime+=i),o.hasEventListener("tick")&&(e=new createjs.Event("tick"),t=o.maxDelta,e.delta=t&&t<i?t:i,e.paused=n,e.time=a,e.runTime=a-o._pausedTime,o.dispatchEvent(e)),o._tickTimes.unshift(o._getTime()-a);100<o._tickTimes.length;)o._tickTimes.pop();for(o._times.unshift(a);100<o._times.length;)o._times.pop()};var e=window,t=e.performance.now||e.performance.mozNow||e.performance.msNow||e.performance.oNow||e.performance.webkitNow;o._getTime=function(){return(t&&t.call(e.performance)||(new Date).getTime())-o._startTime},createjs.Ticker=o}(),this.createjs=this.createjs||{},function(){function e(e){this.EventDispatcher_constructor(),this.ignoreGlobalPause=!1,this.loop=0,this.useTicks=!1,this.reversed=!1,this.bounce=!1,this.timeScale=1,this.duration=0,this.position=0,this.rawPosition=-1,this._paused=!0,this._next=null,this._prev=null,this._parent=null,this._labels=null,this._labelList=null,e&&(this.useTicks=!!e.useTicks,this.ignoreGlobalPause=!!e.ignoreGlobalPause,this.loop=!0===e.loop?-1:e.loop||0,this.reversed=!!e.reversed,this.bounce=!!e.bounce,this.timeScale=e.timeScale||1,e.onChange&&this.addEventListener("change",e.onChange),e.onComplete&&this.addEventListener("complete",e.onComplete))}var t=createjs.extend(e,createjs.EventDispatcher);t._setPaused=function(e){return createjs.Tween._register(this,e),this},t.setPaused=createjs.deprecate(t._setPaused,"AbstractTween.setPaused"),t._getPaused=function(){return this._paused},t.getPaused=createjs.deprecate(t._getPaused,"AbstactTween.getPaused"),t._getCurrentLabel=function(e){var t=this.getLabels();null==e&&(e=this.position);for(var n=0,a=t.length;n<a&&!(e<t[n].position);n++);return 0===n?null:t[n-1].label},t.getCurrentLabel=createjs.deprecate(t._getCurrentLabel,"AbstractTween.getCurrentLabel");try{Object.defineProperties(t,{paused:{set:t._setPaused,get:t._getPaused},currentLabel:{get:t._getCurrentLabel}})}catch(e){}t.advance=function(e,t){this.setPosition(this.rawPosition+e*this.timeScale,t)},t.setPosition=function(e,t,n,a){var i=this.duration,o=this.loop,s=this.rawPosition,r=0,c=0,l=!1;if(e<0&&(e=0),0===i){if(l=!0,-1!==s)return l}else{if(c=e-(r=e/i|0)*i,(l=-1!==o&&o*i+i<=e)&&(e=(c=i)*(r=o)+i),e===s)return l;!this.reversed!=!(this.bounce&&r%2)&&(c=i-c)}this.position=c,this.rawPosition=e,this._updatePosition(n,l),l&&(this.paused=!0),a&&a(this),t||this._runActions(s,e,n,!n&&-1===s),this.dispatchEvent("change"),l&&this.dispatchEvent("complete")},t.calculatePosition=function(e){var t=this.duration,n=this.loop,a=0,i=0;return 0===t?0:(-1!==n&&n*t+t<=e?(i=t,a=n):i=e<0?0:e-(a=e/t|0)*t,!this.reversed!=!(this.bounce&&a%2)?t-i:i)},t.getLabels=function(){var e=this._labelList;if(!e){e=this._labelList=[];var t,n=this._labels;for(t in n)e.push({label:t,position:n[t]});e.sort(function(e,t){return e.position-t.position})}return e},t.setLabels=function(e){this._labels=e,this._labelList=null},t.addLabel=function(e,t){this._labels||(this._labels={}),this._labels[e]=t;var n=this._labelList;if(n){for(var a=0,i=n.length;a<i&&!(t<n[a].position);a++);n.splice(a,0,{label:e,position:t})}},t.gotoAndPlay=function(e){this.paused=!1,this._goto(e)},t.gotoAndStop=function(e){this.paused=!0,this._goto(e)},t.resolve=function(e){var t=Number(e);return isNaN(t)&&(t=this._labels&&this._labels[e]),t},t.toString=function(){return"[AbstractTween]"},t.clone=function(){throw"AbstractTween can not be cloned."},t._init=function(e){e&&e.paused||(this.paused=!1),e&&null!=e.position&&this.setPosition(e.position)},t._updatePosition=function(){},t._goto=function(e){e=this.resolve(e);null!=e&&this.setPosition(e,!1,!0)},t._runActions=function(e,t,n,a){if(this._actionHead||this.tweens){var i,o,s,r,c=this.duration,l=this.reversed,g=this.bounce,u=this.loop;if(0===c?(i=o=s=r=0,l=g=!1):(s=e-(i=e/c|0)*c,r=t-(o=t/c|0)*c),-1!==u&&(u<o&&(r=c,o=u),u<i&&(s=c,i=u)),n)return this._runActionsRange(r,r,n,a);if(i!==o||s!==r||n||a){-1===i&&(i=s=0);var h=e<=t,m=i;do{var p=!l!=!(g&&m%2),d=m===i?s:h?0:c,b=m===o?r:h?c:0;if(p&&(d=c-d,b=c-b),(!g||m===i||d!==b)&&this._runActionsRange(d,b,n,a||m!==i&&!g))return!0}while(a=!1,h&&++m<=o||!h&&--m>=o)}}},t._runActionsRange=function(){},createjs.AbstractTween=createjs.promote(e,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){function b(e,t){this.AbstractTween_constructor(t),this.pluginData=null,this.target=e,this.passive=!1,this._stepHead=new i(null,0,0,{},null,!0),this._stepTail=this._stepHead,this._stepPosition=0,this._actionHead=null,this._actionTail=null,this._plugins=null,this._pluginIds=null,this._injected=null,t&&(this.pluginData=t.pluginData,t.override&&b.removeTweens(e)),this.pluginData||(this.pluginData={}),this._init(t)}function i(e,t,n,a,i,o){this.next=null,this.prev=e,this.t=t,this.d=n,this.props=a,this.ease=i,this.passive=o,this.index=e?e.index+1:0}function a(e,t,n,a,i){this.next=null,this.prev=e,this.t=t,this.d=0,this.scope=n,this.funct=a,this.params=i}var e=createjs.extend(b,createjs.AbstractTween);b.IGNORE={},b._tweens=[],b._plugins=null,b._tweenHead=null,b._tweenTail=null,b.get=function(e,t){return new b(e,t)},b.tick=function(e,t){for(var n=b._tweenHead;n;){var a=n._next;t&&!n.ignoreGlobalPause||n._paused||n.advance(n.useTicks?1:e),n=a}},b.handleEvent=function(e){"tick"===e.type&&this.tick(e.delta,e.paused)},b.removeTweens=function(e){if(e.tweenjs_count){for(var t=b._tweenHead;t;){var n=t._next;t.target===e&&b._register(t,!0),t=n}e.tweenjs_count=0}},b.removeAllTweens=function(){for(var e=b._tweenHead;e;){var t=e._next;e._paused=!0,e.target&&(e.target.tweenjs_count=0),e._next=e._prev=null,e=t}b._tweenHead=b._tweenTail=null},b.hasActiveTweens=function(e){return e?!!e.tweenjs_count:!!b._tweenHead},b._installPlugin=function(e){for(var t=e.priority=e.priority||0,n=b._plugins=b._plugins||[],a=0,i=n.length;a<i&&!(t<n[a].priority);a++);n.splice(a,0,e)},b._register=function(e,t){var n,a=e.target;!t&&e._paused?(a&&(a.tweenjs_count=a.tweenjs_count?a.tweenjs_count+1:1),(n=b._tweenTail)?(b._tweenTail=n._next=e)._prev=n:b._tweenHead=b._tweenTail=e,!b._inited&&createjs.Ticker&&(createjs.Ticker.addEventListener("tick",b),b._inited=!0)):t&&!e._paused&&(a&&a.tweenjs_count--,n=e._next,a=e._prev,n?n._prev=a:b._tweenTail=a,a?a._next=n:b._tweenHead=n,e._next=e._prev=null),e._paused=t},e.wait=function(e,t){return 0<e&&this._addStep(+e,this._stepTail.props,null,t),this},e.to=function(e,t,n){(null==t||t<0)&&(t=0);n=this._addStep(+t,null,n);return this._appendProps(e,n),this},e.label=function(e){return this.addLabel(e,this.duration),this},e.call=function(e,t,n){return this._addAction(n||this.target,e,t||[this])},e.set=function(e,t){return this._addAction(t||this.target,this._set,[e])},e.play=function(e){return this._addAction(e||this,this._set,[{paused:!1}])},e.pause=function(e){return this._addAction(e||this,this._set,[{paused:!0}])},e.w=e.wait,e.t=e.to,e.c=e.call,e.s=e.set,e.toString=function(){return"[Tween]"},e.clone=function(){throw"Tween can not be cloned."},e._addPlugin=function(e){var t=this._pluginIds||(this._pluginIds={}),n=e.ID;if(n&&!t[n]){t[n]=!0;for(var a=this._plugins||(this._plugins=[]),i=e.priority||0,o=0,s=a.length;o<s;o++)if(i<a[o].priority)return void a.splice(o,0,e);a.push(e)}},e._updatePosition=function(e,t){var n=this._stepHead.next,a=this.position,i=this.duration;if(this.target&&n){for(var o=n.next;o&&o.t<=a;)o=(n=n.next).next;i=t?0===i?1:a/i:(a-n.t)/n.d;this._updateTargetProps(n,i,t)}this._stepPosition=n?a-n.t:0},e._updateTargetProps=function(e,t,n){if(!(this.passive=!!e.passive)){var a,i,o,s,r=e.prev.props,c=e.props;(s=e.ease)&&(t=s(t,0,1,1));var l=this._plugins;e:for(var g in r){if(a=(i=r[g])!==(o=c[g])&&"number"==typeof i?i+(o-i)*t:1<=t?o:i,l)for(var u=0,h=l.length;u<h;u++){var m=l[u].change(this,e,g,a,t,n);if(m===b.IGNORE)continue e;void 0!==m&&(a=m)}this.target[g]=a}}},e._runActionsRange=function(e,t,n,a){var i=t<e,o=i?this._actionTail:this._actionHead,s=t,r=e;i&&(s=e,r=t);for(var c=this.position;o;){var l=o.t;if((l===t||r<l&&l<s||a&&l===e)&&(o.funct.apply(o.scope,o.params),c!==this.position))return!0;o=i?o.prev:o.next}},e._appendProps=function(e,t,n){var a,i,o,s,r=this._stepHead.props,c=this.target,l=b._plugins,g=t.prev,u=g.props,h=t.props||(t.props=this._cloneProps(u)),m={};for(a in e)if(e.hasOwnProperty(a)&&(m[a]=h[a]=e[a],void 0===r[a])){if(s=void 0,l)for(i=l.length-1;0<=i;i--)if(void 0!==(o=l[i].init(this,a,s))&&(s=o),s===b.IGNORE){delete h[a],delete m[a];break}s!==b.IGNORE&&(void 0===s&&(s=c[a]),u[a]=void 0===s?null:s)}for(a in m){o=e[a];for(var p,d=g;(p=d)&&(d=p.prev);)if(d.props!==p.props){if(void 0!==d.props[a])break;d.props[a]=u[a]}}if(!1!==n&&(l=this._plugins))for(i=l.length-1;0<=i;i--)l[i].step(this,t,m);(n=this._injected)&&(this._injected=null,this._appendProps(n,t,!1))},e._injectProp=function(e,t){(this._injected||(this._injected={}))[e]=t},e._addStep=function(e,t,n,a){a=new i(this._stepTail,this.duration,e,t,n,a||!1);return this.duration+=e,this._stepTail=this._stepTail.next=a},e._addAction=function(e,t,n){n=new a(this._actionTail,this.duration,e,t,n);return this._actionTail?this._actionTail.next=n:this._actionHead=n,this._actionTail=n,this},e._set=function(e){for(var t in e)this[t]=e[t]},e._cloneProps=function(e){var t,n={};for(t in e)n[t]=e[t];return n},createjs.Tween=createjs.promote(b,"AbstractTween")}(),this.createjs=this.createjs||{},function(){function e(e){var t,n;e instanceof Array||null==e&&1<arguments.length?(t=e,n=arguments[1],e=arguments[2]):e&&(t=e.tweens,n=e.labels),this.AbstractTween_constructor(e),this.tweens=[],t&&this.addTween.apply(this,t),this.setLabels(n),this._init(e)}var t=createjs.extend(e,createjs.AbstractTween);t.addTween=function(e){e._parent&&e._parent.removeTween(e);var t=arguments.length;if(1<t){for(var n=0;n<t;n++)this.addTween(arguments[n]);return arguments[t-1]}if(0===t)return null;this.tweens.push(e),e._parent=this,e.paused=!0;var a=e.duration;return 0<e.loop&&(a*=e.loop+1),a>this.duration&&(this.duration=a),0<=this.rawPosition&&e.setPosition(this.rawPosition),e},t.removeTween=function(e){var t=arguments.length;if(1<t){for(var n=!0,a=0;a<t;a++)n=n&&this.removeTween(arguments[a]);return n}if(0===t)return!0;for(var i=this.tweens,a=i.length;a--;)if(i[a]===e)return i.splice(a,1),e._parent=null,e.duration>=this.duration&&this.updateDuration(),!0;return!1},t.updateDuration=function(){for(var e=this.duration=0,t=this.tweens.length;e<t;e++){var n=this.tweens[e],a=n.duration;0<n.loop&&(a*=n.loop+1),a>this.duration&&(this.duration=a)}},t.toString=function(){return"[Timeline]"},t.clone=function(){throw"Timeline can not be cloned."},t._updatePosition=function(e){for(var t=this.position,n=0,a=this.tweens.length;n<a;n++)this.tweens[n].setPosition(t,!0,e)},t._runActionsRange=function(e,t,n,a){for(var i=this.position,o=0,s=this.tweens.length;o<s;o++)if(this.tweens[o]._runActions(e,t,n,a),i!==this.position)return!0},createjs.Timeline=createjs.promote(e,"AbstractTween")}(),this.createjs=this.createjs||{},function(){function t(){throw"Ease cannot be instantiated."}t.none=t.linear=function(e){return e},t.get=function(t){return t<-1?t=-1:1<t&&(t=1),function(e){return 0==t?e:t<0?e*(e*-t+1+t):e*((2-e)*t+(1-t))}},t.getPowIn=function(t){return function(e){return Math.pow(e,t)}},t.getPowOut=function(t){return function(e){return 1-Math.pow(1-e,t)}},t.getPowInOut=function(t){return function(e){return(e*=2)<1?.5*Math.pow(e,t):1-.5*Math.abs(Math.pow(2-e,t))}},t.quadIn=t.getPowIn(2),t.quadOut=t.getPowOut(2),t.quadInOut=t.getPowInOut(2),t.cubicIn=t.getPowIn(3),t.cubicOut=t.getPowOut(3),t.cubicInOut=t.getPowInOut(3),t.quartIn=t.getPowIn(4),t.quartOut=t.getPowOut(4),t.quartInOut=t.getPowInOut(4),t.quintIn=t.getPowIn(5),t.quintOut=t.getPowOut(5),t.quintInOut=t.getPowInOut(5),t.sineIn=function(e){return 1-Math.cos(e*Math.PI/2)},t.sineOut=function(e){return Math.sin(e*Math.PI/2)},t.sineInOut=function(e){return-.5*(Math.cos(Math.PI*e)-1)},t.backIn=(t.getBackIn=function(t){return function(e){return e*e*((t+1)*e-t)}})(1.7),t.backOut=(t.getBackOut=function(t){return function(e){return--e*e*((t+1)*e+t)+1}})(1.7),t.backInOut=(t.getBackInOut=function(t){return t*=1.525,function(e){return(e*=2)<1?.5*e*e*((t+1)*e-t):.5*((e-=2)*e*((t+1)*e+t)+2)}})(1.7),t.circIn=function(e){return-(Math.sqrt(1-e*e)-1)},t.circOut=function(e){return Math.sqrt(1- --e*e)},t.circInOut=function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},t.bounceIn=function(e){return 1-t.bounceOut(1-e)},t.bounceOut=function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},t.bounceInOut=function(e){return e<.5?.5*t.bounceIn(2*e):.5*t.bounceOut(2*e-1)+.5},t.elasticIn=(t.getElasticIn=function(n,a){var i=2*Math.PI;return function(e){if(0==e||1==e)return e;var t=a/i*Math.asin(1/n);return-(n*Math.pow(2,10*--e)*Math.sin((e-t)*i/a))}})(1,.3),t.elasticOut=(t.getElasticOut=function(n,a){var i=2*Math.PI;return function(e){if(0==e||1==e)return e;var t=a/i*Math.asin(1/n);return n*Math.pow(2,-10*e)*Math.sin((e-t)*i/a)+1}})(1,.3),t.elasticInOut=(t.getElasticInOut=function(n,a){var i=2*Math.PI;return function(e){var t=a/i*Math.asin(1/n);return(e*=2)<1?-.5*n*Math.pow(2,10*--e)*Math.sin((e-t)*i/a):n*Math.pow(2,-10*--e)*Math.sin((e-t)*i/a)*.5+1}})(1,.3*1.5),createjs.Ease=t}(),this.createjs=this.createjs||{},function(){function e(){throw"MotionGuidePlugin cannot be instantiated."}var w=e;w.priority=0,w.ID="MotionGuide",w.install=function(){return createjs.Tween._installPlugin(e),createjs.Tween.IGNORE},w.init=function(e,t){"guide"==t&&e._addPlugin(w)},w.step=function(e,t,n){for(var a in n)if("guide"===a){var i=t.props.guide,o=w._solveGuideData(n.guide,i);i.valid=!o;var s=i.endData;if(e._injectProp("x",s.x),e._injectProp("y",s.y),o||!i.orient)break;o=void 0===t.prev.props.rotation?e.target.rotation||0:t.prev.props.rotation;if(i.startOffsetRot=o-i.startData.rotation,"fixed"==i.orient)i.endAbsRot=s.rotation+i.startOffsetRot,i.deltaRotation=0;else{var s=void 0===n.rotation?e.target.rotation||0:n.rotation,r=s-i.endData.rotation-i.startOffsetRot,c=r%360;switch(i.endAbsRot=s,i.orient){case"auto":i.deltaRotation=r;break;case"cw":i.deltaRotation=(360+c)%360+360*Math.abs(r/360|0);break;case"ccw":i.deltaRotation=(c-360)%360+-360*Math.abs(r/360|0)}}e._injectProp("rotation",i.endAbsRot)}},w.change=function(e,t,n,a,i){var o=t.props.guide;if(o&&t.props!==t.prev.props&&o!==t.prev.props.guide)return"guide"===n&&!o.valid||"x"==n||"y"==n||"rotation"===n&&o.orient?createjs.Tween.IGNORE:void w._ratioToPositionData(i,o,e.target)},w.debug=function(e,t,n){e=e.guide||e;var a=w._findPathProblems(e);if(a&&console.error("MotionGuidePlugin Error found: \n"+a),!t)return a;var i=e.path,o=i.length;for(t.save(),t.lineCap="round",t.lineJoin="miter",t.beginPath(),t.moveTo(i[0],i[1]),l=2;l<o;l+=4)t.quadraticCurveTo(i[l],i[l+1],i[l+2],i[l+3]);t.strokeStyle="black",t.lineWidth=4.5,t.stroke(),t.strokeStyle="white",t.lineWidth=3,t.stroke(),t.closePath();var s=n.length;if(n&&s){var r={},c={};w._solveGuideData(e,r);for(var l=0;l<s;l++)r.orient="fixed",w._ratioToPositionData(n[l],r,c),t.beginPath(),t.moveTo(c.x,c.y),t.lineTo(c.x+9*Math.cos(.0174533*c.rotation),c.y+9*Math.sin(.0174533*c.rotation)),t.strokeStyle="black",t.lineWidth=4.5,t.stroke(),t.strokeStyle="red",t.lineWidth=3,t.stroke(),t.closePath()}return t.restore(),a},w._solveGuideData=function(e,t){if(j=w.debug(e))return j;var n=t.path=e.path;t.orient=e.orient,t.subLines=[],t.totalLength=0,t.startOffsetRot=0,t.deltaRotation=0,t.startData={ratio:0},t.endData={ratio:1},t.animSpan=1;for(var a,i,o,s,r=n.length,c={},l=n[0],g=n[1],u=2;u<r;u+=4){a=n[u],i=n[u+1],o=n[u+2],s=n[u+3];for(var h={weightings:[],estLength:0,portion:0},m=l,p=g,d=1;d<=10;d++){w._getParamsForCurve(l,g,a,i,o,s,d/10,!1,c);var b=c.x-m,f=c.y-p,v=Math.sqrt(b*b+f*f);h.weightings.push(v),h.estLength+=v,m=c.x,p=c.y}for(t.totalLength+=h.estLength,d=0;d<10;d++)v=h.estLength,h.weightings[d]=h.weightings[d]/v;t.subLines.push(h),l=o,g=s}v=t.totalLength;var y=t.subLines.length;for(u=0;u<y;u++)t.subLines[u].portion=t.subLines[u].estLength/v;var j=isNaN(e.start)?0:e.start,e=isNaN(e.end)?1:e.end;w._ratioToPositionData(j,t,t.startData),w._ratioToPositionData(e,t,t.endData),t.startData.ratio=j,t.endData.ratio=e,t.animSpan=t.endData.ratio-t.startData.ratio},w._ratioToPositionData=function(e,t,n){for(var a,i,o,s=t.subLines,r=0,c=e*t.animSpan+t.startData.ratio,l=s.length,g=0;g<l;g++){if(c<=r+(i=s[g].portion)){o=g;break}r+=i}void 0===o&&(o=l-1,r-=i);var u=s[o].weightings,h=i;for(l=u.length,g=0;g<l&&!(c<=r+(i=u[g]*h));g++)r+=i;o=4*o+2,a=g/10+(c-r)/i*.1;var m=t.path;return w._getParamsForCurve(m[o-2],m[o-1],m[o],m[o+1],m[o+2],m[o+3],a,t.orient,n),t.orient&&(.99999<=e&&e<=1.00001&&void 0!==t.endAbsRot?n.rotation=t.endAbsRot:n.rotation+=t.startOffsetRot+e*t.deltaRotation),n},w._getParamsForCurve=function(e,t,n,a,i,o,s,r,c){var l=1-s;c.x=l*l*e+2*l*s*n+s*s*i,c.y=l*l*t+2*l*s*a+s*s*o,r&&(c.rotation=57.2957795*Math.atan2((a-t)*l+(o-a)*s,(n-e)*l+(i-n)*s))},w._findPathProblems=function(e){var t=e.path,n=t&&t.length||0;if(n<6||(n-2)%4){var a="\tCannot parse 'path' array due to invalid number of entries in path. ";return a+="There should be an odd number of points, at least 3 points, and 2 entries per point (x & y). ",(a+="See 'CanvasRenderingContext2D.quadraticCurveTo' for details as 'path' models a quadratic bezier.\n\n")+("Only [ "+n+" ] values found. Expected: "+Math.max(4*Math.ceil((n-2)/4)+2,6))}for(var i=0;i<n;i++)if(isNaN(t[i]))return"All data in path array must be numeric";a=e.start;if(isNaN(a)&&void 0!==a)return"'start' out of bounds. Expected 0 to 1, got: "+a;a=e.end;if(isNaN(a)&&void 0!==a)return"'end' out of bounds. Expected 0 to 1, got: "+a;e=e.orient;return e&&"fixed"!=e&&"auto"!=e&&"cw"!=e&&"ccw"!=e?'Invalid orientation value. Expected ["fixed", "auto", "cw", "ccw", undefined], got: '+e:void 0},createjs.MotionGuidePlugin=e}(),this.createjs=this.createjs||{},function(){var e=createjs.TweenJS=createjs.TweenJS||{};e.version="1.0.0",e.buildDate="Thu, 14 Sep 2017 19:47:47 GMT"}();var spritefont1={characterSet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789.,:;?!-+=~&$%()/{}[]<>^*▲▼@",lowercase:!(String.prototype.toHHMMSS=function(){var e=parseInt(this,10),t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60),e=e-3600*t-60*n;return t<10&&(t="0"+t),n<10&&(n="0"+n),e<10&&(e="0"+e),t+":"+n+":"+e}),xindex:8,yindex:8,imgResolution:2048,img:"jfont"},spritefont2={characterSet:"ABCDEFGHIJK-LMNOP-QRSTU-VWXYZ---------------------------------------",lowercase:!1,xindex:6,yindex:6,imgResolution:600,img:"Font"};function randomBool(e,t){return 1==random(1,2)?e:t}function random(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function randomFloat(e,t){return parseFloat(Math.random()*(t-e)+e).toFixed(3)}function randomizeArray(e){for(var t=0;t<e.length;t++){var n=random(0,e.length-1),a=e[n],i=e[t];e[t]=a,e[n]=i}return e}function checkIntersection(e,t){return!(e.x>=t.x+t.width||e.x+e.width<=t.x||e.y>=t.y+t.height||e.y+e.height<=t.y)}function checkCircleIntersection(e,t){var n=e.x+e.width/2,a=e.y+e.height/2,i=t.x+t.width/2,o=t.y+t.height/2;return(e.width+t.width)/2>Math.sqrt((i-n)*(i-n)+(o-a)*(o-a))}