"use strict";var gameready=function(){function a(c){window.requestAnimationFrame(a),b(c),d()}function b(a){var b=(a-f)/1e3;f=a,updater(),c(b)}function c(a){.25<g&&(i=Math.round(h/g),g=0,h=0),g+=a,h++}function d(){renderer(),e()}function e(){context.fillStyle="#000000",context.font="12px Verdana"}var f=0,g=0,h=0,i=0;console.log("assets loaded"),setTimeout(function(){gameobjects.gamestate=gameobjects.states.loading},10),function(){initer(),a(0)}()};var gameobjects={defaults:{warnings:{x:600,y:500,width:600,height:100},worms:15,bombs:5},player:{x:-900,y:60,width:250,height:100,xdir:1,ydir:1,speed:200,health:100,healthMax:100,damagefactor:10,score:0,level:1,target:250,targetMin:250,targetTolevelFactor:150,timeMin:120,time:0,timeToLevelFactor:1,lastScore:0,HighScore:5e3,worms:0,bombs:0,collisionBox:{x:-900,y:60,width:320,height:100},firerate:10,fireinterval:0,extrafire:0,invincible:0},collectables:{x:0,y:60,width:50,height:50,speed:10,total:20,totalworms:10,totalbombs:3,maxCount:2},background:{x:0,y:0,width:900,height:1e3,speed:200},fish:{maxCount:10,morePerLevel:1,MinCount:4,caught:{x:0,y:0,width:140,height:80,rotation:90}},gamestate:"",states:{loading:"loading",home:"home",play:"play",pause:"pause",overpass:"overpass",overfail:"overfail",info:"info"},earth:{x:-500,y:0,width:1e3,height:1e3,health:100,damagefactor:10},images:["images/background.jpg","images/Spaceship_3.png","images/laser.png","images/earth.png","images/asteroids/Asteroids1.png","images/asteroids/Asteroids2.png","images/asteroids/Asteroids3.png","images/asteroids/Asteroids4.png","images/asteroids/Asteroids5.png","images/asteroids/Asteroids6.png","images/asteroids/Asteroids7.png","images/asteroids/Asteroids8.png","images/asteroids/Asteroids9.png","images/asteroids/Asteroids10.png","images/asteroids/Asteroids11.png","images/asteroids/Asteroids12.png","images/collectable1.png","images/collectable2.png","images/collectable3.png","images/collectable4.png","images/collectable4.png","images/collectable5.png","images/shield.png","images/Explosion_1/Explosion_1_0.png","images/Explosion_1/Explosion_1_1.png","images/Explosion_1/Explosion_1_2.png","images/Explosion_1/Explosion_1_3.png","images/Explosion_1/Explosion_1_4.png","images/Explosion_1/Explosion_1_5.png","images/Explosion_1/Explosion_1_6.png","images/Explosion_1/Explosion_1_7.png","images/Explosion_1/Explosion_1_8.png","images/gamelogo.png","images/Paused.png","images/LevelUp.png","images/gameover.png","images/Font.png","images/Frame2.png","images/Frame.png","images/BtnPlayOn.png","images/BtnSoundOn.png","images/BtnSoundOff.png","images/BtnRestartOn.png","images/BtnInfoOn.png","images/BtnExitOn.png","images/Button.png"],sounds:["media/gamemusic.ogg","media/bomb.m4a","media/explosion.m4a","media/bubble.m4a","media/caught.m4a","media/addbombs.m4a","media/levelup.m4a","media/gameover.m4a"]},GUI={canvas:{x:0,y:0,width:1600,height:1e3},homeScreen:{x:0,y:0,width:1600,height:1e3,xdir:1,ydir:1,speed:200},gamelogo:{x:350,y:50,width:900,height:400},playMenu:{x:0,y:500,width:400,height:400},pauseMenu:{x:0,y:500,width:400,height:400},btnPlay:{x:50,y:50,width:150,height:150},btnSound:{x:50,y:50,width:150,height:150},btnInfo:{x:50,y:50,width:150,height:150},btnCommon:{x:50,y:50,width:150,height:150},btnPointer:{x:50,y:50,width:150,height:150},levelup:{x:350,y:50,width:900,height:400},btnPadding:200,loading:!0},img=loadImages(gameobjects.images),sound=loadSound(gameobjects.sounds),homeScreenButtonList=[img.BtnPlayOn,img.BtnInfoOn,img.BtnSoundOn],pauseScreenButtonList=[img.BtnPlayOn,img.BtnRestartOn,img.BtnExitOn,img.BtnSoundOn],homeScreenPointerPos=0,pauseScreenPointerPos=0,globalsound=!0,loadcount=0,loadtotal=0,preloaded=!1;function loadImages(a){preloaded=!1;for(var b,c=[],d={},e=0;e<a.length;e++)b=new Image,b.onload=function(){loadcount+=1,loadcount==a.length&&(preloaded=!0)},b.src=a[e],c[e]=b,d[b.src.split("/")[b.src.split("/").length-1].split(".")[0]]=b;return d}function loadSound(a){console.log(a);for(var b,c=[],d={},e=0;e<a.length;e++)b=new Audio(a[e]),c[e]=b,d[b.src.split("/")[b.src.split("/").length-1].split(".")[0]]=b;return d}function handleGlobalSound(){globalsound=!globalsound,globalsound?sound.gamemusic.play():(sound.gamemusic.pause(),sound.gamemusic.currentTime=0),Object.keys(sound).forEach(function(a){sound[a].volume=globalsound?1:0})}function fishEntity(){this.type=random(1,12),this.xdir=-1,this.x=-1==this.xdir?1700:-100,this.y=random(350,800),this.height=20*this.type,this.width=20*this.type,this.speed=randomFloat(1,5),this.scorepoints=this.type,this.fishtype="Asteroids"+this.type}function collectableEntity(){this.x=1800,this.y=random(100,900),this.size=100,this.width=this.size,this.height=this.size,this.speed=2,this.type=random(1,5),this.image=img["collectable"+this.type],this.scorepoints=function(){return 2==this.type?100:3==this.type?100:5==this.type?500:void 0},sound.bubble.play()}function bombEntity(){this.x=gameobjects.player.x+gameobjects.player.width,this.y=gameobjects.player.y+gameobjects.player.height/2,this.width=50,this.height=20,this.speed=9,sound.bomb.play()}function blastEntity(a){this.width=400,this.height=400,this.frames=[img.Explosion_1_0,img.Explosion_1_1,img.Explosion_1_2,img.Explosion_1_3,img.Explosion_1_4,img.Explosion_1_5,img.Explosion_1_6,img.Explosion_1_7,img.Explosion_1_8],this.frameIndex=0,sound.explosion.play(),this.x=a.x+a.width/2-this.width/2,this.y=a.y+a.height/2-this.height/2}var lastgamestate="home";window.addEventListener("blur",function(){lastgamestate=gameobjects.gamestate,gameobjects.gamestate=gameobjects.states.pause,sound.gamemusic.pause()}),window.addEventListener("focus",function(){gameobjects.gamestate=lastgamestate,sound.gamemusic.play()}),window.onload=function(){resizeCanvas(),setTimeout(function(){canvas.style.display="block",document.getElementById("loader").style.display="none",gameready()},2e3)},window.onresize=function(){resizeCanvas()},window.onresize=function(){resizeCanvas()};var canvas,context;Canvas2D();function Canvas2D(){canvas=document.getElementById("viewport"),context=canvas.getContext("2d")}var level={x:1,y:65,width:canvas.width-2,height:canvas.height-66};function resizeCanvas(){canvas.style.height=window.innerHeight+"px",canvas.style.width=window.innerWidth+"px"}var canvas2d=new Canvas2D;function resizeCanvasKeepAR(){widthToHeight=window.innerWidth/window.innerHeight,widthToHeightIdeal=16/10,state=widthToHeight>widthToHeightIdeal?"wider":"higher",widthToHeight>widthToHeightIdeal?(canvas.style.height=window.innerHeight+"px",canvas.style.width=window.innerHeight*widthToHeightIdeal+"px",canvas.style.marginLeft=(window.innerWidth-window.innerHeight*widthToHeightIdeal)/2+"px",canvas.style.marginTop="0px"):(canvas.style.width=window.innerWidth+"px",canvas.style.height=window.innerWidth/widthToHeightIdeal+"px",canvas.style.marginTop=(window.innerHeight-window.innerWidth/widthToHeightIdeal)/2+"px",canvas.style.marginLeft="0px")}var scrollength=0,asteroids=[],collectables=[],bullets=[],blasts=[],keyState={},stopwatch=null;window.addEventListener("keydown",function(a){keyState[a.keyCode||a.which]=!0},!0),window.addEventListener("keyup",function(a){keyState[a.keyCode||a.which]=!1},!0),window.addEventListener("keyup",moveSomething,!1);function initer(){CreatBackground(),createHomeMenu()}function restartgame(){clearLastGame(),startGame()}function clearLastGame(){gameobjects.player.lastScore=gameobjects.player.score,gameobjects.player.HighScore=gameobjects.player.lastScore>gameobjects.player.HighScore?gameobjects.player.lastScore:gameobjects.player.HighScore,asteroids=[],collectables=[],bullets=[],gameobjects.player.x=-900}function startGame(){gameobjects.player.target=gameobjects.player.targetMin,gameobjects.player.health=100,gameobjects.earth.health=100,gameobjects.player.score=0,gameobjects.player.level=1,gameobjects.player.x=400,gameobjects.player.y=450,gameobjects.player.extrafire=0,gameobjects.player.invincible=0,bullets=[],createAsteroid(),gameobjects.player.worms=gameobjects.defaults.worms,gameobjects.player.bombs=gameobjects.defaults.bombs,gameobjects.player.time=gameobjects.player.timeMin,clearTimeout(stopwatch),stopwatch=stopwatchcounter()}function stopwatchcounter(){return setInterval(function(){onEachSecond()},1e3)}function onEachSecond(){gameobjects.gamestate==gameobjects.states.play&&(gameobjects.player.time-=1,stopwatchTick()),0==gameobjects.player.time&&clearTimeout(stopwatch)}function stopwatchTick(){gameobjects.player.score>=gameobjects.player.target&&(gameobjects.player.level+=1,gameobjects.player.target=gameobjects.player.targetMin+gameobjects.player.level*gameobjects.player.targetTolevelFactor,createjs.Tween.get(GUI.levelup).play(createjs.Tween.get(GUI.levelup,{paused:!0,loop:!1}).to({y:1400},0).to({y:-400},2e3,createjs.Ease.quadOut).to({y:1400},0)),sound.levelup.play());1==random(1,10+gameobjects.player.level)?createCollectables():null}function stopwatchTimeOut(){gameobjects.gamestate=gameobjects.states.overfail,gameobjects.player.level=1,sound.gameover.play(),clearLastGame()}function updater(){if(gameobjects.gamestate==gameobjects.states.play){backgroundScrolling();for(var a=0;a<asteroids.length;a++)asteroids[a].x+=asteroids[a].xdir*asteroids[a].speed,1800<asteroids[a].x&&(asteroids[a].x=-100),-200>asteroids[a].x&&(asteroids[a].x=1700);keyState[37]&&(gameobjects.player.x-=5),keyState[39]&&(gameobjects.player.x+=5),gameobjects.player.x+gameobjects.player.width>canvas.width&&(gameobjects.player.x=canvas.width-gameobjects.player.width),0>gameobjects.player.x&&(gameobjects.player.x=0),keyState[38]&&(gameobjects.player.y-=5),keyState[40]&&(gameobjects.player.y+=5),gameobjects.player.y+gameobjects.player.height>canvas.height&&(gameobjects.player.y=canvas.height-gameobjects.player.height),0>gameobjects.player.y&&(gameobjects.player.y=0);for(var b=0;b<collectables.length;b++)0>collectables[b].x?collectables.splice(b,1):(collectables[b].x-=collectables[b].speed,checkIntersection(gameobjects.player,collectables[b])&&(1==collectables[b].type&&(gameobjects.player.health=gameobjects.player.healthMax),2==collectables[b].type&&(gameobjects.player.extrafire=collectables[b].scorepoints()),3==collectables[b].type&&(gameobjects.player.invincible=collectables[b].scorepoints()),4==collectables[b].type&&(asteroids=[],createAsteroid()),5==collectables[b].type&&(gameobjects.player.score+=collectables[b].scorepoints()),sound.addbombs.play(),collectables.splice(b,1)));if(1<gameobjects.player.fireinterval){var c=new bombEntity;bullets.push(c),0<gameobjects.player.extrafire&&(gameobjects.player.extrafire-=1,c.height*=3,c.y-=c.height/3),gameobjects.player.fireinterval=0}gameobjects.player.fireinterval+=1/gameobjects.player.firerate;for(var d=0;d<bullets.length;d++)bullets[d].x+=bullets[d].speed,1800<bullets[d].x&&bullets.splice(d,1);enemyHit(),playerHit(),earthHit()}}function renderer(){renderGlobalElements(),renderUI()}function moveSomething(a){switch(a.keyCode){case 37:leftkeyPressedGUI();break;case 38:!gameobjects.gamestate==gameobjects.states.play&&upkeyPressedGUI();break;case 39:rightkeyPressedGUI();break;case 40:downkeyPressedGUI();break;case 32:break;case 13:enterkeyPressedGUI();}}function backgroundScrolling(){scrollength-=1,scrollength<-gameobjects.background.width&&(scrollength=0)}function CreatBackground(){gameobjects.player.x=-1e3,gameobjects.background.y=-2,gameobjects.background.x=level.x/2}function createAsteroid(){var a=gameobjects.fish.MinCount+gameobjects.fish.morePerLevel*(gameobjects.player.level-1);a=a>gameobjects.fish.maxCount?gameobjects.fish.maxCount:a;for(var b=0;b<a;b++)null==asteroids[b]&&(asteroids[b]=new fishEntity)}function createCollectables(){for(var a=0;a<gameobjects.collectables.maxCount;a++)if(null==collectables[a]){collectables[a]=new collectableEntity;break}}function playerHit(){for(var a=0;a<asteroids.length;a++)checkIntersection(asteroids[a],gameobjects.player)&&(0<gameobjects.player.health?(blasts.push(new blastEntity(asteroids[a])),asteroids.splice(a,1),0<gameobjects.player.invincible?gameobjects.player.invincible-=gameobjects.player.damagefactor:gameobjects.player.health-=gameobjects.player.damagefactor,createAsteroid()):(console.log("game over"),gameobjects.player.health=0,stopwatchTimeOut()))}function earthHit(){for(var a=0;a<asteroids.length;a++)checkCircleIntersection(asteroids[a],gameobjects.earth)&&(0<gameobjects.earth.health?(blasts.push(new blastEntity(asteroids[a])),asteroids.splice(a,1),gameobjects.earth.health-=gameobjects.earth.damagefactor,createAsteroid()):(console.log("game over"),gameobjects.earth.health=0,stopwatchTimeOut()))}function enemyHit(){for(var a=0;a<asteroids.length;a++)for(var b=0;b<bullets.length;b++)if(checkIntersection(bullets[b],asteroids[a])){gameobjects.player.score+=1*asteroids[a].scorepoints,blasts.push(new blastEntity(asteroids[a])),bullets.splice(b,1),asteroids.splice(a,1),createAsteroid();break}}function checkIntersection(a,b){return!(a.x>=b.x+b.width||a.x+a.width<=b.x||a.y>=b.y+b.height||a.y+a.height<=b.y)}function checkCircleIntersection(a,b){var c=a.x+a.width/2,d=a.y+a.height/2,e=b.x+b.width/2,f=b.y+b.height/2;return!!((a.width+b.width)/2>Math.sqrt((e-c)*(e-c)+(f-d)*(f-d)))}function setPositionToObject(a,b){a.x=b.x+b.width/2,a.y=b.y+b.height/2}function characterIndex(a){for(var b=0;b<spritefontproperties.xindex;b++)for(var d,e=0;e<spritefontproperties.yindex;e++)if(d=spritefontproperties.characterSet[e*spritefontproperties.xindex+b],a.toLowerCase()==d.toLowerCase()){var f={i:b,j:e};return f}}function spriteWrite(a,b,c,d,e){e&&(c-=a.length*b.size*b.spacing/2);for(var f=0;f<a.length;f++)if(" "!=a[f]){var g=characterIndex(a[f]).i,h=characterIndex(a[f]).j;context.drawImage(img.Font,b.charwidth*g,b.charwidth*h,b.stretchx,b.stretchx,c+b.size*b.spacing*f,d,b.size,b.size)}}var spritefontproperties={characterSet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789.,:;?!-+=~&$%()/{}[]<>^*\u25B2\u25BC@",xindex:8,yindex:8},fontSmall={x:0,y:0,width:50,height:80,size:30,stretchx:120,stretchy:120,spacing:.6,charwidth:128},fontMedium={x:0,y:0,width:50,height:80,size:40,stretchx:120,stretchy:120,spacing:.6,charwidth:128},fontBig={x:0,y:0,width:50,height:80,size:60,stretchx:120,stretchy:120,spacing:.6,charwidth:128};function renderUI(){if(gameobjects.gamestate==gameobjects.states.loading)spriteWrite("loading is complete",fontSmall,780,400,!0),spriteWrite("press ok button",fontBig,780,500,!0);else if(gameobjects.gamestate==gameobjects.states.home){context.drawImage(img.gamelogo,GUI.gamelogo.x,GUI.gamelogo.y,GUI.gamelogo.width,GUI.gamelogo.height),context.drawImage(img.Button,GUI.playMenu.x+GUI.btnCommon.x+200*homeScreenPointerPos,GUI.playMenu.y+150+GUI.btnPlay.y,GUI.btnPointer.width,GUI.btnPointer.height);for(var a=0;a<homeScreenButtonList.length;a++)context.drawImage(homeScreenButtonList[a],GUI.playMenu.x+GUI.btnCommon.x+200*a,GUI.playMenu.y+GUI.btnCommon.y,GUI.btnCommon.width,GUI.btnCommon.height)}else if(gameobjects.gamestate==gameobjects.states.pause){context.drawImage(img.Paused,GUI.gamelogo.x,GUI.gamelogo.y,GUI.gamelogo.width,GUI.gamelogo.height),context.drawImage(img.Button,GUI.pauseMenu.x+GUI.btnCommon.x+200*pauseScreenPointerPos,GUI.pauseMenu.y+150+GUI.btnPlay.y,GUI.btnPointer.width,GUI.btnPointer.height);for(var a=0;a<pauseScreenButtonList.length;a++)context.drawImage(pauseScreenButtonList[a],GUI.pauseMenu.x+GUI.btnCommon.x+200*a,GUI.pauseMenu.y+GUI.btnCommon.y,GUI.btnCommon.width,GUI.btnCommon.height)}else gameobjects.gamestate==gameobjects.states.play?(context.drawImage(img.Frame,0,100,1600,50),spriteWrite("TARGET:"+gameobjects.player.target+"    SCORE:"+gameobjects.player.score+"    LEVEL:"+gameobjects.player.level+"    HEALTH:"+gameobjects.player.health+"    EARTH:"+gameobjects.earth.health,fontSmall,800,110,!0),context.drawImage(img.LevelUp,GUI.levelup.x,GUI.levelup.y,GUI.levelup.width,GUI.levelup.height)):gameobjects.gamestate==gameobjects.states.overfail?(context.drawImage(img.gameover,GUI.gamelogo.x,GUI.gamelogo.y,GUI.gamelogo.width,GUI.gamelogo.height),spriteWrite("HIGH SCORE:"+gameobjects.player.HighScore,fontMedium,820,450,!0),spriteWrite("YOUR SCORE:"+gameobjects.player.lastScore,fontMedium,820,550,!0),spriteWrite("GAME IS OVER",fontMedium,820,650,!0),spriteWrite("PRESS OK BUTTON TO GO BACK TO MAIN MENU",fontSmall,820,750,!0)):gameobjects.gamestate==gameobjects.states.info&&(spriteWrite("PRESS ARROW BUTTONS TO MOVE THe SHIP",fontMedium,820,450,!0),spriteWrite("PRESS OK BUTTON TO PAUSE/RESUME THE GAME",fontMedium,820,550,!0),spriteWrite("PRESS OK BUTTON TO GO BACK TO MAIN MENU",fontSmall,820,750,!0))}function renderGlobalElements(){context.drawImage(img.background,scrollength,gameobjects.background.y,gameobjects.background.width,gameobjects.background.height),context.drawImage(img.background,gameobjects.background.width+scrollength,gameobjects.background.y,gameobjects.background.width,gameobjects.background.height),context.drawImage(img.background,2*gameobjects.background.width+scrollength,gameobjects.background.y,gameobjects.background.width,gameobjects.background.height),context.drawImage(img.earth,gameobjects.earth.x,gameobjects.earth.y,gameobjects.earth.width,gameobjects.earth.height),gameobjects.player.invincible&&context.drawImage(img.shield,gameobjects.player.x,gameobjects.player.y-(gameobjects.player.width-gameobjects.player.height)/2,gameobjects.player.width,gameobjects.player.width),context.drawImage(img.Spaceship_3,gameobjects.player.x,gameobjects.player.y,gameobjects.player.width,gameobjects.player.height);for(let a=0;a<asteroids.length;a++)context.drawImage(img[asteroids[a].fishtype],asteroids[a].x,asteroids[a].y,asteroids[a].width,asteroids[a].height);for(let a=0;a<collectables.length;a++)context.drawImage(collectables[a].image,collectables[a].x,collectables[a].y,collectables[a].size,collectables[a].size);for(let a=0;a<bullets.length;a++)context.drawImage(img.laser,bullets[a].x,bullets[a].y,bullets[a].width,bullets[a].height);for(let a=0;a<blasts.length;a++)blasts[a].frameIndex>blasts[a].frames.length-1?blasts.splice(a,1):(context.drawImage(blasts[a].frames[parseInt(blasts[a].frameIndex)],blasts[a].x,blasts[a].y,blasts[a].width,blasts[a].height),blasts[a].frameIndex+=.2)}this.createjs=this.createjs||{},createjs.extend=function(d,a){"use strict";function b(){this.constructor=d}return b.prototype=a.prototype,d.prototype=new b},this.createjs=this.createjs||{},createjs.promote=function(f,a){"use strict";var g=f.prototype,c=Object.getPrototypeOf&&Object.getPrototypeOf(g)||g.__proto__;if(c)for(var d in g[(a+="_")+"constructor"]=c.constructor,c)g.hasOwnProperty(d)&&"function"==typeof c[d]&&(g[a+d]=c[d]);return f},this.createjs=this.createjs||{},createjs.deprecate=function(d,a){"use strict";return function(){var b="Deprecated property or method '"+a+"'. See docs for info.";return console&&(console.warn?console.warn(b):console.log(b)),d&&d.apply(this,arguments)}},this.createjs=this.createjs||{},function(){"use strict";function b(d,a,b){this.type=d,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!a,this.cancelable=!!b,this.timeStamp=new Date().getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var c=b.prototype;c.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},c.stopPropagation=function(){this.propagationStopped=!0},c.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},c.remove=function(){this.removed=!0},c.clone=function(){return new b(this.type,this.bubbles,this.cancelable)},c.set=function(c){for(var a in c)this[a]=c[a];return this},c.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=b}(),this.createjs=this.createjs||{},function(){"use strict";function b(){this._listeners=null,this._captureListeners=null}var c=b.prototype;b.initialize=function(a){a.addEventListener=c.addEventListener,a.on=c.on,a.removeEventListener=a.off=c.removeEventListener,a.removeAllEventListeners=c.removeAllEventListeners,a.hasEventListener=c.hasEventListener,a.dispatchEvent=c.dispatchEvent,a._dispatchEvent=c._dispatchEvent,a.willTrigger=c.willTrigger},c.addEventListener=function(f,a,b){var c=b?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var d=c[f];return d&&this.removeEventListener(f,a,b),d=c[f],d?d.push(a):c[f]=[a],a},c.on=function(g,h,i,j,d,a){return h.handleEvent&&(i=i||h,h=h.handleEvent),i=i||this,this.addEventListener(g,function(b){h.call(i,b,d),j&&b.remove()},a)},c.removeEventListener=function(h,a,b){var c=b?this._captureListeners:this._listeners;if(c){var d=c[h];if(d)for(var e=0,i=d.length;i>e;e++)if(d[e]==a){1==i?delete c[h]:d.splice(e,1);break}}},c.off=c.removeEventListener,c.removeAllEventListeners=function(b){b?(this._listeners&&delete this._listeners[b],this._captureListeners&&delete this._captureListeners[b]):this._listeners=this._captureListeners=null},c.dispatchEvent=function(e,j,b){if("string"==typeof e){var c=this._listeners;if(!(j||c&&c[e]))return!0;e=new createjs.Event(e,j,b)}else e.target&&e.clone&&(e=e.clone());try{e.target=this}catch(a){}if(e.bubbles&&this.parent){for(var d=this,k=[d];d.parent;)k.push(d=d.parent);var g,l=k.length;for(g=l-1;0<=g&&!e.propagationStopped;g--)k[g]._dispatchEvent(e,1+(0==g));for(g=1;l>g&&!e.propagationStopped;g++)k[g]._dispatchEvent(e,3)}else this._dispatchEvent(e,2);return!e.defaultPrevented},c.hasEventListener=function(d){var a=this._listeners,b=this._captureListeners;return!!(a&&a[d]||b&&b[d])},c.willTrigger=function(c){for(var a=this;a;){if(a.hasEventListener(c))return!0;a=a.parent}return!1},c.toString=function(){return"[EventDispatcher]"},c._dispatchEvent=function(f,a){var b,i,j=2>=a?this._captureListeners:this._listeners;if(f&&j&&(i=j[f.type])&&(b=i.length)){try{f.currentTarget=this}catch(a){}try{f.eventPhase=0|a}catch(a){}f.removed=!1,i=i.slice();for(var e,k=0;b>k&&!f.immediatePropagationStopped;k++)e=i[k],e.handleEvent?e.handleEvent(f):e(f),f.removed&&(this.off(f.type,e,1==a),f.removed=!1)}2===a&&this._dispatchEvent(f,2.1)},createjs.EventDispatcher=b}(),this.createjs=this.createjs||{},function(){"use strict";function f(){throw"Ticker cannot be instantiated."}f.RAF_SYNCHED="synched",f.RAF="raf",f.TIMEOUT="timeout",f.timingMode=null,f.maxDelta=0,f.paused=!1,f.removeEventListener=null,f.removeAllEventListeners=null,f.dispatchEvent=null,f.hasEventListener=null,f._listeners=null,createjs.EventDispatcher.initialize(f),f._addEventListener=f.addEventListener,f.addEventListener=function(){return!f._inited&&f.init(),f._addEventListener.apply(f,arguments)},f._inited=!1,f._startTime=0,f._pausedTime=0,f._ticks=0,f._pausedTicks=0,f._interval=50,f._lastTime=0,f._times=null,f._tickTimes=null,f._timerId=null,f._raf=!0,f._setInterval=function(b){f._interval=b,f._inited&&f._setupTick()},f.setInterval=createjs.deprecate(f._setInterval,"Ticker.setInterval"),f._getInterval=function(){return f._interval},f.getInterval=createjs.deprecate(f._getInterval,"Ticker.getInterval"),f._setFPS=function(b){f._setInterval(1e3/b)},f.setFPS=createjs.deprecate(f._setFPS,"Ticker.setFPS"),f._getFPS=function(){return 1e3/f._interval},f.getFPS=createjs.deprecate(f._getFPS,"Ticker.getFPS");try{Object.defineProperties(f,{interval:{get:f._getInterval,set:f._setInterval},framerate:{get:f._getFPS,set:f._setFPS}})}catch(b){console.log(b)}f.init=function(){f._inited||(f._inited=!0,f._times=[],f._tickTimes=[],f._startTime=f._getTime(),f._times.push(f._lastTime=0),f.interval=f._interval)},f.reset=function(){if(f._raf){var b=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame;b&&b(f._timerId)}else clearTimeout(f._timerId);f.removeAllEventListeners("tick"),f._timerId=f._times=f._tickTimes=null,f._startTime=f._lastTime=f._ticks=f._pausedTime=0,f._inited=!1},f.getMeasuredTickTime=function(e){var g=0,h=f._tickTimes;if(!h||1>h.length)return-1;e=Math.min(h.length,e||0|f._getFPS());for(var c=0;e>c;c++)g+=h[c];return g/e},f.getMeasuredFPS=function(c){var d=f._times;return!d||2>d.length?-1:(c=Math.min(d.length-1,c||0|f._getFPS()),1e3/((d[0]-d[c])/c))},f.getTime=function(b){return f._startTime?f._getTime()-(b?f._pausedTime:0):-1},f.getEventTime=function(b){return f._startTime?(f._lastTime||f._startTime)-(b?f._pausedTime:0):-1},f.getTicks=function(b){return f._ticks-(b?f._pausedTicks:0)},f._handleSynch=function(){f._timerId=null,f._setupTick(),f._getTime()-f._lastTime>=.97*(f._interval-1)&&f._tick()},f._handleRAF=function(){f._timerId=null,f._setupTick(),f._tick()},f._handleTimeout=function(){f._timerId=null,f._setupTick(),f._tick()},f._setupTick=function(){if(null==f._timerId){var c=f.timingMode;if(c==f.RAF_SYNCHED||c==f.RAF){var a=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(a)return f._timerId=a(c==f.RAF?f._handleRAF:f._handleSynch),void(f._raf=!0)}f._raf=!1,f._timerId=setTimeout(f._handleTimeout,f._interval)}},f._tick=function(){var g=f.paused,a=f._getTime(),b=a-f._lastTime;if(f._lastTime=a,f._ticks++,g&&(f._pausedTicks++,f._pausedTime+=b),f.hasEventListener("tick")){var c=new createjs.Event("tick"),d=f.maxDelta;c.delta=d&&b>d?d:b,c.paused=g,c.time=a,c.runTime=a-f._pausedTime,f.dispatchEvent(c)}for(f._tickTimes.unshift(f._getTime()-a);100<f._tickTimes.length;)f._tickTimes.pop();for(f._times.unshift(a);100<f._times.length;)f._times.pop()};var g=window,a=g.performance.now||g.performance.mozNow||g.performance.msNow||g.performance.oNow||g.performance.webkitNow;f._getTime=function(){return(a&&a.call(g.performance)||new Date().getTime())-f._startTime},createjs.Ticker=f}(),this.createjs=this.createjs||{},function(){"use strict";function b(b){this.EventDispatcher_constructor(),this.ignoreGlobalPause=!1,this.loop=0,this.useTicks=!1,this.reversed=!1,this.bounce=!1,this.timeScale=1,this.duration=0,this.position=0,this.rawPosition=-1,this._paused=!0,this._next=null,this._prev=null,this._parent=null,this._labels=null,this._labelList=null,b&&(this.useTicks=!!b.useTicks,this.ignoreGlobalPause=!!b.ignoreGlobalPause,this.loop=!0===b.loop?-1:b.loop||0,this.reversed=!!b.reversed,this.bounce=!!b.bounce,this.timeScale=b.timeScale||1,b.onChange&&this.addEventListener("change",b.onChange),b.onComplete&&this.addEventListener("complete",b.onComplete))}var c=createjs.extend(b,createjs.EventDispatcher);c._setPaused=function(b){return createjs.Tween._register(this,b),this},c.setPaused=createjs.deprecate(c._setPaused,"AbstractTween.setPaused"),c._getPaused=function(){return this._paused},c.getPaused=createjs.deprecate(c._getPaused,"AbstactTween.getPaused"),c._getCurrentLabel=function(e){var f=this.getLabels();null==e&&(e=this.position);for(var b=0,g=f.length;g>b&&!(e<f[b].position);b++);return 0==b?null:f[b-1].label},c.getCurrentLabel=createjs.deprecate(c._getCurrentLabel,"AbstractTween.getCurrentLabel");try{Object.defineProperties(c,{paused:{set:c._setPaused,get:c._getPaused},currentLabel:{get:c._getCurrentLabel}})}catch(a){}c.advance=function(c,a){this.setPosition(this.rawPosition+c*this.timeScale,a)},c.setPosition=function(l,m,b,c){var d=this.duration,e=this.loop,f=this.rawPosition,g=0,n=0,o=!1;if(!(0>l&&(l=0),0===d)){if(g=0|l/d,n=l-g*d,o=-1!==e&&l>=e*d+d,o&&(l=(n=d)*(g=e)+d),l===f)return o;var p=!this.reversed!=!(this.bounce&&g%2);p&&(n=d-n)}else if(o=!0,-1!==f)return o;this.position=n,this.rawPosition=l,this._updatePosition(b,o),o&&(this.paused=!0),c&&c(this),m||this._runActions(f,l,b,!b&&-1===f),this.dispatchEvent("change"),o&&this.dispatchEvent("complete")},c.calculatePosition=function(g){var a=this.duration,b=this.loop,c=0,h=0;if(0===a)return 0;-1!==b&&g>=b*a+a?(h=a,c=b):0>g?h=0:(c=0|g/a,h=g-c*a);var i=!this.reversed!=!(this.bounce&&c%2);return i?a-h:h},c.getLabels=function(){var d=this._labelList;if(!d){d=this._labelList=[];var e=this._labels;for(var b in e)d.push({label:b,position:e[b]});d.sort(function(c,a){return c.position-a.position})}return d},c.setLabels=function(b){this._labels=b,this._labelList=null},c.addLabel=function(f,a){this._labels||(this._labels={}),this._labels[f]=a;var b=this._labelList;if(b){for(var c=0,g=b.length;g>c&&!(a<b[c].position);c++);b.splice(c,0,{label:f,position:a})}},c.gotoAndPlay=function(b){this.paused=!1,this._goto(b)},c.gotoAndStop=function(b){this.paused=!0,this._goto(b)},c.resolve=function(c){var a=+c;return isNaN(a)&&(a=this._labels&&this._labels[c]),a},c.toString=function(){return"[AbstractTween]"},c.clone=function(){throw"AbstractTween can not be cloned."},c._init=function(b){b&&b.paused||(this.paused=!1),b&&null!=b.position&&this.setPosition(b.position)},c._updatePosition=function(){},c._goto=function(c){var a=this.resolve(c);null!=a&&this.setPosition(a,!1,!0)},c._runActions=function(r,a,b,c){if(this._actionHead||this.tweens){var s,t,u,v,w=this.duration,i=this.reversed,x=this.bounce,y=this.loop;if(0===w?(s=t=u=v=0,i=x=!1):(s=0|r/w,t=0|a/w,u=r-s*w,v=a-t*w),-1!==y&&(t>y&&(v=w,t=y),s>y&&(u=w,s=y)),b)return this._runActionsRange(v,v,b,c);if(s!==t||u!==v||b||c){-1===s&&(s=u=0);var l=a>=r,m=s;do{var z=!i!=!(x&&m%2),o=m===s?u:l?0:w,A=m===t?v:l?w:0;if(z&&(o=w-o,A=w-A),x&&m!==s&&o===A);else if(this._runActionsRange(o,A,b,c||m!==s&&!x))return!0;c=!1}while(l&&++m<=t||!l&&--m>=t)}}},c._runActionsRange=function(){},createjs.AbstractTween=createjs.promote(b,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function r(a,b){this.AbstractTween_constructor(b),this.pluginData=null,this.target=a,this.passive=!1,this._stepHead=new s(null,0,0,{},null,!0),this._stepTail=this._stepHead,this._stepPosition=0,this._actionHead=null,this._actionTail=null,this._plugins=null,this._pluginIds=null,this._injected=null,b&&(this.pluginData=b.pluginData,b.override&&r.removeTweens(a)),this.pluginData||(this.pluginData={}),this._init(b)}function s(g,a,b,c,d,e){this.next=null,this.prev=g,this.t=a,this.d=b,this.props=c,this.ease=d,this.passive=e,this.index=g?g.index+1:0}function f(f,a,b,c,d){this.next=null,this.prev=f,this.t=a,this.d=0,this.scope=b,this.funct=c,this.params=d}var a=createjs.extend(r,createjs.AbstractTween);r.IGNORE={},r._tweens=[],r._plugins=null,r._tweenHead=null,r._tweenTail=null,r.get=function(c,a){return new r(c,a)},r.tick=function(e,a){for(var b,f=r._tweenHead;f;)b=f._next,a&&!f.ignoreGlobalPause||f._paused||f.advance(f.useTicks?1:e),f=b},r.handleEvent=function(b){"tick"===b.type&&this.tick(b.delta,b.paused)},r.removeTweens=function(d){if(d.tweenjs_count){for(var a,e=r._tweenHead;e;)a=e._next,e.target===d&&r._register(e,!0),e=a;d.tweenjs_count=0}},r.removeAllTweens=function(){for(var c,d=r._tweenHead;d;)c=d._next,d._paused=!0,d.target&&(d.target.tweenjs_count=0),d._next=d._prev=null,d=c;r._tweenHead=r._tweenTail=null},r.hasActiveTweens=function(b){return b?!!b.tweenjs_count:!!r._tweenHead},r._installPlugin=function(f){for(var a=f.priority=f.priority||0,b=r._plugins=r._plugins||[],c=0,g=b.length;g>c&&!(a<b[c].priority);c++);b.splice(c,0,f)},r._register=function(g,a){var b=g.target;if(!a&&g._paused){b&&(b.tweenjs_count=b.tweenjs_count?b.tweenjs_count+1:1);var c=r._tweenTail;c?(r._tweenTail=c._next=g,g._prev=c):r._tweenHead=r._tweenTail=g,!r._inited&&createjs.Ticker&&(createjs.Ticker.addEventListener("tick",r),r._inited=!0)}else if(a&&!g._paused){b&&b.tweenjs_count--;var d=g._next,e=g._prev;d?d._prev=e:r._tweenTail=e,e?e._next=d:r._tweenHead=d,g._next=g._prev=null}g._paused=a},a.wait=function(c,a){return 0<c&&this._addStep(+c,this._stepTail.props,null,a),this},a.to=function(e,a,f){(null==a||0>a)&&(a=0);var c=this._addStep(+a,null,f);return this._appendProps(e,c),this},a.label=function(b){return this.addLabel(b,this.duration),this},a.call=function(d,a,b){return this._addAction(b||this.target,d,a||[this])},a.set=function(c,a){return this._addAction(a||this.target,this._set,[c])},a.play=function(b){return this._addAction(b||this,this._set,[{paused:!1}])},a.pause=function(b){return this._addAction(b||this,this._set,[{paused:!0}])},a.w=a.wait,a.t=a.to,a.c=a.call,a.s=a.set,a.toString=function(){return"[Tween]"},a.clone=function(){throw"Tween can not be cloned."},a._addPlugin=function(h){var a=this._pluginIds||(this._pluginIds={}),b=h.ID;if(b&&!a[b]){a[b]=!0;for(var c=this._plugins||(this._plugins=[]),d=h.priority||0,e=0,i=c.length;i>e;e++)if(d<c[e].priority)return void c.splice(e,0,h);c.push(h)}},a._updatePosition=function(h,a){var b=this._stepHead.next,i=this.position,d=this.duration;if(this.target&&b){for(var e=b.next;e&&e.t<=i;)b=b.next,e=b.next;var j=a?0===d?1:i/d:(i-b.t)/b.d;this._updateTargetProps(b,j,a)}this._stepPosition=b?i-b.t:0},a._updateTargetProps=function(o,a,p){if(!(this.passive=!!o.passive)){var c,q,s,t,u=o.prev.props,h=o.props;(t=o.ease)&&(a=t(a,0,1,1));var i=this._plugins;a:for(var j in u){if(q=u[j],s=h[j],c=q!==s&&"number"==typeof q?q+(s-q)*a:1<=a?s:q,i)for(var k,v=0,w=i.length;w>v;v++){if(k=i[v].change(this,o,j,c,a,p),k===r.IGNORE)continue a;void 0!==k&&(c=k)}this.target[j]=c}}},a._runActionsRange=function(k,a,b,c){var d=k>a,e=d?this._actionTail:this._actionHead,l=a,m=k;d&&(l=k,m=a);for(var n,o=this.position;e;){if(n=e.t,(n===a||n>m&&l>n||c&&n===k)&&(e.funct.apply(e.scope,e.params),o!==this.position))return!0;e=d?e.prev:e.next}},a._appendProps=function(s,a,b){var c,t,u,v,w,x=this._stepHead.props,i=this.target,j=r._plugins,y=a.prev,l=y.props,m=a.props||(a.props=this._cloneProps(l)),n={};for(c in s)if(s.hasOwnProperty(c)&&(n[c]=m[c]=s[c],void 0===x[c])){if(v=void 0,j)for(t=j.length-1;0<=t;t--)if(u=j[t].init(this,c,v),void 0!==u&&(v=u),v===r.IGNORE){delete m[c],delete n[c];break}v!==r.IGNORE&&(void 0===v&&(v=i[c]),l[c]=void 0===v?null:v)}for(c in n){u=s[c];for(var o,z=y;(o=z)&&(z=o.prev);)if(z.props!==o.props){if(void 0!==z.props[c])break;z.props[c]=l[c]}}if(!1!==b&&(j=this._plugins))for(t=j.length-1;0<=t;t--)j[t].step(this,a,n);(w=this._injected)&&(this._injected=null,this._appendProps(w,a,!1))},a._injectProp=function(d,a){var b=this._injected||(this._injected={});b[d]=a},a._addStep=function(a,b,c,d){var e=new s(this._stepTail,this.duration,a,b,c,d||!1);return this.duration+=a,this._stepTail=this._stepTail.next=e},a._addAction=function(b,a,c){var d=new f(this._actionTail,this.duration,b,a,c);return this._actionTail?this._actionTail.next=d:this._actionHead=d,this._actionTail=d,this},a._set=function(c){for(var a in c)this[a]=c[a]},a._cloneProps=function(d){var a={};for(var b in d)a[b]=d[b];return a},createjs.Tween=createjs.promote(r,"AbstractTween")}(),this.createjs=this.createjs||{},function(){"use strict";function b(d){var e,f;d instanceof Array||null==d&&1<arguments.length?(e=d,f=arguments[1],d=arguments[2]):d&&(e=d.tweens,f=d.labels),this.AbstractTween_constructor(d),this.tweens=[],e&&this.addTween.apply(this,e),this.setLabels(f),this._init(d)}var c=createjs.extend(b,createjs.AbstractTween);c.addTween=function(e){e._parent&&e._parent.removeTween(e);var a=arguments.length;if(1<a){for(var b=0;a>b;b++)this.addTween(arguments[b]);return arguments[a-1]}if(0===a)return null;this.tweens.push(e),e._parent=this,e.paused=!0;var f=e.duration;return 0<e.loop&&(f*=e.loop+1),f>this.duration&&(this.duration=f),0<=this.rawPosition&&e.setPosition(this.rawPosition),e},c.removeTween=function(f){var a=arguments.length;if(1<a){for(var b=!0,g=0;a>g;g++)b=b&&this.removeTween(arguments[g]);return b}if(0===a)return!0;for(var h=this.tweens,g=h.length;g--;)if(h[g]===f)return h.splice(g,1),f._parent=null,f.duration>=this.duration&&this.updateDuration(),!0;return!1},c.updateDuration=function(){this.duration=0;for(var e=0,f=this.tweens.length;f>e;e++){var b=this.tweens[e],c=b.duration;0<b.loop&&(c*=b.loop+1),c>this.duration&&(this.duration=c)}},c.toString=function(){return"[Timeline]"},c.clone=function(){throw"Timeline can not be cloned."},c._updatePosition=function(e){for(var a=this.position,b=0,f=this.tweens.length;f>b;b++)this.tweens[b].setPosition(a,!0,e)},c._runActionsRange=function(h,a,b,c){for(var d=this.position,e=0,i=this.tweens.length;i>e;e++)if(this.tweens[e]._runActions(h,a,b,c),d!==this.position)return!0},createjs.Timeline=createjs.promote(b,"AbstractTween")}(),this.createjs=this.createjs||{},function(){"use strict";function b(){throw"Ease cannot be instantiated."}b.linear=function(b){return b},b.none=b.linear,b.get=function(c){return-1>c?c=-1:1<c&&(c=1),function(a){return 0==c?a:0>c?a*(a*-c+1+c):a*((2-a)*c+(1-c))}},b.getPowIn=function(c){return function(a){return Math.pow(a,c)}},b.getPowOut=function(c){return function(a){return 1-Math.pow(1-a,c)}},b.getPowInOut=function(c){return function(a){return 1>(a*=2)?.5*Math.pow(a,c):1-.5*Math.abs(Math.pow(2-a,c))}},b.quadIn=b.getPowIn(2),b.quadOut=b.getPowOut(2),b.quadInOut=b.getPowInOut(2),b.cubicIn=b.getPowIn(3),b.cubicOut=b.getPowOut(3),b.cubicInOut=b.getPowInOut(3),b.quartIn=b.getPowIn(4),b.quartOut=b.getPowOut(4),b.quartInOut=b.getPowInOut(4),b.quintIn=b.getPowIn(5),b.quintOut=b.getPowOut(5),b.quintInOut=b.getPowInOut(5),b.sineIn=function(b){return 1-Math.cos(b*Math.PI/2)},b.sineOut=function(b){return Math.sin(b*Math.PI/2)},b.sineInOut=function(b){return-.5*(Math.cos(Math.PI*b)-1)},b.getBackIn=function(c){return function(a){return a*a*((c+1)*a-c)}},b.backIn=b.getBackIn(1.7),b.getBackOut=function(c){return function(a){return--a*a*((c+1)*a+c)+1}},b.backOut=b.getBackOut(1.7),b.getBackInOut=function(c){return c*=1.525,function(a){return 1>(a*=2)?.5*a*a*((c+1)*a-c):.5*((a-=2)*a*((c+1)*a+c)+2)}},b.backInOut=b.getBackInOut(1.7),b.circIn=function(b){return-(Math.sqrt(1-b*b)-1)},b.circOut=function(b){return Math.sqrt(1- --b*b)},b.circInOut=function(b){return 1>(b*=2)?-.5*(Math.sqrt(1-b*b)-1):.5*(Math.sqrt(1-(b-=2)*b)+1)},b.bounceIn=function(c){return 1-b.bounceOut(1-c)},b.bounceOut=function(b){return 1/2.75>b?7.5625*b*b:2/2.75>b?7.5625*(b-=1.5/2.75)*b+.75:2.5/2.75>b?7.5625*(b-=2.25/2.75)*b+.9375:7.5625*(b-=2.625/2.75)*b+.984375},b.bounceInOut=function(c){return .5>c?.5*b.bounceIn(2*c):.5*b.bounceOut(2*c-1)+.5},b.getElasticIn=function(f,a){var b=2*Math.PI;return function(c){if(0==c||1==c)return c;var g=a/b*Math.asin(1/f);return-(f*Math.pow(2,10*(c-=1))*Math.sin((c-g)*b/a))}},b.elasticIn=b.getElasticIn(1,.3),b.getElasticOut=function(f,a){var b=2*Math.PI;return function(c){if(0==c||1==c)return c;var d=a/b*Math.asin(1/f);return f*Math.pow(2,-10*c)*Math.sin((c-d)*b/a)+1}},b.elasticOut=b.getElasticOut(1,.3),b.getElasticInOut=function(f,a){var b=2*Math.PI;return function(c){var g=a/b*Math.asin(1/f);return 1>(c*=2)?-.5*f*Math.pow(2,10*(c-=1))*Math.sin((c-g)*b/a):.5*(f*Math.pow(2,-10*(c-=1))*Math.sin((c-g)*b/a))+1}},b.elasticInOut=b.getElasticInOut(1,1.5*.3),createjs.Ease=b}(),this.createjs=this.createjs||{},function(){"use strict";function b(){throw"MotionGuidePlugin cannot be instantiated."}var z=b;z.priority=0,z.ID="MotionGuide",z.install=function(){return createjs.Tween._installPlugin(b),createjs.Tween.IGNORE},z.init=function(a,b){"guide"==b&&a._addPlugin(z)},z.step=function(a,b,c){for(var d in c)if("guide"==d){var e=b.props.guide,f=z._solveGuideData(c.guide,e);e.valid=!f;var g=e.endData;if(a._injectProp("x",g.x),a._injectProp("y",g.y),f||!e.orient)break;var h=void 0===b.prev.props.rotation?a.target.rotation||0:b.prev.props.rotation;if(e.startOffsetRot=h-e.startData.rotation,"fixed"==e.orient)e.endAbsRot=g.rotation+e.startOffsetRot,e.deltaRotation=0;else{var i=void 0===c.rotation?a.target.rotation||0:c.rotation,j=i-e.endData.rotation-e.startOffsetRot,k=j%360;switch(e.endAbsRot=i,e.orient){case"auto":e.deltaRotation=j;break;case"cw":e.deltaRotation=(k+360)%360+360*Math.abs(0|j/360);break;case"ccw":e.deltaRotation=(k-360)%360+-360*Math.abs(0|j/360);}}a._injectProp("rotation",e.endAbsRot)}},z.change=function(a,b,c,d,e){var f=b.props.guide;if(f&&b.props!==b.prev.props&&f!==b.prev.props.guide)return"guide"===c&&!f.valid||"x"==c||"y"==c||"rotation"===c&&f.orient?createjs.Tween.IGNORE:void z._ratioToPositionData(e,f,a.target)},z.debug=function(a,i,c){a=a.guide||a;var d=z._findPathProblems(a);if(d&&console.error("MotionGuidePlugin Error found: \n"+d),!i)return d;var e,j=a.path,g=j.length;for(i.save(),i.lineCap="round",i.lineJoin="miter",i.beginPath(),i.moveTo(j[0],j[1]),e=2;g>e;e+=4)i.quadraticCurveTo(j[e],j[e+1],j[e+2],j[e+3]);i.strokeStyle="black",i.lineWidth=1.5*3,i.stroke(),i.strokeStyle="white",i.lineWidth=3,i.stroke(),i.closePath();var h=c.length;if(c&&h){var k={},l={};z._solveGuideData(a,k);for(var e=0;h>e;e++)k.orient="fixed",z._ratioToPositionData(c[e],k,l),i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(l.x+Math.cos(.0174533*l.rotation)*9,l.y+Math.sin(.0174533*l.rotation)*9),i.strokeStyle="black",i.lineWidth=1.5*3,i.stroke(),i.strokeStyle="red",i.lineWidth=3,i.stroke(),i.closePath()}return i.restore(),d},z._solveGuideData=function(a,b){var c;if(c=z.debug(a))return c;{var p=b.path=a.path;b.orient=a.orient}b.subLines=[],b.totalLength=0,b.startOffsetRot=0,b.deltaRotation=0,b.startData={ratio:0},b.endData={ratio:1},b.animSpan=1;var e,A,B,C,D,E,F,G,H,I=p.length,o={};for(e=p[0],A=p[1],F=2;I>F;F+=4){B=p[F],C=p[F+1],D=p[F+2],E=p[F+3];var q={weightings:[],estLength:0,portion:0},r=e,J=A;for(G=1;10>=G;G++){z._getParamsForCurve(e,A,B,C,D,E,G/10,!1,o);var K=o.x-r,u=o.y-J;H=Math.sqrt(K*K+u*u),q.weightings.push(H),q.estLength+=H,r=o.x,J=o.y}for(b.totalLength+=q.estLength,G=0;10>G;G++)H=q.estLength,q.weightings[G]/=H;b.subLines.push(q),e=D,A=E}H=b.totalLength;var v=b.subLines.length;for(F=0;v>F;F++)b.subLines[F].portion=b.subLines[F].estLength/H;var w=isNaN(a.start)?0:a.start,x=isNaN(a.end)?1:a.end;z._ratioToPositionData(w,b,b.startData),z._ratioToPositionData(x,b,b.endData),b.startData.ratio=w,b.endData.ratio=x,b.animSpan=b.endData.ratio-b.startData.ratio},z._ratioToPositionData=function(a,b,c){var d,l,q,r,s,t=b.subLines,j=0,u=a*b.animSpan+b.startData.ratio;for(l=t.length,d=0;l>d;d++){if(r=t[d].portion,j+r>=u){s=d;break}j+=r}void 0===s&&(s=l-1,j-=r);var m=t[s].weightings,n=r;for(l=m.length,d=0;l>d&&(r=m[d]*n,!(j+r>=u));d++)j+=r;s=4*s+2,q=d/10+(u-j)/r*(1/10);var o=b.path;return z._getParamsForCurve(o[s-2],o[s-1],o[s],o[s+1],o[s+2],o[s+3],q,b.orient,c),b.orient&&(.99999<=a&&1.00001>=a&&void 0!==b.endAbsRot?c.rotation=b.endAbsRot:c.rotation+=b.startOffsetRot+a*b.deltaRotation),c},z._getParamsForCurve=function(k,a,b,c,d,e,f,g,h){var i=1-f;h.x=i*i*k+2*i*f*b+f*f*d,h.y=i*i*a+2*i*f*c+f*f*e,g&&(h.rotation=57.2957795*Math.atan2((c-a)*i+(e-c)*f,(b-k)*i+(d-b)*f))},z._findPathProblems=function(i){var a=i.path,b=a&&a.length||0;if(6>b||(b-2)%4){var c="\tCannot parse 'path' array due to invalid number of entries in path. ";return c+="There should be an odd number of points, at least 3 points, and 2 entries per point (x & y). ",c+="See 'CanvasRenderingContext2D.quadraticCurveTo' for details as 'path' models a quadratic bezier.\n\n",c+="Only [ "+b+" ] values found. Expected: "+Math.max(4*Math.ceil((b-2)/4)+2,6)}for(var j=0;b>j;j++)if(isNaN(a[j]))return"All data in path array must be numeric";var k=i.start;if(isNaN(k)&&void 0!==k)return"'start' out of bounds. Expected 0 to 1, got: "+k;var f=i.end;if(isNaN(f)&&void 0!==f)return"'end' out of bounds. Expected 0 to 1, got: "+f;var g=i.orient;return g&&"fixed"!=g&&"auto"!=g&&"cw"!=g&&"ccw"!=g?"Invalid orientation value. Expected [\"fixed\", \"auto\", \"cw\", \"ccw\", undefined], got: "+g:void 0},createjs.MotionGuidePlugin=b}(),this.createjs=this.createjs||{},function(){"use strict";var b=createjs.TweenJS=createjs.TweenJS||{};b.version="1.0.0",b.buildDate="Thu, 14 Sep 2017 19:47:47 GMT"}();function createHomeMenu(){function a(){GUI.playMenu.width=GUI.btnCommon.width*(homeScreenButtonList.length+1),GUI.playMenu.x=(canvas.width-GUI.playMenu.width)/2-8*homeScreenButtonList.length,GUI.pauseMenu.width=GUI.btnCommon.width*(pauseScreenButtonList.length+1),GUI.pauseMenu.x=(canvas.width-GUI.pauseMenu.width)/2-8*pauseScreenButtonList.length}createjs.Tween.get(GUI.gamelogo).play(createjs.Tween.get(GUI.gamelogo,{paused:!0,loop:!0}).to({width:GUI.gamelogo.width+20,height:GUI.gamelogo.height+20},500,createjs.Ease.quadOut).to({width:GUI.gamelogo.width,height:GUI.gamelogo.height},500,createjs.Ease.quadOut)),createjs.Tween.get(GUI.gamelogo).play(createjs.Tween.get(GUI.gamelogo,{paused:!0,loop:!0}).to({x:GUI.gamelogo.x-10},500,createjs.Ease.quadOut).to({x:GUI.gamelogo.x},500,createjs.Ease.quadOut)),a(),createjs.Tween.get(GUI.btnCommon).play(createjs.Tween.get(GUI.btnCommon,{paused:!0,loop:!0}).to({height:GUI.btnCommon.height+5},500,createjs.Ease.quadOut).to({height:GUI.btnCommon.height},500,createjs.Ease.quadOut)),GUI.levelup.y=-400}function leftkeyPressedGUI(){gameobjects.gamestate==gameobjects.states.home&&(homeScreenPointerPos=movePointer(homeScreenPointerPos,homeScreenButtonList,!1)),gameobjects.gamestate==gameobjects.states.pause&&(pauseScreenPointerPos=movePointer(pauseScreenPointerPos,pauseScreenButtonList,!1))}function rightkeyPressedGUI(){gameobjects.gamestate==gameobjects.states.home&&(homeScreenPointerPos=movePointer(homeScreenPointerPos,homeScreenButtonList,!0)),gameobjects.gamestate==gameobjects.states.pause&&(pauseScreenPointerPos=movePointer(pauseScreenPointerPos,pauseScreenButtonList,!0))}function enterkeyPressedGUI(){gameobjects.gamestate==gameobjects.states.loading&&(setTimeout(function(){gameobjects.gamestate=gameobjects.states.home},10),GUI.loading=!1,sound.gamemusic.loop=!0,sound.gamemusic.play()),gameobjects.gamestate==gameobjects.states.home?(0==homeScreenPointerPos&&(startGame(),gameobjects.gamestate=gameobjects.states.play),1==homeScreenPointerPos&&(gameobjects.gamestate=gameobjects.states.info,console.log("info")),2==homeScreenPointerPos&&(console.log("audio"),handleGlobalSound(),homeScreenButtonList[2]=globalsound?img.BtnSoundOn:img.BtnSoundOff,pauseScreenButtonList[3]=globalsound?img.BtnSoundOn:img.BtnSoundOff)):gameobjects.gamestate==gameobjects.states.info?gameobjects.gamestate=gameobjects.states.home:gameobjects.gamestate==gameobjects.states.play?(gameobjects.gamestate=gameobjects.states.pause,console.log("paused")):gameobjects.gamestate==gameobjects.states.pause?(0==pauseScreenPointerPos&&(gameobjects.gamestate=gameobjects.states.play),1==pauseScreenPointerPos&&(restartgame(),gameobjects.gamestate=gameobjects.states.play),2==pauseScreenPointerPos&&(clearLastGame(),gameobjects.gamestate=gameobjects.states.home),3==pauseScreenPointerPos&&(console.log("audio"),handleGlobalSound(),homeScreenButtonList[2]=globalsound?img.BtnSoundOn:img.BtnSoundOff,pauseScreenButtonList[3]=globalsound?img.BtnSoundOn:img.BtnSoundOff)):gameobjects.gamestate==gameobjects.states.overpass?gameobjects.gamestate=gameobjects.states.play:gameobjects.gamestate==gameobjects.states.overfail&&(gameobjects.gamestate=gameobjects.states.home)}function downkeyPressedGUI(){}function upkeyPressedGUI(){}function movePointer(a,b,c){return c?a+1>=b.length?0:a+1:0>a-1?b.length-1:a-1}"use strict",String.prototype.toHHMMSS=function(){var a=parseInt(this,10),b=Math.floor(a/3600),c=Math.floor((a-3600*b)/60),d=a-3600*b-60*c;return 10>b&&(b="0"+b),10>c&&(c="0"+c),10>d&&(d="0"+d),b+":"+c+":"+d};function randomBool(a,b){return 1==random(1,2)?a:b}function random(a,b){return Math.floor(Math.random()*(b-a+1)+a)}function randomFloat(a,b){return parseFloat(Math.random()*(b-a)+a).toFixed(3)}