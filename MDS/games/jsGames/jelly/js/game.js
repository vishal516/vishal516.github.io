"use strict";var gameready=function(){function a(c){window.requestAnimationFrame(a),b(c),d()}function b(a){var b=(a-f)/1e3;f=a,updater(),c(b)}function c(a){.25<g&&(Math.round(h/g),g=0,h=0),g+=a,h++}function d(){renderer(),e()}function e(){context.fillStyle="#000000",context.font="12px Verdana"}var f=0,g=0,h=0,i=[];console.log("assets loaded"),window.addEventListener("keydown",function(a){i[a.keyCode||a.which]=!0},!0),window.addEventListener("keyup",function(a){i[a.keyCode||a.which]=!1},!0),window.addEventListener("keyup",function(a){switch(a.keyCode){case 37:leftkey(),leftkeyPressedGUI();break;case 38:upkey();break;case 39:rightkey(),rightkeyPressedGUI();break;case 40:downkey();break;case 32:break;case 13:enterkeyPressedGUI(),enterkey();}},!1),function(){uiInit(),a(0)}()};var gameobjects={defaults:{warnings:{x:600,y:500,width:600,height:100},scorepercell:10,disableInput:!1,duration:5000,durationmin:0,durationmax:5000},meter:{x:60,y:150,width:70,height:700,color:"#ff60f3"},player:{score:0,highscore:0,lastscore:0},grid:{x:0,y:0,width:1500,height:800,cells:[],cell:{x:0,y:0,width:120,height:120},pos:0,grid:{col:10,row:6,total:60}},selector:{x:0,y:0,width:120,height:120,dir:0,element:null},background:{x:0,y:0,width:1600,height:1e3},matcheffects:[],gamestate:"",states:{loading:"loading",home:"home",play:"play",pause:"pause",overpass:"overpass",overfail:"overfail",info:"info"},images:["images/j1.png","images/j2.png","images/j3.png","images/j4.png","images/j5.png","images/j6.png","images/j6.png","images/background.png","images/selector.png","images/selectorh.png","images/selectorv.png","images/Font.png","images/jfont.png","images/chessmap.png","images/directionh.png","images/directionv.png","images/block.png","images/gamelogo.png","images/meter.png","images/BtnPlayOn.png","images/BtnInfoOn.png","images/BtnPlayOn.png","images/BtnSoundOn.png","images/BtnSoundOff.png","images/BtnRestartOn.png","images/BtnExitOn.png","images/Button.png"],sounds:["media/swap.ogg","media/match.m4a","media/score.m4a","media/button.m4a","media/gamemusic.ogg"]},GUI={canvas:{x:0,y:0,width:1600,height:1e3},homeScreen:{x:0,y:0,width:1600,height:1e3,xdir:1,ydir:1,speed:200},gamelogo:{x:400,y:0,width:850,height:500},playMenu:{x:0,y:500,width:400,height:400},pauseMenu:{x:0,y:500,width:400,height:400},btnPlay:{x:50,y:50,width:150,height:150},btnSound:{x:50,y:50,width:150,height:150},btnInfo:{x:50,y:50,width:150,height:150},btnCommon:{x:50,y:50,width:150,height:150},btnPointer:{x:50,y:50,width:150,height:150},levelup:{x:350,y:50,width:900,height:400},cellPreview:{x:1420,y:300,width:120,height:120},directionPreview:{x:1420,y:550,width:120,height:120},decoration:{bubbles:Array(40)},btnPadding:200,pointerPadding:40,loading:!0},img=loadImages(gameobjects.images),sound=loadSound(gameobjects.sounds),homeScreenButtonList=[img.BtnPlayOn,img.BtnInfoOn,img.BtnSoundOn],pauseScreenButtonList=[img.BtnPlayOn,img.BtnRestartOn,img.BtnExitOn,img.BtnSoundOn],homeScreenPointerPos=0,pauseScreenPointerPos=0,globalsound=!0,loadcount=0,loadtotal=0,preloaded=!1;function loadImages(a){preloaded=!1;for(var b,c=[],d={},e=0;e<a.length;e++)b=new Image,b.onload=function(){loadcount+=1,loadcount==a.length&&(preloaded=!0)},b.src=a[e],c[e]=b,d[b.src.split("/")[b.src.split("/").length-1].split(".")[0]]=b;return d}function loadSound(a){for(var b,c=[],d={},e=0;e<a.length;e++)b=new Audio(a[e]),c[e]=b,d[b.src.split("/")[b.src.split("/").length-1].split(".")[0]]=b;return d}function handleGlobalSound(){globalsound=!globalsound,globalsound?sound.gamemusic.play():(sound.gamemusic.pause(),sound.gamemusic.currentTime=0),Object.keys(sound).forEach(function(a){sound[a].volume=globalsound?1:0})}function cell(a,b){this.type=random(1,6),this.y=a*gameobjects.grid.cell.height+gameobjects.grid.y,this.x=b*gameobjects.grid.cell.width+gameobjects.grid.x,this.height=gameobjects.grid.cell.height,this.width=gameobjects.grid.cell.width,this.image=img["j"+this.type],createjs.Tween.get(this).play(createjs.Tween.get(this,{paused:!0,loop:!0}).to({width:this.width+5},500,createjs.Ease.quadOut).to({width:this.width},500,createjs.Ease.quadOut)),sound.score.play()}function matcheffect(a){this.x=a.x,this.y=a.y,this.width=a.width,this.height=a.height,this.image=a.image,createjs.Tween.get(this).to({alpha:0,x:750,y:0},1e3).call(function(){for(var a=this,b=0;b<gameobjects.matcheffects.length;b++)gameobjects.matcheffects[b]==a&&gameobjects.matcheffects.splice(b,1)})}var a=0;function raindrop(){this.x=randomFloat(0,1600),this.y=random(-100,-1e3),this.width=100,this.height=100,this.image=img["j"+random(1,6)]}gameobjects.grid.width=gameobjects.grid.grid.col*gameobjects.grid.cell.width,gameobjects.grid.height=gameobjects.grid.grid.row*gameobjects.grid.cell.height;function updater(){updaterwithpause()}function renderer(){renderUI()}function leftkey(){gameobjects.gamestate==gameobjects.states.play&&moveleft()}function rightkey(){gameobjects.gamestate==gameobjects.states.play&&moveright()}function downkey(){gameobjects.gamestate==gameobjects.states.play&&rotate()}function upkey(){gameobjects.gamestate==gameobjects.states.play&&pick()}function enterkey(){}function startgame(){gameobjects.gamestate=gameobjects.states.play,gameobjects.defaults.duration=gameobjects.defaults.durationmax/2,gameobjects.player.score=0,gameobjects.grid.x=(canvas.width-gameobjects.grid.width)/2,gameobjects.grid.y=(canvas.height-gameobjects.grid.height)/2,gameobjects.grid.cells=[];for(var a=0;a<gameobjects.grid.grid.row;a++)for(var b,c=0;c<gameobjects.grid.grid.col;c++)b=new cell(a,c),gameobjects.grid.cells.push(b);setselectorpos(),setTimeout(match,1e3)}function updaterwithpause(){gameobjects.gamestate==gameobjects.states.play&&(gameobjects.defaults.duration>gameobjects.defaults.durationmin?gameobjects.defaults.duration-=1:(gameobjects.gamestate=gameobjects.states.overfail,gameobjects.player.lastscore=gameobjects.player.score,gameobjects.player.highscore<gameobjects.player.score&&(gameobjects.player.highscore=gameobjects.player.score),gameobjects.player.score=0))}function moveleft(){var a=Math.floor(gameobjects.grid.pos/gameobjects.grid.grid.col)*gameobjects.grid.grid.col,b=a+gameobjects.grid.grid.col-1,c=gameobjects.grid.grid.col-1;gameobjects.grid.cells.length-gameobjects.grid.grid.col,gameobjects.selector.dir?gameobjects.selector.element?gameobjects.grid.pos>c&&(gameobjects.grid.pos-=gameobjects.grid.grid.col,setselectorpos(),swap(gameobjects.grid.pos+gameobjects.grid.grid.col,gameobjects.grid.pos)):(gameobjects.grid.pos>c?gameobjects.grid.pos-=gameobjects.grid.grid.col:gameobjects.grid.pos+=gameobjects.grid.grid.col*(gameobjects.grid.grid.row-1),setselectorpos()):gameobjects.selector.element?gameobjects.grid.pos>a&&(gameobjects.grid.pos-=1,setselectorpos(),swap(gameobjects.grid.pos+1,gameobjects.grid.pos)):(gameobjects.grid.pos-=1,gameobjects.grid.pos<a&&(gameobjects.grid.pos=b),gameobjects.grid.pos>b&&(gameobjects.grid.pos=a),setselectorpos())}function moveright(){var a=Math.floor(gameobjects.grid.pos/gameobjects.grid.grid.col)*gameobjects.grid.grid.col,b=a+gameobjects.grid.grid.col-1;gameobjects.grid.grid.col-1;var c=gameobjects.grid.cells.length-gameobjects.grid.grid.col;gameobjects.selector.dir?gameobjects.selector.element?gameobjects.grid.pos<c&&(gameobjects.grid.pos+=gameobjects.grid.grid.col,setselectorpos(),swap(gameobjects.grid.pos-gameobjects.grid.grid.col,gameobjects.grid.pos)):(gameobjects.grid.pos<c?gameobjects.grid.pos+=gameobjects.grid.grid.col:gameobjects.grid.pos-=gameobjects.grid.grid.col*(gameobjects.grid.grid.row-1),setselectorpos()):gameobjects.selector.element?gameobjects.grid.pos<b&&(gameobjects.grid.pos+=1,setselectorpos(),swap(gameobjects.grid.pos-1,gameobjects.grid.pos)):(gameobjects.grid.pos+=1,gameobjects.grid.pos<a&&(gameobjects.grid.pos=b),gameobjects.grid.pos>b&&(gameobjects.grid.pos=a),setselectorpos())}function rotate(){gameobjects.selector.dir=!gameobjects.selector.dir}function pick(){gameobjects.selector.element=null==gameobjects.selector.element?gameobjects.grid.cells[gameobjects.grid.pos]:null}function swap(a,b){var c=gameobjects.grid.cells[a],d=gameobjects.grid.cells[b],e={x:c.x,y:c.y},f={x:d.x,y:d.y};setPosToAnotherObject(gameobjects.grid.cells[a],f),setPosToAnotherObject(gameobjects.grid.cells[b],e),gameobjects.grid.cells[a]=d,gameobjects.grid.cells[b]=c;var g=gameobjects.player.score;match(),g<gameobjects.player.score?(gameobjects.selector.element=null,sound.match.play()):setTimeout(function(){gameobjects.grid.cells[a]=c,gameobjects.grid.cells[b]=d,setPosToAnotherObject(gameobjects.grid.cells[a],e),setPosToAnotherObject(gameobjects.grid.cells[b],f),gameobjects.selector.element=null,sound.swap.play()},100)}function match(){for(var a=0,b=0,c=[],d=0;d<gameobjects.grid.grid.row;d++){for(var e,f=[],g=0,h=0;h<gameobjects.grid.grid.col;h++)e=d*gameobjects.grid.grid.col+h,b=a,a=gameobjects.grid.cells[e].type,a==b?(g+=1,f.push(e)):(2<f.length&&c.push(f),g=1,f=[],f.push(e));2<f.length&&c.push(f)}for(var d=0;d<gameobjects.grid.grid.col;d++){for(var e,f=[],g=0,k=0;k<gameobjects.grid.grid.row;k++)e=d+gameobjects.grid.grid.col*k,b=a,a=gameobjects.grid.cells[e].type,a==b?(g+=1,f.push(e)):(2<f.length&&c.push(f),g=1,f=[],f.push(e));2<f.length&&c.push(f)}0<c.length&&(c.forEach(function(a){a.forEach(function(a){var b=gameobjects.grid.cells[a];b&&destroy(a)})}),setTimeout(match,500))}function destroy(a){gameobjects.matcheffects.push(new matcheffect(gameobjects.grid.cells[a]));for(var b=a;b>gameobjects.grid.grid.col-1;b-=gameobjects.grid.grid.col){var c=b,d=b-gameobjects.grid.grid.col;gameobjects.grid.cells[d].y+=gameobjects.grid.cell.height,gameobjects.grid.cells[c]=gameobjects.grid.cells[d]}var e=a-Math.floor(a/gameobjects.grid.grid.col)*gameobjects.grid.grid.col;gameobjects.grid.cells[e]=new cell(0,e),gameobjects.player.score+=gameobjects.defaults.scorepercell,gameobjects.defaults.duration<gameobjects.defaults.durationmax?gameobjects.defaults.duration+=100:gameobjects.defaults.duration=gameobjects.defaults.durationmax}function setselectorpos(){setPosToAnotherObject(gameobjects.selector,gameobjects.grid.cells[gameobjects.grid.pos])}function setPosToAnotherObject(c,a){c.x=a.x,c.y=a.y}function renderGame(){context.drawImage(img.background,gameobjects.background.x,gameobjects.background.y,gameobjects.background.width,gameobjects.background.height),context.drawImage(img.chessmap,gameobjects.grid.x,gameobjects.grid.y,gameobjects.grid.width,gameobjects.grid.height),context.drawImage(img.block,gameobjects.selector.x,gameobjects.selector.y,gameobjects.selector.width,gameobjects.selector.height);for(var a,b=0;b<gameobjects.grid.cells.length;b++)a=gameobjects.grid.cells[b],context.drawImage(a.image,a.x,a.y,a.width,a.width);context.drawImage(0==gameobjects.selector.dir?img.selectorh:img.selectorv,gameobjects.selector.x,gameobjects.selector.y,gameobjects.selector.width,gameobjects.selector.height),spriteWrite("Score:"+gameobjects.player.score,fontMedium,800,50,!0),context.drawImage(img.selector,GUI.cellPreview.x,GUI.cellPreview.y,gameobjects.selector.width,gameobjects.selector.height),gameobjects.selector.element?context.drawImage(gameobjects.grid.cells[gameobjects.grid.pos].image,GUI.cellPreview.x,GUI.cellPreview.y,gameobjects.selector.width,gameobjects.selector.height):context.drawImage(gameobjects.grid.cells[gameobjects.grid.pos].image,GUI.cellPreview.x+20,GUI.cellPreview.y+20,gameobjects.selector.width-40,gameobjects.selector.height-40),gameobjects.selector.dir?context.drawImage(img.directionv,GUI.directionPreview.x,GUI.directionPreview.y,GUI.directionPreview.width,GUI.directionPreview.height):context.drawImage(img.directionh,GUI.directionPreview.x,GUI.directionPreview.y,GUI.directionPreview.width,GUI.directionPreview.height);for(var d,b=0;b<gameobjects.matcheffects.length;b++)d=gameobjects.matcheffects[b],context.drawImage(d.image,d.x,d.y,d.width,d.height);var e=.7*(gameobjects.defaults.duration/5);context.fillStyle=gameobjects.meter.color,context.fillRect(gameobjects.meter.x+gameobjects.meter.width/4,gameobjects.meter.y+gameobjects.meter.height-e,gameobjects.meter.width/2,e),context.drawImage(img.meter,gameobjects.meter.x,gameobjects.meter.y-10,gameobjects.meter.width,gameobjects.meter.height+20)}function renderUI(){if(gameobjects.gamestate==gameobjects.states.loading)context.drawImage(img.background,gameobjects.background.x,gameobjects.background.y,gameobjects.background.width,gameobjects.background.height),spriteWrite("loading is complete",fontSmall,780,400,!0),spriteWrite("press ok button",fontBig,780,500,!0);else if(gameobjects.gamestate==gameobjects.states.home){context.drawImage(img.background,gameobjects.background.x,gameobjects.background.y,gameobjects.background.width,gameobjects.background.height);for(var a=GUI.decoration.bubbles,b=0;b<a.length;b++)context.drawImage(a[b].image,a[b].x,a[b].y,a[b].width,a[b].height);context.drawImage(img.gamelogo,GUI.gamelogo.x,GUI.gamelogo.y,GUI.gamelogo.width,GUI.gamelogo.height),context.drawImage(img.Button,GUI.playMenu.x-GUI.pointerPadding/2+GUI.btnCommon.x+200*homeScreenPointerPos,GUI.playMenu.y-GUI.pointerPadding/2+GUI.btnPlay.y,GUI.btnCommon.width+GUI.pointerPadding,GUI.btnCommon.height+GUI.pointerPadding);for(var b=0;b<homeScreenButtonList.length;b++)context.drawImage(homeScreenButtonList[b],GUI.playMenu.x+GUI.btnCommon.x+200*b,GUI.playMenu.y+GUI.btnCommon.y,GUI.btnCommon.width,GUI.btnCommon.height)}else if(gameobjects.gamestate==gameobjects.states.pause){context.drawImage(img.background,gameobjects.background.x,gameobjects.background.y,gameobjects.background.width,gameobjects.background.height),spriteWrite2("paused",fontXL,800,50,!0),context.drawImage(img.Button,GUI.pauseMenu.x-GUI.pointerPadding/2+GUI.btnCommon.x+200*pauseScreenPointerPos,GUI.pauseMenu.y-GUI.pointerPadding/2+GUI.btnPlay.y,GUI.btnCommon.width+GUI.pointerPadding,GUI.btnCommon.height+GUI.pointerPadding);for(var b=0;b<pauseScreenButtonList.length;b++)context.drawImage(pauseScreenButtonList[b],GUI.pauseMenu.x+GUI.btnCommon.x+200*b,GUI.pauseMenu.y+GUI.btnCommon.y,GUI.btnCommon.width,GUI.btnCommon.height)}else gameobjects.gamestate==gameobjects.states.play?renderGame():gameobjects.gamestate==gameobjects.states.overfail?(context.drawImage(img.background,gameobjects.background.x,gameobjects.background.y,gameobjects.background.width,gameobjects.background.height),spriteWrite2("GAME OVER",fontXL,800,100,!0),spriteWrite("HIGH SCORE:"+gameobjects.player.highscore,fontMedium,800,450,!0),spriteWrite("YOUR SCORE:"+gameobjects.player.lastscore,fontMedium,800,550,!0),spriteWrite("PRESS OK BUTTON TO GO BACK TO MAIN MENU",fontMedium,800,750,!0)):gameobjects.gamestate==gameobjects.states.info&&(context.drawImage(img.background,gameobjects.background.x,gameobjects.background.y,gameobjects.background.width,gameobjects.background.height),spriteWrite2("how to play",fontXL,800,50,!0),spriteWrite("press down button to switch between horizontal or vertical movement",fontSmall,800,250,!0),spriteWrite("press left button or right button to move vertically or horizontally",fontSmall,800,350,!0),spriteWrite("press up button to pick a jelly for swaping and ",fontSmall,800,450,!0),spriteWrite("then press left or right button to swap",fontSmall,800,550,!0),spriteWrite("while playing press ok button to pause",fontSmall,800,650,!0),spriteWrite("PRESS OK BUTTON TO GO BACK TO MAIN MENU",fontMedium,800,750,!0))}var lastgamestate="home";window.addEventListener("blur",function(){lastgamestate=gameobjects.gamestate,gameobjects.gamestate=gameobjects.states.pause,sound.gamemusic.pause()}),window.addEventListener("focus",function(){gameobjects.gamestate=lastgamestate,sound.gamemusic.play()}),window.onload=function(){resizeCanvas(),setTimeout(function(){document.getElementById("loader").style.display="none",canvas.style.display="block",gameready()},2e3)},window.onresize=function(){resizeCanvas()};var canvas,context;Canvas2D();function Canvas2D(){canvas=document.getElementById("viewport"),context=canvas.getContext("2d")}var level={x:1,y:65,width:canvas.width-2,height:canvas.height-66};function resizeCanvas(){canvas.style.height=window.innerHeight+"px",canvas.style.width=window.innerWidth+"px"}var canvas2d=new Canvas2D;function resizeCanvasKeepAR(){widthToHeight=window.innerWidth/window.innerHeight,widthToHeightIdeal=16/10,state=widthToHeight>widthToHeightIdeal?"wider":"higher",widthToHeight>widthToHeightIdeal?(canvas.style.height=window.innerHeight+"px",canvas.style.width=window.innerHeight*widthToHeightIdeal+"px",canvas.style.marginLeft=(window.innerWidth-window.innerHeight*widthToHeightIdeal)/2+"px",canvas.style.marginTop="0px"):(canvas.style.width=window.innerWidth+"px",canvas.style.height=window.innerWidth/widthToHeightIdeal+"px",canvas.style.marginTop=(window.innerHeight-window.innerWidth/widthToHeightIdeal)/2+"px",canvas.style.marginLeft="0px")}this.createjs=this.createjs||{},createjs.extend=function(d,a){"use strict";function b(){this.constructor=d}return b.prototype=a.prototype,d.prototype=new b},this.createjs=this.createjs||{},createjs.promote=function(f,a){"use strict";var g=f.prototype,c=Object.getPrototypeOf&&Object.getPrototypeOf(g)||g.__proto__;if(c)for(var d in g[(a+="_")+"constructor"]=c.constructor,c)g.hasOwnProperty(d)&&"function"==typeof c[d]&&(g[a+d]=c[d]);return f},this.createjs=this.createjs||{},createjs.deprecate=function(d,a){"use strict";return function(){var b="Deprecated property or method '"+a+"'. See docs for info.";return console&&(console.warn?console.warn(b):console.log(b)),d&&d.apply(this,arguments)}},this.createjs=this.createjs||{},function(){"use strict";function b(d,a,b){this.type=d,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!a,this.cancelable=!!b,this.timeStamp=new Date().getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var c=b.prototype;c.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},c.stopPropagation=function(){this.propagationStopped=!0},c.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},c.remove=function(){this.removed=!0},c.clone=function(){return new b(this.type,this.bubbles,this.cancelable)},c.set=function(c){for(var a in c)this[a]=c[a];return this},c.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=b}(),this.createjs=this.createjs||{},function(){"use strict";function b(){this._listeners=null,this._captureListeners=null}var c=b.prototype;b.initialize=function(a){a.addEventListener=c.addEventListener,a.on=c.on,a.removeEventListener=a.off=c.removeEventListener,a.removeAllEventListeners=c.removeAllEventListeners,a.hasEventListener=c.hasEventListener,a.dispatchEvent=c.dispatchEvent,a._dispatchEvent=c._dispatchEvent,a.willTrigger=c.willTrigger},c.addEventListener=function(f,a,b){var c=b?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var d=c[f];return d&&this.removeEventListener(f,a,b),d=c[f],d?d.push(a):c[f]=[a],a},c.on=function(g,h,i,j,d,a){return h.handleEvent&&(i=i||h,h=h.handleEvent),i=i||this,this.addEventListener(g,function(b){h.call(i,b,d),j&&b.remove()},a)},c.removeEventListener=function(h,a,b){var c=b?this._captureListeners:this._listeners;if(c){var d=c[h];if(d)for(var e=0,i=d.length;i>e;e++)if(d[e]==a){1==i?delete c[h]:d.splice(e,1);break}}},c.off=c.removeEventListener,c.removeAllEventListeners=function(b){b?(this._listeners&&delete this._listeners[b],this._captureListeners&&delete this._captureListeners[b]):this._listeners=this._captureListeners=null},c.dispatchEvent=function(e,j,b){if("string"==typeof e){var c=this._listeners;if(!(j||c&&c[e]))return!0;e=new createjs.Event(e,j,b)}else e.target&&e.clone&&(e=e.clone());try{e.target=this}catch(a){}if(e.bubbles&&this.parent){for(var d=this,k=[d];d.parent;)k.push(d=d.parent);var g,l=k.length;for(g=l-1;0<=g&&!e.propagationStopped;g--)k[g]._dispatchEvent(e,1+(0==g));for(g=1;l>g&&!e.propagationStopped;g++)k[g]._dispatchEvent(e,3)}else this._dispatchEvent(e,2);return!e.defaultPrevented},c.hasEventListener=function(d){var a=this._listeners,b=this._captureListeners;return!!(a&&a[d]||b&&b[d])},c.willTrigger=function(c){for(var a=this;a;){if(a.hasEventListener(c))return!0;a=a.parent}return!1},c.toString=function(){return"[EventDispatcher]"},c._dispatchEvent=function(f,a){var b,i,j=2>=a?this._captureListeners:this._listeners;if(f&&j&&(i=j[f.type])&&(b=i.length)){try{f.currentTarget=this}catch(a){}try{f.eventPhase=0|a}catch(a){}f.removed=!1,i=i.slice();for(var e,k=0;b>k&&!f.immediatePropagationStopped;k++)e=i[k],e.handleEvent?e.handleEvent(f):e(f),f.removed&&(this.off(f.type,e,1==a),f.removed=!1)}2===a&&this._dispatchEvent(f,2.1)},createjs.EventDispatcher=b}(),this.createjs=this.createjs||{},function(){"use strict";function f(){throw"Ticker cannot be instantiated."}f.RAF_SYNCHED="synched",f.RAF="raf",f.TIMEOUT="timeout",f.timingMode=null,f.maxDelta=0,f.paused=!1,f.removeEventListener=null,f.removeAllEventListeners=null,f.dispatchEvent=null,f.hasEventListener=null,f._listeners=null,createjs.EventDispatcher.initialize(f),f._addEventListener=f.addEventListener,f.addEventListener=function(){return!f._inited&&f.init(),f._addEventListener.apply(f,arguments)},f._inited=!1,f._startTime=0,f._pausedTime=0,f._ticks=0,f._pausedTicks=0,f._interval=50,f._lastTime=0,f._times=null,f._tickTimes=null,f._timerId=null,f._raf=!0,f._setInterval=function(b){f._interval=b,f._inited&&f._setupTick()},f.setInterval=createjs.deprecate(f._setInterval,"Ticker.setInterval"),f._getInterval=function(){return f._interval},f.getInterval=createjs.deprecate(f._getInterval,"Ticker.getInterval"),f._setFPS=function(b){f._setInterval(1e3/b)},f.setFPS=createjs.deprecate(f._setFPS,"Ticker.setFPS"),f._getFPS=function(){return 1e3/f._interval},f.getFPS=createjs.deprecate(f._getFPS,"Ticker.getFPS");try{Object.defineProperties(f,{interval:{get:f._getInterval,set:f._setInterval},framerate:{get:f._getFPS,set:f._setFPS}})}catch(b){console.log(b)}f.init=function(){f._inited||(f._inited=!0,f._times=[],f._tickTimes=[],f._startTime=f._getTime(),f._times.push(f._lastTime=0),f.interval=f._interval)},f.reset=function(){if(f._raf){var b=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame;b&&b(f._timerId)}else clearTimeout(f._timerId);f.removeAllEventListeners("tick"),f._timerId=f._times=f._tickTimes=null,f._startTime=f._lastTime=f._ticks=f._pausedTime=0,f._inited=!1},f.getMeasuredTickTime=function(e){var g=0,h=f._tickTimes;if(!h||1>h.length)return-1;e=Math.min(h.length,e||0|f._getFPS());for(var c=0;e>c;c++)g+=h[c];return g/e},f.getMeasuredFPS=function(c){var d=f._times;return!d||2>d.length?-1:(c=Math.min(d.length-1,c||0|f._getFPS()),1e3/((d[0]-d[c])/c))},f.getTime=function(b){return f._startTime?f._getTime()-(b?f._pausedTime:0):-1},f.getEventTime=function(b){return f._startTime?(f._lastTime||f._startTime)-(b?f._pausedTime:0):-1},f.getTicks=function(b){return f._ticks-(b?f._pausedTicks:0)},f._handleSynch=function(){f._timerId=null,f._setupTick(),f._getTime()-f._lastTime>=.97*(f._interval-1)&&f._tick()},f._handleRAF=function(){f._timerId=null,f._setupTick(),f._tick()},f._handleTimeout=function(){f._timerId=null,f._setupTick(),f._tick()},f._setupTick=function(){if(null==f._timerId){var c=f.timingMode;if(c==f.RAF_SYNCHED||c==f.RAF){var a=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(a)return f._timerId=a(c==f.RAF?f._handleRAF:f._handleSynch),void(f._raf=!0)}f._raf=!1,f._timerId=setTimeout(f._handleTimeout,f._interval)}},f._tick=function(){var g=f.paused,a=f._getTime(),b=a-f._lastTime;if(f._lastTime=a,f._ticks++,g&&(f._pausedTicks++,f._pausedTime+=b),f.hasEventListener("tick")){var c=new createjs.Event("tick"),d=f.maxDelta;c.delta=d&&b>d?d:b,c.paused=g,c.time=a,c.runTime=a-f._pausedTime,f.dispatchEvent(c)}for(f._tickTimes.unshift(f._getTime()-a);100<f._tickTimes.length;)f._tickTimes.pop();for(f._times.unshift(a);100<f._times.length;)f._times.pop()};var g=window,a=g.performance.now||g.performance.mozNow||g.performance.msNow||g.performance.oNow||g.performance.webkitNow;f._getTime=function(){return(a&&a.call(g.performance)||new Date().getTime())-f._startTime},createjs.Ticker=f}(),this.createjs=this.createjs||{},function(){"use strict";function b(b){this.EventDispatcher_constructor(),this.ignoreGlobalPause=!1,this.loop=0,this.useTicks=!1,this.reversed=!1,this.bounce=!1,this.timeScale=1,this.duration=0,this.position=0,this.rawPosition=-1,this._paused=!0,this._next=null,this._prev=null,this._parent=null,this._labels=null,this._labelList=null,b&&(this.useTicks=!!b.useTicks,this.ignoreGlobalPause=!!b.ignoreGlobalPause,this.loop=!0===b.loop?-1:b.loop||0,this.reversed=!!b.reversed,this.bounce=!!b.bounce,this.timeScale=b.timeScale||1,b.onChange&&this.addEventListener("change",b.onChange),b.onComplete&&this.addEventListener("complete",b.onComplete))}var c=createjs.extend(b,createjs.EventDispatcher);c._setPaused=function(b){return createjs.Tween._register(this,b),this},c.setPaused=createjs.deprecate(c._setPaused,"AbstractTween.setPaused"),c._getPaused=function(){return this._paused},c.getPaused=createjs.deprecate(c._getPaused,"AbstactTween.getPaused"),c._getCurrentLabel=function(e){var f=this.getLabels();null==e&&(e=this.position);for(var b=0,g=f.length;g>b&&!(e<f[b].position);b++);return 0==b?null:f[b-1].label},c.getCurrentLabel=createjs.deprecate(c._getCurrentLabel,"AbstractTween.getCurrentLabel");try{Object.defineProperties(c,{paused:{set:c._setPaused,get:c._getPaused},currentLabel:{get:c._getCurrentLabel}})}catch(a){}c.advance=function(c,a){this.setPosition(this.rawPosition+c*this.timeScale,a)},c.setPosition=function(l,m,b,c){var d=this.duration,e=this.loop,f=this.rawPosition,g=0,n=0,o=!1;if(!(0>l&&(l=0),0===d)){if(g=0|l/d,n=l-g*d,o=-1!==e&&l>=e*d+d,o&&(l=(n=d)*(g=e)+d),l===f)return o;var p=!this.reversed!=!(this.bounce&&g%2);p&&(n=d-n)}else if(o=!0,-1!==f)return o;this.position=n,this.rawPosition=l,this._updatePosition(b,o),o&&(this.paused=!0),c&&c(this),m||this._runActions(f,l,b,!b&&-1===f),this.dispatchEvent("change"),o&&this.dispatchEvent("complete")},c.calculatePosition=function(g){var a=this.duration,b=this.loop,c=0,h=0;if(0===a)return 0;-1!==b&&g>=b*a+a?(h=a,c=b):0>g?h=0:(c=0|g/a,h=g-c*a);var i=!this.reversed!=!(this.bounce&&c%2);return i?a-h:h},c.getLabels=function(){var d=this._labelList;if(!d){d=this._labelList=[];var e=this._labels;for(var b in e)d.push({label:b,position:e[b]});d.sort(function(c,a){return c.position-a.position})}return d},c.setLabels=function(b){this._labels=b,this._labelList=null},c.addLabel=function(f,a){this._labels||(this._labels={}),this._labels[f]=a;var b=this._labelList;if(b){for(var c=0,g=b.length;g>c&&!(a<b[c].position);c++);b.splice(c,0,{label:f,position:a})}},c.gotoAndPlay=function(b){this.paused=!1,this._goto(b)},c.gotoAndStop=function(b){this.paused=!0,this._goto(b)},c.resolve=function(c){var a=+c;return isNaN(a)&&(a=this._labels&&this._labels[c]),a},c.toString=function(){return"[AbstractTween]"},c.clone=function(){throw"AbstractTween can not be cloned."},c._init=function(b){b&&b.paused||(this.paused=!1),b&&null!=b.position&&this.setPosition(b.position)},c._updatePosition=function(){},c._goto=function(c){var a=this.resolve(c);null!=a&&this.setPosition(a,!1,!0)},c._runActions=function(r,a,b,c){if(this._actionHead||this.tweens){var s,t,u,v,w=this.duration,i=this.reversed,x=this.bounce,y=this.loop;if(0===w?(s=t=u=v=0,i=x=!1):(s=0|r/w,t=0|a/w,u=r-s*w,v=a-t*w),-1!==y&&(t>y&&(v=w,t=y),s>y&&(u=w,s=y)),b)return this._runActionsRange(v,v,b,c);if(s!==t||u!==v||b||c){-1===s&&(s=u=0);var l=a>=r,m=s;do{var z=!i!=!(x&&m%2),o=m===s?u:l?0:w,A=m===t?v:l?w:0;if(z&&(o=w-o,A=w-A),x&&m!==s&&o===A);else if(this._runActionsRange(o,A,b,c||m!==s&&!x))return!0;c=!1}while(l&&++m<=t||!l&&--m>=t)}}},c._runActionsRange=function(){},createjs.AbstractTween=createjs.promote(b,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function r(a,b){this.AbstractTween_constructor(b),this.pluginData=null,this.target=a,this.passive=!1,this._stepHead=new s(null,0,0,{},null,!0),this._stepTail=this._stepHead,this._stepPosition=0,this._actionHead=null,this._actionTail=null,this._plugins=null,this._pluginIds=null,this._injected=null,b&&(this.pluginData=b.pluginData,b.override&&r.removeTweens(a)),this.pluginData||(this.pluginData={}),this._init(b)}function s(g,a,b,c,d,e){this.next=null,this.prev=g,this.t=a,this.d=b,this.props=c,this.ease=d,this.passive=e,this.index=g?g.index+1:0}function f(f,a,b,c,d){this.next=null,this.prev=f,this.t=a,this.d=0,this.scope=b,this.funct=c,this.params=d}var a=createjs.extend(r,createjs.AbstractTween);r.IGNORE={},r._tweens=[],r._plugins=null,r._tweenHead=null,r._tweenTail=null,r.get=function(c,a){return new r(c,a)},r.tick=function(e,a){for(var b,f=r._tweenHead;f;)b=f._next,a&&!f.ignoreGlobalPause||f._paused||f.advance(f.useTicks?1:e),f=b},r.handleEvent=function(b){"tick"===b.type&&this.tick(b.delta,b.paused)},r.removeTweens=function(d){if(d.tweenjs_count){for(var a,e=r._tweenHead;e;)a=e._next,e.target===d&&r._register(e,!0),e=a;d.tweenjs_count=0}},r.removeAllTweens=function(){for(var c,d=r._tweenHead;d;)c=d._next,d._paused=!0,d.target&&(d.target.tweenjs_count=0),d._next=d._prev=null,d=c;r._tweenHead=r._tweenTail=null},r.hasActiveTweens=function(b){return b?!!b.tweenjs_count:!!r._tweenHead},r._installPlugin=function(f){for(var a=f.priority=f.priority||0,b=r._plugins=r._plugins||[],c=0,g=b.length;g>c&&!(a<b[c].priority);c++);b.splice(c,0,f)},r._register=function(g,a){var b=g.target;if(!a&&g._paused){b&&(b.tweenjs_count=b.tweenjs_count?b.tweenjs_count+1:1);var c=r._tweenTail;c?(r._tweenTail=c._next=g,g._prev=c):r._tweenHead=r._tweenTail=g,!r._inited&&createjs.Ticker&&(createjs.Ticker.addEventListener("tick",r),r._inited=!0)}else if(a&&!g._paused){b&&b.tweenjs_count--;var d=g._next,e=g._prev;d?d._prev=e:r._tweenTail=e,e?e._next=d:r._tweenHead=d,g._next=g._prev=null}g._paused=a},a.wait=function(c,a){return 0<c&&this._addStep(+c,this._stepTail.props,null,a),this},a.to=function(e,a,f){(null==a||0>a)&&(a=0);var c=this._addStep(+a,null,f);return this._appendProps(e,c),this},a.label=function(b){return this.addLabel(b,this.duration),this},a.call=function(d,a,b){return this._addAction(b||this.target,d,a||[this])},a.set=function(c,a){return this._addAction(a||this.target,this._set,[c])},a.play=function(b){return this._addAction(b||this,this._set,[{paused:!1}])},a.pause=function(b){return this._addAction(b||this,this._set,[{paused:!0}])},a.w=a.wait,a.t=a.to,a.c=a.call,a.s=a.set,a.toString=function(){return"[Tween]"},a.clone=function(){throw"Tween can not be cloned."},a._addPlugin=function(h){var a=this._pluginIds||(this._pluginIds={}),b=h.ID;if(b&&!a[b]){a[b]=!0;for(var c=this._plugins||(this._plugins=[]),d=h.priority||0,e=0,i=c.length;i>e;e++)if(d<c[e].priority)return void c.splice(e,0,h);c.push(h)}},a._updatePosition=function(h,a){var b=this._stepHead.next,i=this.position,d=this.duration;if(this.target&&b){for(var e=b.next;e&&e.t<=i;)b=b.next,e=b.next;var j=a?0===d?1:i/d:(i-b.t)/b.d;this._updateTargetProps(b,j,a)}this._stepPosition=b?i-b.t:0},a._updateTargetProps=function(o,a,p){if(!(this.passive=!!o.passive)){var c,q,s,t,u=o.prev.props,h=o.props;(t=o.ease)&&(a=t(a,0,1,1));var i=this._plugins;a:for(var j in u){if(q=u[j],s=h[j],c=q!==s&&"number"==typeof q?q+(s-q)*a:1<=a?s:q,i)for(var k,v=0,w=i.length;w>v;v++){if(k=i[v].change(this,o,j,c,a,p),k===r.IGNORE)continue a;void 0!==k&&(c=k)}this.target[j]=c}}},a._runActionsRange=function(k,a,b,c){var d=k>a,e=d?this._actionTail:this._actionHead,l=a,m=k;d&&(l=k,m=a);for(var n,o=this.position;e;){if(n=e.t,(n===a||n>m&&l>n||c&&n===k)&&(e.funct.apply(e.scope,e.params),o!==this.position))return!0;e=d?e.prev:e.next}},a._appendProps=function(s,a,b){var c,t,u,v,w,x=this._stepHead.props,i=this.target,j=r._plugins,y=a.prev,l=y.props,m=a.props||(a.props=this._cloneProps(l)),n={};for(c in s)if(s.hasOwnProperty(c)&&(n[c]=m[c]=s[c],void 0===x[c])){if(v=void 0,j)for(t=j.length-1;0<=t;t--)if(u=j[t].init(this,c,v),void 0!==u&&(v=u),v===r.IGNORE){delete m[c],delete n[c];break}v!==r.IGNORE&&(void 0===v&&(v=i[c]),l[c]=void 0===v?null:v)}for(c in n){u=s[c];for(var o,z=y;(o=z)&&(z=o.prev);)if(z.props!==o.props){if(void 0!==z.props[c])break;z.props[c]=l[c]}}if(!1!==b&&(j=this._plugins))for(t=j.length-1;0<=t;t--)j[t].step(this,a,n);(w=this._injected)&&(this._injected=null,this._appendProps(w,a,!1))},a._injectProp=function(d,a){var b=this._injected||(this._injected={});b[d]=a},a._addStep=function(a,b,c,d){var e=new s(this._stepTail,this.duration,a,b,c,d||!1);return this.duration+=a,this._stepTail=this._stepTail.next=e},a._addAction=function(b,a,c){var d=new f(this._actionTail,this.duration,b,a,c);return this._actionTail?this._actionTail.next=d:this._actionHead=d,this._actionTail=d,this},a._set=function(c){for(var a in c)this[a]=c[a]},a._cloneProps=function(d){var a={};for(var b in d)a[b]=d[b];return a},createjs.Tween=createjs.promote(r,"AbstractTween")}(),this.createjs=this.createjs||{},function(){"use strict";function b(d){var e,f;d instanceof Array||null==d&&1<arguments.length?(e=d,f=arguments[1],d=arguments[2]):d&&(e=d.tweens,f=d.labels),this.AbstractTween_constructor(d),this.tweens=[],e&&this.addTween.apply(this,e),this.setLabels(f),this._init(d)}var c=createjs.extend(b,createjs.AbstractTween);c.addTween=function(e){e._parent&&e._parent.removeTween(e);var a=arguments.length;if(1<a){for(var b=0;a>b;b++)this.addTween(arguments[b]);return arguments[a-1]}if(0===a)return null;this.tweens.push(e),e._parent=this,e.paused=!0;var f=e.duration;return 0<e.loop&&(f*=e.loop+1),f>this.duration&&(this.duration=f),0<=this.rawPosition&&e.setPosition(this.rawPosition),e},c.removeTween=function(f){var a=arguments.length;if(1<a){for(var b=!0,g=0;a>g;g++)b=b&&this.removeTween(arguments[g]);return b}if(0===a)return!0;for(var h=this.tweens,g=h.length;g--;)if(h[g]===f)return h.splice(g,1),f._parent=null,f.duration>=this.duration&&this.updateDuration(),!0;return!1},c.updateDuration=function(){this.duration=0;for(var e=0,f=this.tweens.length;f>e;e++){var b=this.tweens[e],c=b.duration;0<b.loop&&(c*=b.loop+1),c>this.duration&&(this.duration=c)}},c.toString=function(){return"[Timeline]"},c.clone=function(){throw"Timeline can not be cloned."},c._updatePosition=function(e){for(var a=this.position,b=0,f=this.tweens.length;f>b;b++)this.tweens[b].setPosition(a,!0,e)},c._runActionsRange=function(h,a,b,c){for(var d=this.position,e=0,i=this.tweens.length;i>e;e++)if(this.tweens[e]._runActions(h,a,b,c),d!==this.position)return!0},createjs.Timeline=createjs.promote(b,"AbstractTween")}(),this.createjs=this.createjs||{},function(){"use strict";function b(){throw"Ease cannot be instantiated."}b.linear=function(b){return b},b.none=b.linear,b.get=function(c){return-1>c?c=-1:1<c&&(c=1),function(a){return 0==c?a:0>c?a*(a*-c+1+c):a*((2-a)*c+(1-c))}},b.getPowIn=function(c){return function(a){return Math.pow(a,c)}},b.getPowOut=function(c){return function(a){return 1-Math.pow(1-a,c)}},b.getPowInOut=function(c){return function(a){return 1>(a*=2)?.5*Math.pow(a,c):1-.5*Math.abs(Math.pow(2-a,c))}},b.quadIn=b.getPowIn(2),b.quadOut=b.getPowOut(2),b.quadInOut=b.getPowInOut(2),b.cubicIn=b.getPowIn(3),b.cubicOut=b.getPowOut(3),b.cubicInOut=b.getPowInOut(3),b.quartIn=b.getPowIn(4),b.quartOut=b.getPowOut(4),b.quartInOut=b.getPowInOut(4),b.quintIn=b.getPowIn(5),b.quintOut=b.getPowOut(5),b.quintInOut=b.getPowInOut(5),b.sineIn=function(b){return 1-Math.cos(b*Math.PI/2)},b.sineOut=function(b){return Math.sin(b*Math.PI/2)},b.sineInOut=function(b){return-.5*(Math.cos(Math.PI*b)-1)},b.getBackIn=function(c){return function(a){return a*a*((c+1)*a-c)}},b.backIn=b.getBackIn(1.7),b.getBackOut=function(c){return function(a){return--a*a*((c+1)*a+c)+1}},b.backOut=b.getBackOut(1.7),b.getBackInOut=function(c){return c*=1.525,function(a){return 1>(a*=2)?.5*a*a*((c+1)*a-c):.5*((a-=2)*a*((c+1)*a+c)+2)}},b.backInOut=b.getBackInOut(1.7),b.circIn=function(b){return-(Math.sqrt(1-b*b)-1)},b.circOut=function(b){return Math.sqrt(1- --b*b)},b.circInOut=function(b){return 1>(b*=2)?-.5*(Math.sqrt(1-b*b)-1):.5*(Math.sqrt(1-(b-=2)*b)+1)},b.bounceIn=function(c){return 1-b.bounceOut(1-c)},b.bounceOut=function(b){return 1/2.75>b?7.5625*b*b:2/2.75>b?7.5625*(b-=1.5/2.75)*b+.75:2.5/2.75>b?7.5625*(b-=2.25/2.75)*b+.9375:7.5625*(b-=2.625/2.75)*b+.984375},b.bounceInOut=function(c){return .5>c?.5*b.bounceIn(2*c):.5*b.bounceOut(2*c-1)+.5},b.getElasticIn=function(f,a){var b=2*Math.PI;return function(c){if(0==c||1==c)return c;var g=a/b*Math.asin(1/f);return-(f*Math.pow(2,10*(c-=1))*Math.sin((c-g)*b/a))}},b.elasticIn=b.getElasticIn(1,.3),b.getElasticOut=function(f,a){var b=2*Math.PI;return function(c){if(0==c||1==c)return c;var d=a/b*Math.asin(1/f);return f*Math.pow(2,-10*c)*Math.sin((c-d)*b/a)+1}},b.elasticOut=b.getElasticOut(1,.3),b.getElasticInOut=function(f,a){var b=2*Math.PI;return function(c){var g=a/b*Math.asin(1/f);return 1>(c*=2)?-.5*f*Math.pow(2,10*(c-=1))*Math.sin((c-g)*b/a):.5*(f*Math.pow(2,-10*(c-=1))*Math.sin((c-g)*b/a))+1}},b.elasticInOut=b.getElasticInOut(1,1.5*.3),createjs.Ease=b}(),this.createjs=this.createjs||{},function(){"use strict";function b(){throw"MotionGuidePlugin cannot be instantiated."}var z=b;z.priority=0,z.ID="MotionGuide",z.install=function(){return createjs.Tween._installPlugin(b),createjs.Tween.IGNORE},z.init=function(a,b){"guide"==b&&a._addPlugin(z)},z.step=function(a,b,c){for(var d in c)if("guide"==d){var e=b.props.guide,f=z._solveGuideData(c.guide,e);e.valid=!f;var g=e.endData;if(a._injectProp("x",g.x),a._injectProp("y",g.y),f||!e.orient)break;var h=void 0===b.prev.props.rotation?a.target.rotation||0:b.prev.props.rotation;if(e.startOffsetRot=h-e.startData.rotation,"fixed"==e.orient)e.endAbsRot=g.rotation+e.startOffsetRot,e.deltaRotation=0;else{var i=void 0===c.rotation?a.target.rotation||0:c.rotation,j=i-e.endData.rotation-e.startOffsetRot,k=j%360;switch(e.endAbsRot=i,e.orient){case"auto":e.deltaRotation=j;break;case"cw":e.deltaRotation=(k+360)%360+360*Math.abs(0|j/360);break;case"ccw":e.deltaRotation=(k-360)%360+-360*Math.abs(0|j/360);}}a._injectProp("rotation",e.endAbsRot)}},z.change=function(a,b,c,d,e){var f=b.props.guide;if(f&&b.props!==b.prev.props&&f!==b.prev.props.guide)return"guide"===c&&!f.valid||"x"==c||"y"==c||"rotation"===c&&f.orient?createjs.Tween.IGNORE:void z._ratioToPositionData(e,f,a.target)},z.debug=function(a,i,c){a=a.guide||a;var d=z._findPathProblems(a);if(d&&console.error("MotionGuidePlugin Error found: \n"+d),!i)return d;var e,j=a.path,g=j.length;for(i.save(),i.lineCap="round",i.lineJoin="miter",i.beginPath(),i.moveTo(j[0],j[1]),e=2;g>e;e+=4)i.quadraticCurveTo(j[e],j[e+1],j[e+2],j[e+3]);i.strokeStyle="black",i.lineWidth=1.5*3,i.stroke(),i.strokeStyle="white",i.lineWidth=3,i.stroke(),i.closePath();var h=c.length;if(c&&h){var k={},l={};z._solveGuideData(a,k);for(var e=0;h>e;e++)k.orient="fixed",z._ratioToPositionData(c[e],k,l),i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(l.x+Math.cos(.0174533*l.rotation)*9,l.y+Math.sin(.0174533*l.rotation)*9),i.strokeStyle="black",i.lineWidth=1.5*3,i.stroke(),i.strokeStyle="red",i.lineWidth=3,i.stroke(),i.closePath()}return i.restore(),d},z._solveGuideData=function(a,b){var c;if(c=z.debug(a))return c;{var p=b.path=a.path;b.orient=a.orient}b.subLines=[],b.totalLength=0,b.startOffsetRot=0,b.deltaRotation=0,b.startData={ratio:0},b.endData={ratio:1},b.animSpan=1;var e,A,B,C,D,E,F,G,H,I=p.length,o={};for(e=p[0],A=p[1],F=2;I>F;F+=4){B=p[F],C=p[F+1],D=p[F+2],E=p[F+3];var q={weightings:[],estLength:0,portion:0},r=e,J=A;for(G=1;10>=G;G++){z._getParamsForCurve(e,A,B,C,D,E,G/10,!1,o);var K=o.x-r,u=o.y-J;H=Math.sqrt(K*K+u*u),q.weightings.push(H),q.estLength+=H,r=o.x,J=o.y}for(b.totalLength+=q.estLength,G=0;10>G;G++)H=q.estLength,q.weightings[G]/=H;b.subLines.push(q),e=D,A=E}H=b.totalLength;var v=b.subLines.length;for(F=0;v>F;F++)b.subLines[F].portion=b.subLines[F].estLength/H;var w=isNaN(a.start)?0:a.start,x=isNaN(a.end)?1:a.end;z._ratioToPositionData(w,b,b.startData),z._ratioToPositionData(x,b,b.endData),b.startData.ratio=w,b.endData.ratio=x,b.animSpan=b.endData.ratio-b.startData.ratio},z._ratioToPositionData=function(a,b,c){var d,l,q,r,s,t=b.subLines,j=0,u=a*b.animSpan+b.startData.ratio;for(l=t.length,d=0;l>d;d++){if(r=t[d].portion,j+r>=u){s=d;break}j+=r}void 0===s&&(s=l-1,j-=r);var m=t[s].weightings,n=r;for(l=m.length,d=0;l>d&&(r=m[d]*n,!(j+r>=u));d++)j+=r;s=4*s+2,q=d/10+(u-j)/r*(1/10);var o=b.path;return z._getParamsForCurve(o[s-2],o[s-1],o[s],o[s+1],o[s+2],o[s+3],q,b.orient,c),b.orient&&(.99999<=a&&1.00001>=a&&void 0!==b.endAbsRot?c.rotation=b.endAbsRot:c.rotation+=b.startOffsetRot+a*b.deltaRotation),c},z._getParamsForCurve=function(k,a,b,c,d,e,f,g,h){var i=1-f;h.x=i*i*k+2*i*f*b+f*f*d,h.y=i*i*a+2*i*f*c+f*f*e,g&&(h.rotation=57.2957795*Math.atan2((c-a)*i+(e-c)*f,(b-k)*i+(d-b)*f))},z._findPathProblems=function(i){var a=i.path,b=a&&a.length||0;if(6>b||(b-2)%4){var c="\tCannot parse 'path' array due to invalid number of entries in path. ";return c+="There should be an odd number of points, at least 3 points, and 2 entries per point (x & y). ",c+="See 'CanvasRenderingContext2D.quadraticCurveTo' for details as 'path' models a quadratic bezier.\n\n",c+="Only [ "+b+" ] values found. Expected: "+Math.max(4*Math.ceil((b-2)/4)+2,6)}for(var j=0;b>j;j++)if(isNaN(a[j]))return"All data in path array must be numeric";var k=i.start;if(isNaN(k)&&void 0!==k)return"'start' out of bounds. Expected 0 to 1, got: "+k;var f=i.end;if(isNaN(f)&&void 0!==f)return"'end' out of bounds. Expected 0 to 1, got: "+f;var g=i.orient;return g&&"fixed"!=g&&"auto"!=g&&"cw"!=g&&"ccw"!=g?"Invalid orientation value. Expected [\"fixed\", \"auto\", \"cw\", \"ccw\", undefined], got: "+g:void 0},createjs.MotionGuidePlugin=b}(),this.createjs=this.createjs||{},function(){"use strict";var b=createjs.TweenJS=createjs.TweenJS||{};b.version="1.0.0",b.buildDate="Thu, 14 Sep 2017 19:47:47 GMT"}();function uiInit(){gameobjects.gamestate=gameobjects.states.loading,createHomeMenu(),raindropeffect()}function createHomeMenu(){createjs.Tween.get(GUI.gamelogo).play(createjs.Tween.get(GUI.gamelogo,{paused:!0,loop:!0}).to({width:GUI.gamelogo.width+20,height:GUI.gamelogo.height+20},500,createjs.Ease.quadOut).to({width:GUI.gamelogo.width,height:GUI.gamelogo.height},500,createjs.Ease.quadOut)),createjs.Tween.get(GUI.gamelogo).play(createjs.Tween.get(GUI.gamelogo,{paused:!0,loop:!0}).to({x:GUI.gamelogo.x-10},500,createjs.Ease.quadOut).to({x:GUI.gamelogo.x},500,createjs.Ease.quadOut)),function(){GUI.playMenu.width=GUI.btnCommon.width*(homeScreenButtonList.length+1),GUI.playMenu.x=(canvas.width-GUI.playMenu.width)/2-8*homeScreenButtonList.length,GUI.pauseMenu.width=GUI.btnCommon.width*(pauseScreenButtonList.length+1),GUI.pauseMenu.x=(canvas.width-GUI.pauseMenu.width)/2-8*pauseScreenButtonList.length}(),createjs.Tween.get(GUI.btnCommon).play(createjs.Tween.get(GUI.btnCommon,{paused:!0,loop:!0}).to({height:GUI.btnCommon.height+5},500,createjs.Ease.quadOut).to({height:GUI.btnCommon.height},500,createjs.Ease.quadOut)),GUI.levelup.y=-400}function leftkeyPressedGUI(){gameobjects.gamestate==gameobjects.states.home&&(homeScreenPointerPos=movePointer(homeScreenPointerPos,homeScreenButtonList,!1)),gameobjects.gamestate==gameobjects.states.pause&&(pauseScreenPointerPos=movePointer(pauseScreenPointerPos,pauseScreenButtonList,!1))}function rightkeyPressedGUI(){gameobjects.gamestate==gameobjects.states.home&&(homeScreenPointerPos=movePointer(homeScreenPointerPos,homeScreenButtonList,!0)),gameobjects.gamestate==gameobjects.states.pause&&(pauseScreenPointerPos=movePointer(pauseScreenPointerPos,pauseScreenButtonList,!0))}function enterkeyPressedGUI(){gameobjects.gamestate==gameobjects.states.loading&&(setTimeout(function(){gameobjects.gamestate=gameobjects.states.home},10),GUI.loading=!1,sound.gamemusic.loop=!0,sound.gamemusic.play()),gameobjects.gamestate==gameobjects.states.home?(0==homeScreenPointerPos&&(gameobjects.gamestate=gameobjects.states.play,startgame()),1==homeScreenPointerPos&&(gameobjects.gamestate=gameobjects.states.info,console.log("info")),2==homeScreenPointerPos&&(console.log("audio"),handleGlobalSound(),homeScreenButtonList[2]=globalsound?img.BtnSoundOn:img.BtnSoundOff,pauseScreenButtonList[3]=globalsound?img.BtnSoundOn:img.BtnSoundOff)):gameobjects.gamestate==gameobjects.states.info?gameobjects.gamestate=gameobjects.states.home:gameobjects.gamestate==gameobjects.states.play?(gameobjects.gamestate=gameobjects.states.pause,console.log("paused")):gameobjects.gamestate==gameobjects.states.pause?(0==pauseScreenPointerPos&&(gameobjects.gamestate=gameobjects.states.play),1==pauseScreenPointerPos&&(startgame(),gameobjects.gamestate=gameobjects.states.play),2==pauseScreenPointerPos&&(gameobjects.gamestate=gameobjects.states.home),3==pauseScreenPointerPos&&(console.log("audio"),handleGlobalSound(),homeScreenButtonList[2]=globalsound?img.BtnSoundOn:img.BtnSoundOff,pauseScreenButtonList[3]=globalsound?img.BtnSoundOn:img.BtnSoundOff)):gameobjects.gamestate==gameobjects.states.overpass?gameobjects.gamestate=gameobjects.states.play:gameobjects.gamestate==gameobjects.states.overfail&&(gameobjects.gamestate=gameobjects.states.home)}function downkeyPressedGUI(){}function upkeyPressedGUI(){}function movePointer(a,b,c){return c?a+1>=b.length?0:a+1:0>a-1?b.length-1:a-1}function raindropeffect(){for(var a,b=0;b<GUI.decoration.bubbles.length;b++)a=new raindrop,createjs.Tween.get(a).wait(random(0,9000)).play(createjs.Tween.get(a,{paused:!0,loop:!0}).to({y:1e3},5000).to({y:0},0)),GUI.decoration.bubbles[b]=a}"use strict",String.prototype.toHHMMSS=function(){var a=parseInt(this,10),b=Math.floor(a/3600),c=Math.floor((a-3600*b)/60),d=a-3600*b-60*c;return 10>b&&(b="0"+b),10>c&&(c="0"+c),10>d&&(d="0"+d),b+":"+c+":"+d};function characterIndex(a){for(var b=0;b<spritefont1.xindex;b++)for(var d,e=0;e<spritefont1.yindex;e++)if(d=spritefont1.characterSet[e*spritefont1.xindex+b],a.toLowerCase()==d.toLowerCase()){var f={i:b,j:e};return f}}function spriteWrite(a,b,c,d,e){e&&(c-=a.length*b.size*b.spacing/2);for(var f=spritefont1.imgResolution/spritefont1.xindex,g=f-spritefont1.xindex,h=0;h<a.length;h++)if(" "!=a[h]){var l=characterIndex(a[h]).i,i=characterIndex(a[h]).j;context.drawImage(img[spritefont1.img],f*l,f*i,g,g,c+b.size*b.spacing*h,d,b.size,b.size)}}function spriteWrite2(a,b,c,d,e){e&&(c-=a.length*b.size*b.spacing/2);for(var f=spritefont2.imgResolution/spritefont2.xindex,g=f-spritefont2.xindex,h=0;h<a.length;h++)if(" "!=a[h]){var l=characterIndex(a[h]).i,i=characterIndex(a[h]).j;context.drawImage(img[spritefont2.img],f*l,f*i,g,g,c+b.size*b.spacing*h,d,b.size,b.size)}}var spritefont1={characterSet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789.,:;?!-+=~&$%()/{}[]<>^*\u25B2\u25BC@",xindex:8,yindex:8,imgResolution:512,img:"jfont"},spritefont2={characterSet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789.,:;?!-+=~&$%()/{}[]<>^*\u25B2\u25BC@",xindex:8,yindex:8,imgResolution:1024,img:"Font"},fontSmall={x:0,y:0,width:0,height:0,size:30,spacing:.6},fontMedium={x:0,y:0,width:100,height:100,size:50,spacing:.6},fontBig={x:0,y:0,width:0,height:0,size:60,spacing:.6},fontXL={x:0,y:0,width:0,height:0,size:200,spacing:.6};function randomBool(a,b){return 1==random(1,2)?a:b}function random(a,b){return Math.floor(Math.random()*(b-a+1)+a)}function randomFloat(a,b){return parseFloat(Math.random()*(b-a)+a).toFixed(3)}